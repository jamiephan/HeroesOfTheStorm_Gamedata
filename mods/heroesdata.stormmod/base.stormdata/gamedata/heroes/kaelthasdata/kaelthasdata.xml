<?xml version="1.0" encoding="us-ascii"?>
<Catalog>
  <CAbilAttack id="KaelthasPhoenixAttack" parent="attack">
    <CmdButtonArray index="Execute">
      <Flags index="IgnoreUser" value="1" />
    </CmdButtonArray>
    <Name value="Abil/Name/PhoenixAttack" />
    <SmartFilters value="-;Player,Ally,Neutral,Enemy" />
    <SmartPriority value="0" />
  </CAbilAttack>
  <CAbilEffectInstant id="KaelthasArcaneBarrier">
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasArcaneBarrierApplyBehavior" />
    <Flags index="NoDeceleration" value="1" />
    <Cost>
      <Cooldown TimeUse="45" />
    </Cost>
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasArcaneBarrier">
      <Flags index="AllowSelfCast" value="1" />
    </CmdButtonArray>
  </CAbilEffectInstant>
  <CAbilEffectInstant id="KaelthasEvocation">
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasEvocationCreatePersistent" />
    <Cost>
      <Cooldown TimeUse="60" />
    </Cost>
    <UninterruptibleArray index="Cast" value="1" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasEvocation" />
  </CAbilEffectInstant>
  <CAbilEffectTarget id="KaelthasFlamestrike">
    <AbilityCategories index="Reveals" value="1" />
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasFlamestrikeInitialSet" />
    <Flags index="ClearLastMoveTarget" value="1" />
    <Flags index="RequireTargetVision" value="0" />
    <Cost>
      <Vital index="Energy" value="70" />
      <Cooldown TimeUse="7" />
    </Cost>
    <Range value="10" />
    <Arc value="360" />
    <CastIntroTime value="0.25" />
    <CastOutroTime value="0.0625" />
    <UninterruptibleArray index="Cast" value="1" />
    <UninterruptibleArray index="Channel" value="1" />
    <UninterruptibleArray index="Finish" value="1" />
    <CursorEffect value="KaelthasFlamestrikeDummySearchArea" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasFlamestrike" />
  </CAbilEffectTarget>
  <CAbilEffectTarget id="KaelthasGravityLapse">
    <AbilityCategories index="Control" value="1" />
    <AbilityCategories index="Reveals" value="1" />
    <PrepEffect value="AbilityUseResponseSetDismountDecloakSuppressTurning" />
    <Effect value="KaelthasGravityLapseInitialSet" />
    <Flags index="ClearLastMoveTarget" value="1" />
    <Flags index="RequireTargetVision" value="0" />
    <Flags index="TargetVectorLock" value="1" />
    <Cost>
      <Vital index="Energy" value="90" />
      <Cooldown TimeUse="14" />
    </Cost>
    <Range value="500" />
    <CastIntroTime value="0.15" />
    <UninterruptibleArray index="Cast" value="1" />
    <UninterruptibleArray index="Channel" value="1" />
    <UninterruptibleArray index="Finish" value="1" />
    <CursorEffect value="KaelthasGravityLapseMissileScan" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasGravityLapse">
      <Flags index="AllowSelfCast" value="0" />
    </CmdButtonArray>
  </CAbilEffectTarget>
  <CAbilEffectTarget id="KaelthasLivingBomb">
    <PrepEffect value="KaelthasLivingBombPrepSet" />
    <Effect value="KaelthasLivingBombInitialSet" />
    <Flags index="ClearLastMoveTarget" value="1" />
    <Cost>
      <Vital index="Energy" value="50" />
      <Cooldown TimeUse="10" />
    </Cost>
    <TargetFilters value="-;Player,Ally,Missile,Item,Stasis,Dead,Hidden,Invulnerable" />
    <Range value="5.5" />
    <Arc value="360" />
    <CastIntroTime value="0.125" />
    <UninterruptibleArray index="Cast" value="1" />
    <UninterruptibleArray index="Channel" value="1" />
    <UninterruptibleArray index="Finish" value="1" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasLivingBomb">
      <Flags index="AllowSelfCast" value="0" />
    </CmdButtonArray>
  </CAbilEffectTarget>
  <CAbilEffectTarget id="KaelthasPhoenix">
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasPhoenixInitialSet" />
    <Flags index="ClearLastMoveTarget" value="1" />
    <Flags index="RequireTargetVision" value="0" />
    <Cost>
      <Vital index="Energy" value="80" />
      <Cooldown TimeUse="60" />
    </Cost>
    <Range value="10" />
    <Arc value="360" />
    <CastIntroTime value="0.1" />
    <UninterruptibleArray index="Cast" value="1" />
    <UninterruptibleArray index="Channel" value="1" />
    <UninterruptibleArray index="Finish" value="1" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasPhoenix" Requirements="Ultimate1Unlocked" />
    <ProducedUnitArray value="KaelthasPhoenix" />
  </CAbilEffectTarget>
  <CAbilArmMagazine id="KaelthasPhoenixMagazine" parent="StormArmMagazine">
    <AbilSetId value="KaelthasPhoenixMagazine" />
    <Launch value="ReleaseAtTarget" />
    <Flags index="AutoCreate" value="1" />
    <Flags index="Transient" value="1" />
    <Leash value="2.5" />
    <InfoArray index="Ammo1" Distance="0.5" Manage="Recall" Unit="KaelthasPhoenix">
      <Charge Location="Unit" />
      <Button DefaultButtonFace="KaelthasPhoenix">
        <Flags index="ToSelection" value="1" />
      </Button>
      <Flags index="External" value="1" />
    </InfoArray>
    <Alert value="" />
    <EffectArray index="Create" value="ApplySummonedUnitMountBehavior" />
    <ExternalAngle value="59.9963" />
    <MaxCount value="1" />
  </CAbilArmMagazine>
  <CAbilEffectTarget id="KaelthasPhoenixRetarget">
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasPhoenixRetargetSet" />
    <Flags index="ClearLastAttackTarget" value="1" />
    <Flags index="RequireTargetVision" value="0" />
    <Flags index="Transient" value="1" />
    <Range value="10" />
    <Arc value="360" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasPhoenixRetarget" Requirements="KaelthasHasPhoenixRetargetReady">
      <Flags index="AllowSelfCast" value="0" />
      <Flags index="ToSelection" value="1" />
    </CmdButtonArray>
    <ParentAbil value="KaelthasPhoenix" />
    <CursorRangeFlags index="ClampMin" value="1" />
    <CursorRangeFlags index="ClampMax" value="1" />
    <AbilityCategories index="TargetAcrossMapPlane" value="1" />
  </CAbilEffectTarget>
  <CAbilEffectTarget id="KaelthasPyroblast">
    <Activity value="Abil/KaelthasPyroblast/Activity" />
    <PrepEffect value="KaelthasPyroblastCastPrepareSet" />
    <Effect value="KaelthasPyroblastCastSet" />
    <Flags index="ClearLastAttackTargetOutOfRange" value="1" />
    <Flags index="ClearLastMoveTarget" value="1" />
    <Flags index="ReApproachable" value="0" />
    <Cost>
      <Vital index="Energy" value="80" />
      <Cooldown TimeUse="100" />
    </Cost>
    <InterruptArray index="Cast" value="1" />
    <InterruptArray index="Channel" value="1" />
    <InterruptCost>
      <Cooldown Operation="Set" TimeUse="10" />
    </InterruptCost>
    <TargetFilters value="Heroic;Player,Ally,Missile,Item,Stasis,Dead,Hidden,Invulnerable" />
    <Range value="15" />
    <RangeSlop value="5" />
    <Arc value="360" />
    <CastIntroTime value="1.5" />
    <ShowProgressArray index="Cast" value="1" />
    <ShowProgressArray index="Channel" value="1" />
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasPyroblast" Requirements="Ultimate2Unlocked">
      <Flags index="AllowSelfCast" value="0" />
    </CmdButtonArray>
  </CAbilEffectTarget>
  <CAbilEffectInstant id="KaelthasVerdantSpheres">
    <Effect value="KaelthasVerdantSpheresCastSet" />
    <Cost>
      <Charge CountMax="1" CountStart="1" HideCount="1" />
      <Cooldown TimeUse="0.0625" />
    </Cost>
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasVerdantSpheres" />
  </CAbilEffectInstant>
  <CAbilEffectInstant id="KaelthasVerdantSpheresDeactivate">
    <PrepEffect value="DismountDecloakCasterSet" />
    <Effect value="KaelthasVerdantSpheresRemoveActiveBehavior" />
    <Flags index="AutoCast" value="1" />
    <Cost>
      <Cooldown TimeUse="0.5" />
    </Cost>
    <CmdButtonArray index="Execute" DefaultButtonFace="KaelthasVerdantSpheresDeactivate" Requirements="KaelthasHasVerdantSpheresActive" />
  </CAbilEffectInstant>
  <CAccumulatorToken id="KaelthasManaAddictAccumulator" parent="BaseTokenAccumulator">
    <ApplicationRule value="Add" />
    <TokenId value="KaelthasManaAddictQuestToken" />
    <Scale value="15" />
    <UnitSource Value="Source" />
    <MinAccumulation value="0" />
  </CAccumulatorToken>
  <CAccumulatorToken id="KaelthasFlamestrikeConvectionAccumulator" parent="BaseTokenAccumulator">
    <MaxAccumulation value="200" />
    <ApplicationRule value="Add" />
    <TokenId value="KaelthasFlamestrikeConvectionQuestToken" />
    <Scale value="5" />
    <UnitSource Value="Source" />
    <MinAccumulation value="0" />
  </CAccumulatorToken>
  <CActorQuad id="KaelthasPhoenixRetargetGuide" parent="StormGuideVisualQuadDownScaled" abil="KaelthasPhoenixRetarget">
    <Height value="10.000000" />
    <Width value="1.500000" />
  </CActorQuad>
  <CActorModel id="KaelthasCastFXSunfireAttackLeft" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasCastFXBasicAttack" />
    <Host Subject="_Hero" />
    <HostSiteOps Ops="SOpAttachWeaponLeft" />
    <Model value="KaelthasCastFXSunfireAttack" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasCastFXBasicAttackRight" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasCastFXBasicAttack" />
    <HostSiteOps Ops="SOpAttachWeaponRight" />
    <Model value="KaelthasCastFXBasicAttack" />
    <Host Subject="_Hero" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasCastFXBasicAttackLeft" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasCastFXBasicAttack" />
    <HostSiteOps Ops="SOpAttachWeaponLeft" />
    <Model value="KaelthasCastFXBasicAttack" />
    <Host Subject="_Hero" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasCastFXGravityLapse" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpAttachWeapon" HoldPosition="1" HoldRotation="1" />
    <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce" />
    <On Terms="Abil.KaelthasGravityLapse.SourceCastStop; ValidateUnit KaelthasCasterVerdantSpheresNotActive" Send="Create" />
    <On Terms="ActorCreation" Send="$Birth" />
    <On Terms="AnimPlay; AnimPlaying Birth" Send="AnimSetTime Birth 0.150000" />
    <On Terms="AnimDone; AnimName Birth" Send="Destroy" />
  </CActorModel>
  <CActorModel id="KaelthasCastFXGravityLapseV" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpAttachWeapon" HoldPosition="1" HoldRotation="1" />
    <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce" />
    <On Terms="Abil.KaelthasGravityLapse.SourceCastStop; ValidateUnit KaelthasCasterVerdantSpheresActive" Send="Create" />
    <On Terms="ActorCreation" Send="$Birth" />
    <On Terms="AnimPlay; AnimPlaying Birth" Send="AnimSetTime Birth 0.150000" />
    <On Terms="AnimDone; AnimName Birth" Send="Destroy" />
  </CActorModel>
  <CActorModel id="KaelthasCastFXSunfireAttackRight" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasCastFXBasicAttack" />
    <Host Subject="_Hero" />
    <HostSiteOps Ops="SOpAttachWeaponRight" />
    <Model value="KaelthasCastFXSunfireAttack" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeImpactModel" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasFlamestrikeDamage.Start; At Target" Send="Create" />
    <HostSiteOps Ops="SOpAttachCenter" />
    <Model value="FlamestrikeImpactModel" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeWeaponGlowLeft" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasFlamestrikeWeaponGlow" />
    <On Terms="Abil.KaelthasFlamestrike.SourceCastStart" Send="Create" />
    <Host Subject="_Hero" />
    <HostSiteOps Ops="SOpAttachWeaponLeft" />
    <Model value="KaelthasFlamestrikeWeaponGlow" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasGravityLapseFlailStun" parent="StormFlailStun">
    <On Terms="Behavior.KaelthasGravityLapseTarget.On" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.Off" Send="Destroy" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.On" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.Off" Send="Destroy" />
    <On Terms="ActorCreation" Send="SetOpacity" />
    <On Terms="ActorCreation" Target="_Unit" Send="AnimClear Spell" />
    <On Terms="ActorCreation" Target="_Unit" Send="AnimClear Channel" />
  </CActorModel>
  <CActorAction id="KaelthasGravityLapseVerdantSphereMissile1" parent="GenericAttackPointStorm" effectImpact="KaelthasGravityLapseVerdantSpheresImpactDummy" effectLaunch="KaelthasGravityLapseVerdantSpheresLaunchMissile1">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods01" />
    <Missile value="KaelthasGravityLapseVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasGravityLapseVerdantSpheresLaunchMissile1" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasGravityLapseMissileImpactOffset" />
  </CActorAction>
  <CActorAction id="KaelthasGravityLapseVerdantSphereMissile2" parent="GenericAttackPointStorm" effectImpact="KaelthasGravityLapseVerdantSpheresImpactDummy" effectLaunch="KaelthasGravityLapseVerdantSpheresLaunchMissile2">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods02" />
    <Missile value="KaelthasGravityLapseVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasGravityLapseVerdantSpheresLaunchMissile2" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasGravityLapseMissileImpactOffset" />
  </CActorAction>
  <CActorAction id="KaelthasGravityLapseVerdantSphereMissile3" parent="GenericAttackPointStorm" effectImpact="KaelthasGravityLapseVerdantSpheresImpactDummy" effectLaunch="KaelthasGravityLapseVerdantSpheresLaunchMissile3">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods03" />
    <Missile value="KaelthasGravityLapseVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasGravityLapseVerdantSpheresLaunchMissile3" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasGravityLapseMissileImpactOffset" />
  </CActorAction>
  <CActorBeamSimple id="KaelthasLivingBombBeam" parent="BeamSimpleAnimationStyleOneShot">
    <On Terms="Effect.KaelthasLivingBombBeamDummy.Start" Send="Create" />
    <On Terms="ActorCreation" Send="Create KaelthasLivingBombLaunchSound" />
    <HostLaunch Subject="_Unit" Scope="Caster" Actor="Find" />
    <HostLaunchSiteOps Ops="SOpAttachWeapon" HoldPosition="1" HoldRotation="1" />
    <HostImpact Subject="_Unit" Scope="Target" Actor="Find" />
    <HostImpactSiteOps Ops="SOpAttachCenter" HoldPosition="1" HoldRotation="1" />
  </CActorBeamSimple>
  <CActorModel id="KaelthasLivingBombExplosionImpactModel" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasLivingBombExplosionDamage.Start; At Target" Send="Create" />
    <HostSiteOps Ops="SOpAttachCenterSoft" />
  </CActorModel>
  <CActorModelMaterial id="KaelthasLivingBombGlaze" parent="ModelAnimationStyleContinuous">
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModelMaterial>
  <CActorModelMaterial id="KaelthasLivingBombGlazeTwo" parent="ModelAnimationStyleContinuous">
    <ModelFlags index="AutomateGlobalLoops" value="1" />
    <Model value="KaelthasLivingBombGlaze" />
  </CActorModelMaterial>
  <CActorModelMaterial id="KaelthasLivingBombGlazeThree" parent="ModelAnimationStyleContinuous">
    <ModelFlags index="AutomateGlobalLoops" value="1" />
    <Model value="KaelthasLivingBombGlaze" />
  </CActorModelMaterial>
  <CActorModel id="KaelthasLivingBombChainBombTarget" parent="StormModelAddition">
    <Inherits index="Visibility" value="1" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.On" Send="Create" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.Off" Send="Destroy" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.On; ValidateUnit IsStructureTarget" Target="_Unit" Send="ModelMaterialApply LivingBombChainBombGlaze" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.Off" Target="_Unit" Send="TimerSet 1.000000 LivingBombChainBombGlaze" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.Off" Target="LivingBombChainBombGlaze" Send="AnimBracketStop BSD" />
    <On Terms="TimerExpired; TimerName LivingBombChainBombGlaze" Target="_Unit" Send="ModelMaterialRemove LivingBombChainBombGlaze" />
    <On Terms="ActorCreation" Send="Create KaelthasLivingBombLoopSound" />
    <On Terms="Behavior.KaelthasLivingBombChainBombTarget.Off" Target="KaelthasLivingBombLoopSound" Send="Destroy" />
    <HostSiteOps Ops="SOpAttachCenterSoft" />
    <Model value="KaelthasLivingBombTarget" />
    <AutoScaleFactor value="0.750000" />
  </CActorModel>
  <CActorSound id="KaelthasLivingBombLaunchSound" parent="SoundOneShot">
    <Sound value="Kaelthas_LivingBomb_Launch" />
    <Layers Sound="Kaelthas_LivingBomb_Launch_Skin" />
  </CActorSound>
  <CActorSound id="HeroKaelthasTauntVO" parent="SoundOneShot">
    <Sound value="KaelthasBase_Taunt" />
  </CActorSound>
  <CActorSound id="KaelthasTauntUEVO" parent="SoundOneShot">
    <Sound value="KaelthasBase_Taunt_Evo" />
  </CActorSound>
  <CActorModelMaterial id="LivingBombChainBombGlaze" parent="ModelAnimationStyleContinuous">
    <Model value="KaelthasLivingBombGlaze" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModelMaterial>
  <CActorModelMaterial id="LivingBombChainBombGlazeTwo" parent="ModelAnimationStyleContinuous">
    <Model value="KaelthasLivingBombGlaze" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModelMaterial>
  <CActorModelMaterial id="LivingBombChainBombGlazeThree" parent="ModelAnimationStyleContinuous">
    <Model value="KaelthasLivingBombGlaze" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModelMaterial>
  <CActorModel id="KaelthasLivingBombVerdantSphereExplosion" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpAttachHardPoint01" HoldPosition="1" HoldRotation="1" />
  </CActorModel>
  <CActorModel id="KaelthasLivingBombVerdantSphereExplosion2" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpAttachHardPoint02" HoldPosition="1" HoldRotation="1" />
    <Model value="KaelthasLivingBombVerdantSphereExplosion" />
  </CActorModel>
  <CActorModel id="KaelthasLivingBombVerdantSphereExplosion3" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpAttachHardPoint03" HoldPosition="1" HoldRotation="1" />
    <Model value="KaelthasLivingBombVerdantSphereExplosion" />
  </CActorModel>
  <CActorAction id="KaelthasLivingBombVerdantSpheresMissile1" parent="GenericAttackPointStorm" effectImpact="KaelthasLivingBombVerdantSpheresImpactDummy" effectLaunch="KalethasLivingBombVerdantSphereLaunchMissile1">
    <Missile value="KaelthasLivingBombVerdantSpheresAttackMissile" />
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods01" />
    <ForceCommencementFrom value="KalethasLivingBombVerdantSphereLaunchMissile1" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasLivingBombMissileImpactOffset" />
  </CActorAction>
  <CActorAction id="KaelthasLivingBombVerdantSpheresMissile2" parent="GenericAttackPointStorm" effectImpact="KaelthasLivingBombVerdantSpheresImpactDummy" effectLaunch="KalethasLivingBombVerdantSphereLaunchMissile2">
    <Missile value="KaelthasLivingBombVerdantSpheresAttackMissile" />
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods02" />
    <ForceCommencementFrom value="KalethasLivingBombVerdantSphereLaunchMissile2" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasLivingBombMissileImpactOffset" />
  </CActorAction>
  <CActorAction id="KaelthasLivingBombVerdantSpheresMissile3" parent="GenericAttackPointStorm" effectImpact="KaelthasLivingBombVerdantSpheresImpactDummy" effectLaunch="KalethasLivingBombVerdantSphereLaunchMissile3">
    <Missile value="KaelthasLivingBombVerdantSpheresAttackMissile" />
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods03" />
    <ForceCommencementFrom value="KalethasLivingBombVerdantSphereLaunchMissile3" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasLivingBombMissileImpactOffset" />
  </CActorAction>
  <CActorModel id="KaelthasPhoenixAttackRangeSplat" parent="StormModelAnimationStyleContinuous">
    <Model value="KaelthasPhoenixPlacement" />
    <HostSiteOps Ops="SOpPointSouthWorld" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixWeaponAoE" parent="StormModelAnimationStyleOneShotUnit">
    <Inherits index="CloakEffect" value="0" />
    <Preload index="0" value="KaelthasPhoenixAoE" />
    <On Terms="Effect.KaelthasPhoenixWeaponImpactSet.Start; At Effect" Send="Create" />
    <HostSiteOps Ops="SOpAttachCenter" />
    <ModelFlags index="AllowHitTest" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixCastHandFXLeft" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasPhoenixCastLeft" />
    <On Terms="Abil.KaelthasPhoenix.SourceCastStart" Send="Create" />
    <HostSiteOps Ops="SOpAttachWeaponLeft" />
    <Model value="KaelthasPhoenixCastHandFX" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixCastHandFXRight" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasPhoenixCastLeft" />
    <On Terms="Abil.KaelthasPhoenix.SourceCastStart" Send="Create" />
    <HostSiteOps Ops="SOpAttachWeaponRight" />
    <Model value="KaelthasPhoenixCastHandFX" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixMissileImpact" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasPhoenixMissileDamage.Start; At Target" Send="Create" />
    <Model value="KaelthasPhoenixMissileImpactFX" />
    <HostSiteOps Ops="SOpAttachCenter" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixLaunchFX" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasPhoenixLaunchMissile.Start; At Caster" Send="Create" />
    <On Terms="ActorCreation; At Caster" Send="Create KaelthasPhoenixLaunchSound" />
    <HostSiteOps Ops="" />
    <Model value="KaelthasPhoenixLaunch" />
  </CActorModel>
  <CActorModel id="KaelthasPhoenixWeaponAoEImpact" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasPhoenixWeaponImpact" />
    <On Terms="Effect.KaelthasPhoenixWeaponAoEDummy.Start; At Target" Send="Create" />
    <On Terms="ActorCreation" Send="$Birth" />
    <HostSiteOps Ops="SOpAttachCenter" />
  </CActorModel>
  <CActorSiteOpLocalOffset id="KaelthasGravityLapseMissileImpactOffset">
    <LocalOffset Z="1.500000" />
  </CActorSiteOpLocalOffset>
  <CActorSiteOpLocalOffset id="KaelthasLivingBombMissileImpactOffset">
    <LocalOffset Z="1.500000" />
  </CActorSiteOpLocalOffset>
  <CActorUnit id="HeroKaelthas" parent="StormHeroBase" unitName="HeroKaelthas">
    <AnimBlendTime value="0.100000" />
    <On Terms="Effect.KaelthasPhoenixInitialLaunchMissileSet.Start" Send="Create PhoenixSiteModel" />
    <On Terms="Abil.KaelthasPhoenixRetarget.TargetOn" Send="StatusSet ChargeCursorFind 1" />
    <On Terms="Abil.KaelthasPhoenixRetarget.TargetOn" Send="TimerSet 0.062500 ChargeCursorFind" />
    <On Terms="Abil.KaelthasPhoenixRetarget.TargetOff" Send="StatusSet ChargeCursorFind 0" />
    <On Terms="TimerExpired; TimerName ChargeCursorFind; IsStatus ChargeCursorFind 1" Target="::global.NewGuide" Send="Signal LinkPhoenixRetarget" />
    <On Terms="Signal.*.LinkCursorPhoenix" Send="RefSetFromMsg ::scope.PhoenixRetargetCursor ::Sender" />
    <On Terms="Signal.*.LinkCursorPhoenix" Send="Create KaelthasPhoenixRetargetQuadGuide" />
    <On Terms="Abil.KaelthasPhoenixRetarget.TargetOff" Target="KaelthasPhoenixRetargetQuadGuide" Send="Destroy" />
    <On Terms="ActorCreation" Send="StatusSet AttackOrder 0" />
    <On Terms="Abil.KaelthasLivingBomb.SourceCastStart" Send="StatusSet AttackOrder 2" />
    <On Terms="UnitMovementUpdate.*.Walk; AnimPlaying Attack" Send="AnimClear Attack" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing" Send="AnimClear Attack" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing; IsStatus AttackOrder 3" Send="AnimPlay Attack Attack,W" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing; IsStatus AttackOrder 2" Send="AnimPlay Attack Attack,Z" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing; IsStatus AttackOrder 1" Send="AnimPlay Attack Attack,Y" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing; IsStatus AttackOrder 0" Send="AnimPlay Attack Attack,X" />
    <On Terms="Weapon.*.PreswingBeforeAttackStart; !HasStatus Preswing" Send="StatusSet Preswing 1" />
    <On Terms="Weapon.*.PreswingBeforeAttackCancel; AnimPlaying Attack" Send="AnimClear Attack" />
    <On Terms="Weapon.*.PreswingBeforeAttackCancel" Send="StatusSet Preswing 0" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 3; ValidateUnit KaelthasDoesNotHaveSunfireEnchantmentBuff" Send="Create KaelthasCastFXBasicAttackRight" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 2; ValidateUnit KaelthasDoesNotHaveSunfireEnchantmentBuff" Send="Create KaelthasCastFXBasicAttackLeft" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 1; ValidateUnit KaelthasDoesNotHaveSunfireEnchantmentBuff" Send="Create KaelthasCastFXBasicAttackRight" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 0; ValidateUnit KaelthasDoesNotHaveSunfireEnchantmentBuff" Send="Create KaelthasCastFXBasicAttackLeft" />
    <On Terms="WeaponStart.*.AttackStart; !HasStatus Preswing; IsStatus AttackOrder 3" Send="AnimPlay Attack Attack,W 0 -1.000000 0.400000" />
    <On Terms="WeaponStart.*.AttackStart; !HasStatus Preswing; IsStatus AttackOrder 2" Send="AnimPlay Attack Attack,Z 0 -1.000000 0.400000" />
    <On Terms="WeaponStart.*.AttackStart; !HasStatus Preswing; IsStatus AttackOrder 1" Send="AnimPlay Attack Attack,Y 0 -1.000000 0.400000" />
    <On Terms="WeaponStart.*.AttackStart; !HasStatus Preswing; IsStatus AttackOrder 0" Send="AnimPlay Attack Attack,X 0 -1.000000 0.400000" />
    <On Terms="WeaponStart.*.AttackStart; !HasStatus Preswing" Send="AnimSetTime Attack 1.000000" />
    <On Terms="WeaponStart.*.AttackStart; HasStatus Preswing; AnimPlaying Attack" Send="AnimContinue Attack {} 1.000000" />
    <On Terms="WeaponStart.*.AttackStart; HasStatus Preswing" Send="StatusSet Preswing 0" />
    <On Terms="Weapon.*.PreswingBetweenAttacksStart; IsStatus AttackOrder 3" Send="AnimPlay Attack Attack,W 0 -1.000000 0.400000" />
    <On Terms="Weapon.*.PreswingBetweenAttacksStart; IsStatus AttackOrder 2" Send="AnimPlay Attack Attack,Z 0 -1.000000 0.400000" />
    <On Terms="Weapon.*.PreswingBetweenAttacksStart; IsStatus AttackOrder 1" Send="AnimPlay Attack Attack,Y 0 -1.000000 0.400000" />
    <On Terms="Weapon.*.PreswingBetweenAttacksStart; IsStatus AttackOrder 0" Send="AnimPlay Attack Attack,X 0 -1.000000 0.400000" />
    <On Terms="Weapon.*.PreswingBetweenAttacksStart" Send="StatusSet Preswing 1" />
    <On Terms="Weapon.*.PreswingBetweenAttacksCancel; HasStatus Preswing" Send="AnimClear Attack" />
    <On Terms="Weapon.*.PreswingBetweenAttacksCancel; HasStatus Preswing" Send="StatusSet Preswing 0" />
    <On Terms="Effect.KaelthasWeaponLaunchMissile.Start; At Caster" Send="StatusIncrement AttackOrder" />
    <On Terms="StatusIncrement; IsStatus AttackOrder 4" Send="StatusSet AttackOrder 0" />
    <On Terms="Abil.KaelthasVerdantSpheres.SourceCastStart" Send="Create KaelthasVerdantSpheresActivatedSound" />
    <On Terms="Effect.KaelthasVerdantSphereInitialDummy.Start" Send="StatusSet Verdant 1" />
    <On Terms="Effect.KaelthasVerdantSphereInitialDummy.Start" Send="Create KaelthasVerdantSpheresModel1_1" />
    <On Terms="Effect.KaelthasVerdantSpheresRefreshDummy.Start" Send="StatusIncrement Verdant" />
    <On Terms="Effect.KaelthasVerdantSpheresRefreshDummy.Start; IsStatus Verdant 2" Send="Create KaelthasVerdantSpheresModel2_2" />
    <On Terms="Effect.KaelthasVerdantSpheresRefreshDummy.Start; IsStatus Verdant 3" Send="Create KaelthasVerdantSpheresModel3_3" />
    <On Terms="Abil.KaelthasVerdantSpheresDeactivate.SourceCastStart" Send="Create KaelthasVerdantSpheresDeactivateSound" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.On" Target="KaelthasVerdantSpheresModel1_1" Send="Signal SpheresActive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.On" Target="KaelthasVerdantSpheresModel2_2" Send="Signal SpheresActive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.On" Target="KaelthasVerdantSpheresModel3_3" Send="Signal SpheresActive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.On" Send="AnimPlay Upgrade GLstand,Upgrade,Start 0 -1.000000 0.000000 1.000000 AsTimeScale" />
    <On Terms="AnimDone.*.Complete; AnimName Upgrade; AnimPlaying Upgrade GLstand,Upgrade,Start" Send="AnimPlay Upgrade GLstand,Upgrade,Stand PlayForever 0.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off" Send="TimerSet 0.125000 SpheresDelay" />
    <On Terms="TimerExpired; TimerName SpheresDelay" Send="AnimClear Upgrade 0.000000" />
    <On Terms="Effect.KaelthasLivingBombVerdantSpheresPopSet.Start" Send="Create KaelthasLivingBombVerdantSphereExplosion" />
    <On Terms="Effect.KaelthasLivingBombVerdantSpheresPopSet.Start" Send="Create KaelthasLivingBombVerdantSphereExplosion2" />
    <On Terms="Effect.KaelthasLivingBombVerdantSpheresPopSet.Start" Send="Create KaelthasLivingBombVerdantSphereExplosion3" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresE6" Send="StatusSet Verdant 3" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT6" Send="StatusSet Verdant 2" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT5" Send="StatusSet Verdant 1" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT4" Send="StatusSet Verdant 0" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT6" Target="KaelthasVerdantSpheresModel3_3" Send="Signal SpheresInactive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT5" Target="KaelthasVerdantSpheresModel2_2" Send="Signal SpheresInactive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off; ValidateUnit KaelthasCasterVerdantSpheresLT4" Target="KaelthasVerdantSpheresModel1_1" Send="Signal SpheresInactive" />
    <On Terms="Behavior.KaelthasVerdantSpheresActive.Off" Target="_KaelThasVerdantSpheres" Send="Signal SpheresNormal" />
    <On Terms="Behavior.KaelthasVerdantSpheres.Off" Target="KaelthasPhoenixReady" Send="Destroy" />
    <On Terms="Abil.KaelthasFlamestrike.SourceCastStart" Send="$Spell,A 0 -1.000000 0.500000 1.000000 AsTimeScale" />
    <On Terms="AnimDone; AnimIs Spell Spell,A" Send="AnimBaselineSuppressNextStandIntro" />
    <On Terms="Abil.KaelthasLivingBomb.SourceCastStart" Send="$Spell,B 0 -1.000000 0.500000 1.000000 AsTimeScale" />
    <On Terms="AnimDone; AnimIs Spell Spell,B" Send="AnimBaselineSuppressNextStandIntro" />
    <On Terms="Abil.KaelthasGravityLapse.SourceCastStart" Send="$Spell,C 0 -1.000000 0.500000 1.000000 AsTimeScale" />
    <On Terms="AnimDone; AnimIs Spell Spell,C" Send="AnimBaselineSuppressNextStandIntro" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="$Spell,D 0 -1.000000 0.000000 1.000000 AsTimeScale" />
    <On Terms="AnimDone.*.Complete; AnimName Spell; AnimPlaying Spell D" Send="$Spell,E 0 0.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="Create KaelthasPyroblastChannelSound" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="Create KaelthasPyroblastRangeSlop" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop" Target="KaelthasPyroblastChannelSound" Send="Destroy" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop" Target="KaelthasPyroblastRangeSlop" Send="Destroy" />
    <On Terms="Abil.KaelthasPhoenix.SourceCastStart" Send="$Spell,F 0 -1.000000 0.500000 1.000000 AsTimeScale" />
    <On Terms="Effect.KaelthasPhoenixRetargetRemoveReadyBehavior.Start" Send="$Spell,B 0 -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Effect.KaelthasEvocationCreatePersistent.Start" Send="$Spell,Channel PlayForever" />
    <On Terms="Effect.KaelthasEvocationCreatePersistent.Stop" Send="AnimClear Spell" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 3; ValidateUnit KaelthasHasSunfireEnchantmentBuff" Send="Create KaelthasCastFXSunfireAttackRight" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 2; ValidateUnit KaelthasHasSunfireEnchantmentBuff" Send="Create KaelthasCastFXSunfireAttackLeft" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 1; ValidateUnit KaelthasHasSunfireEnchantmentBuff" Send="Create KaelthasCastFXSunfireAttackRight" />
    <On Terms="WeaponStart.*.AttackStart; IsStatus AttackOrder 0; ValidateUnit KaelthasHasSunfireEnchantmentBuff" Send="Create KaelthasCastFXSunfireAttackLeft" />
    <On Terms="UnitMovementUpdate.*.Walk; AnimPlaying Spell E" Send="AnimClear Spell" />
    <On Terms="Abil.TalentArcanePower.SourceCastStart" Send="$Spell,Omni" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop; AnimPlaying Spell D" Send="AnimClear Spell" />
    <On Terms="Abil.KaelthasArcanePower.SourceCastStart; ValidateUnit DoesNotHaveSuppressTalentUseAnimationsBehavior; !AnimPlaying Spell" Send="$Spell,Omni" />
    <On Terms="Abil.KaelthasArcaneBarrier.SourceCastStart; !AnimPlaying Spell" Send="$Spell,Omni" />
    <DeathArray index="Normal" SoundLink="KaelthasBase_Death" />
    <ErrorArray Error="NotEnoughEnergy" Sound="KaelthasBase_LowMana" />
    <HeroIcon value="Assets\Textures\ui_targetportrait_hero_kaelthas.dds" />
    <MinimapIcon value="Assets\Textures\storm_ui_minimapicon_heros_Kaelthas.dds" />
    <NameOffset value="40" />
    <SoundArray index="Ready" value="KaelthasBase_Revive" />
    <SoundArray index="Yes" value="KaelthasBase_Yes" />
    <SoundArray index="Attack" value="KaelthasBase_Attack" />
    <SoundArray index="Pissed" value="KaelthasBase_Pissed" />
    <UnitIcon value="Assets\Textures\UI_targetportrait_Hero_Kaelthas.dds" />
    <Wireframe>
      <Image value="Assets\Textures\UI_targetportrait_Hero_Kaelthas.dds" />
    </Wireframe>
    <PortraitModel value="KaelthasPortrait" />
    <PortraitActor value="KaelthasPortrait" />
    <MinimapIconBackgroundScale value="0.950000" />
    <DeathCustoms ActorModel="HeroKaelthasDeathRagdoll" ModelLink="HeroKaelthasDeathRagdoll" Name="RagdollBasic">
      <BodySquibs Name="None" />
    </DeathCustoms>
    <Remove Terms="AnimPlay; AnimName Spell" Send="TimerSet 0.750000 UnitWalkingCheckDelay" />
    <Remove Terms="TimerExpired; TimerName UnitWalkingCheckDelay; UnitWalking" Send="AnimClear Spell" />
    <AbilSoundArray AbilCmd="KaelthasVerdantSpheres,Execute" Sound="StormNoSound" />
    <AbilSoundArray AbilCmd="KaelthasFlamestrike,Execute" Sound="StormNoSound" />
    <AbilSoundArray AbilCmd="KaelthasLivingBomb,Execute" Sound="StormNoSound" />
    <AbilSoundArray AbilCmd="KaelthasFlamestrike,Execute" Sound="StormNoSound" />
    <AbilSoundArray AbilCmd="KaelthasPhoenix,Execute" Sound="KaelthasBase_Ultimate1Used" />
    <AbilSoundArray AbilCmd="KaelthasPyroblast,Execute" Sound="KaelthasBase_Ultimate2Used" />
    <GroupIcon>
      <Image value="Assets\Textures\storm_ui_ingame_partyframe_kaelthas.dds" />
    </GroupIcon>
  </CActorUnit>
  <CActorMissile id="HeroKaelthasAttackMissile" parent="StormMissileWithDeath" unitName="HeroKaelthasAttackMissile" />
  <CActorAction id="HeroKaelthasAttack" parent="RangedHeroAttack" effectImpact="KaelthasWeaponDamage" effectLaunch="KaelthasWeaponLaunchMissile">
    <ImpactMap index="None" Model="KaelthasAttackImpact" Sound="Kaelthas_Attack_Impact_Unit" />
    <ImpactMap index="Rock" Sound="Kaelthas_Attack_Impact_Building" />
    <ActionFlags index="ImpactSuppressUnitSound" value="1" />
  </CActorAction>
  <CActorMissile id="KaelthasSunfireEnchantmentAttackMissile" parent="StormMissileWithDeath" unitName="KaelthasSunfireEnchantmentAttackMissile" />
  <CActorAction id="KaelthasSunfireEnchantmentAttack" parent="RangedHeroAttack" effectImpact="KaelthasSunfireEnchantmentDamage" effectLaunch="KaelthasSunfireEnchantmentLaunchMissile">
    <ImpactMap index="None" Sound="Kaelthas_SunfireEnchantment_Impact_Unit" />
    <ImpactMap index="Rock" Sound="Kaelthas_SunfireEnchantment_Impact_Building" />
    <LaunchAssets Sound="Kaelthas_SunfireEnchantment_Launch" />
  </CActorAction>
  <CActorModel id="KaelthasSunfireEnchantmentBuff" parent="StormModelAddition">
    <On Terms="Behavior.SunfireEnchantmentBuff.On" Send="Create" />
    <On Terms="Behavior.SunfireEnchantmentBuff.Off" Send="AnimBracketStop BSD" />
    <On Terms="ActorCreation" Send="SetTintColor {255,77,0 2.500000}" />
    <HostSiteOps Ops="SOpAttachWeapon" />
    <Inherits index="TeamColor" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeWeaponGlowRight" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasFlamestrikeWeaponGlow" />
    <On Terms="Abil.KaelthasFlamestrike.SourceCastStart" Send="Create" />
    <Host Subject="_Hero" />
    <HostSiteOps Ops="SOpAttachWeaponRight" />
    <Model value="KaelthasFlamestrikeWeaponGlow" />
    <ModelFlags index="AllowHitTest" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="HeroKaelthasDeathRagdoll" parent="StormHeroDeathRagdoll" />
  <CActorModel id="KaelthasVerdantSpheresModel1_1" parent="ModelAddition">
    <Model value="KaelthasVerdantSphere" />
    <On Terms="Signal.*.SpheresActive" Send="AnimGroupApply Stand,B Start" />
    <On Terms="Signal.*.SpheresActive" Send="HostSiteOpsSet ::Host SOpAttachHardPoint01" />
    <On Terms="ActorCreation" Send="AnimPlay Custom Custom,01 PlayForever" />
    <On Terms="Signal.*.SpheresInactive" Send="Destroy" />
    <On Terms="UnitDeath.HeroKaelthas" Send="Destroy" />
    <On Terms="Signal.*.SpheresNormal" Send="AnimGroupRemove Stand,B" />
    <On Terms="Signal.*.SpheresNormal" Send="HostSiteOpsSet ::Host {SOpAttachHardPoint01 SOpSpringKaelthas01}" />
    <HostSiteOps Ops="SOpAttachHardPoint01 SOpSpringKaelthas01" />
    <Aliases value="_KaelThasVerdantSpheres" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasVerdantSpheresModel2_2" parent="ModelAddition">
    <Model value="KaelthasVerdantSphere" />
    <On Terms="Signal.*.SpheresActive" Send="AnimGroupApply Stand,B Start" />
    <On Terms="Signal.*.SpheresActive" Send="HostSiteOpsSet ::Host SOpAttachHardPoint02" />
    <On Terms="ActorCreation" Send="AnimPlay Custom Custom,02 PlayForever" />
    <On Terms="Signal.*.SpheresInactive" Send="Destroy" />
    <On Terms="UnitDeath.HeroKaelthas" Send="Destroy" />
    <On Terms="Signal.*.SpheresNormal" Send="AnimGroupRemove Stand,B" />
    <On Terms="Signal.*.SpheresNormal" Send="HostSiteOpsSet ::Host {SOpAttachHardPoint02 SOpSpringKaelthas02}" />
    <HostSiteOps Ops="SOpAttachHardPoint02 SOpSpringKaelthas02" />
    <Aliases value="_KaelThasVerdantSpheres" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasVerdantSpheresModel3_3" parent="ModelAddition">
    <Model value="KaelthasVerdantSphere" />
    <On Terms="Signal.*.SpheresActive" Send="AnimGroupApply Stand,B Start" />
    <On Terms="Signal.*.SpheresActive" Send="HostSiteOpsSet ::Host SOpAttachHardPoint03" />
    <On Terms="ActorCreation" Send="AnimPlay Custom Custom,03 PlayForever" />
    <On Terms="Signal.*.SpheresInactive" Send="Destroy" />
    <On Terms="UnitDeath.HeroKaelthas" Send="Destroy" />
    <On Terms="Signal.*.SpheresNormal" Send="AnimGroupRemove Stand,B" />
    <On Terms="Signal.*.SpheresNormal" Send="HostSiteOpsSet ::Host {SOpAttachHardPoint03 SOpSpringKaelthas03}" />
    <HostSiteOps Ops="SOpAttachHardPoint03 SOpSpringKaelthas03" />
    <Aliases value="_KaelThasVerdantSpheres" />
    <ModelFlags index="AutomateGlobalLoops" value="1" />
  </CActorModel>
  <CActorSound id="KaelthasVerdantSpheresReadySound" parent="SoundOneShot">
    <Sound value="Kaelthas_VerdantSpheres_SpheresReady" />
  </CActorSound>
  <CActorSound id="KaelthasVerdantSpheresActivatedSound" parent="SoundOneShot">
    <Sound value="Kaelthas_VerdantSpheres_Activate" />
    <Layers Sound="KaelthasBase_Vox_VerdantSpheres2" />
    <Layers Sound="Kaelthas_VerdantSpheres_Activate_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasVerdantSpheresDeactivateSound" parent="SoundOneShot">
    <Sound value="Kaelthas_VerdantSpheres_Deactivate" />
  </CActorSound>
  <CActorSound id="KaelthasFelInfusionActivateSound" parent="SoundOneShot">
    <Sound value="Kaelthas_FelInfusion_Activate" />
    <On Terms="Effect.KaelthasVerdantSpheresFelInfusionCreateHealer.Start" Send="Create" />
  </CActorSound>
  <CActorModel id="KaelthasVerdantSpheresFelInfusion" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasVerdantSpheresFelInfusionCreateHealer.Start" Send="Create" />
    <HostSiteOps Ops="SOpAttachCenter" />
  </CActorModel>
  <CActorSiteOpSpring id="SOpSpringKaelthas01">
    <TeleportUnitRef value="::OuterUnit" />
    <Tightness value="150.000000" />
  </CActorSiteOpSpring>
  <CActorSiteOpSpring id="SOpSpringKaelthas02">
    <TeleportUnitRef value="::OuterUnit" />
    <Tightness value="200.000000" />
  </CActorSiteOpSpring>
  <CActorSiteOpSpring id="SOpSpringKaelthas03">
    <TeleportUnitRef value="::OuterUnit" />
    <Tightness value="100.000000" />
  </CActorSiteOpSpring>
  <CActorForceCylinder id="KaelthasFlamestrikeCylinder">
    <HostSiteOps Ops="SOpTargetPoint" />
    <HostEndSiteOps Ops="SOpTargetPoint SOpHigherBy3" />
    <Magnitude value="40.000000" />
    <Radius value="2.000000" />
    <On Terms="Effect.KaelthasFlamestrikeSearchArea.Start" Send="Create" />
    <Duration value="0.150000" />
  </CActorForceCylinder>
  <CActorForceCylinder id="KaelthasFlamestrikeVerdantSpheresCylinder">
    <HostSiteOps Ops="SOpTargetPoint" />
    <HostEndSiteOps Ops="SOpTargetPoint SOpHigherBy3" />
    <Magnitude value="55.000000" />
    <Radius value="3.000000" />
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresSearchArea.Start" Send="Create" />
    <Duration value="0.150000" />
  </CActorForceCylinder>
  <CActorSplat id="KaelthasFlamestrikeCursorSplat" parent="StormGuideVisualCircle" abil="KaelthasFlamestrike">
    <Model value="KaelthasFlamestrikeCursorSplat" />
  </CActorSplat>
  <CActorRange id="KaelthasFlamestrikeRange" parent="StormRangeAbilPlusSplat" abil="KaelthasFlamestrike" />
  <CActorSplat id="KaelthasFlamestrikeRangeSplat" parent="StormRangeSplat">
    <Scale value="11.125000" />
  </CActorSplat>
  <CActorModel id="KaelthasFlamestrikeWarning" parent="StormModelAnimationStyleContinuous">
    <On Terms="Effect.KaelthasFlamestrikeCreatePersistent.Start" Send="Create" />
    <On Terms="Effect.KaelthasFlamestrikeFuryOfTheSunwellCreatePersistent.Start" Send="Create" />
    <On Terms="Effect.KaelthasFlamestrikeSearchArea.Start" Send="AnimBracketStop BSD" />
    <On Terms="ActorCreation" Send="Create KaelthasFlameStrikeVO" />
  </CActorModel>
  <CActorSound id="KaelthasFlamestrikeCastSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Flamestrike_Cast" />
    <On Terms="Effect.KaelthasFlamestrikeCreatePersistent.Start" Send="Create" />
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresCreatePersistent.Start" Send="Create" />
    <Layers Sound="Kaelthas_Flamestrike_Cast_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasFlamestrikeCastEmpoweredSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Flamestrike_Empowered_Cast" />
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresCreatePersistent.Start" Send="Create" />
  </CActorSound>
  <CActorSound id="KaelthasFlameStrikeVO" parent="SoundOneShot">
    <Sound value="KaelthasBase_Reaction_CastingA" />
  </CActorSound>
  <CActorSound id="KaelthasFlameStrikeVerdantSpheresVO" parent="SoundOneShot">
    <Sound value="KaelthasBase_Reaction_CastingB" />
  </CActorSound>
  <CActorSound id="KaelthasFlamestrikeImpactSound" parent="SoundOneShot">
    <On Terms="Effect.KaelthasFlamestrikeSearchArea.Start; At Effect" Send="Create" />
    <Sound value="Kaelthas_Flamestrike_Impact" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Layers Sound="Kaelthas_Flamestrike_Impact_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasFlamestrikeVerdantSpheresImpactSound" parent="SoundOneShot">
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresSearchArea.Start; At Effect" Send="Create" />
    <Sound value="Kaelthas_Flamestrike_VerdantSpheres_Impact" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Layers Sound="Kaelthas_Flamestrike_Impact_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasFlamestrikeImpactEmpoweredSound" parent="SoundOneShot">
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresSearchArea.Start; At Effect" Send="Create" />
    <Sound value="Kaelthas_Flamestrike_Empowered_Impact" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Layers Sound="Kaelthas_Flamestrike_Impact_Skin" />
  </CActorSound>
  <CActorModel id="KaelthasFlamestrikeGroundImpact" parent="StormModelNoAnims">
    <On Terms="AnimDone; AnimName Birth" Send="$Death 0 -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="AnimDone; AnimName Death" Send="Destroy Immediate" />
    <On Terms="ActorCreation" Send="$Birth 0 -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Effect.KaelthasFlamestrikeSearchArea.Start; At Effect" Send="Create" />
    <AcceptedHostedPropTransfers index="Visibility" value="1" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeVerdantSpheresWarning" parent="StormModelAnimationStyleContinuous">
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresCreatePersistent.Start" Send="Create" />
    <On Terms="Effect.KaelthasFlamestrikeFuryOfTheSunwellVerdantSpheresCreatePersistent.Start" Send="Create" />
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresSearchArea.Start" Send="AnimBracketStop BSD" />
    <On Terms="ActorCreation" Send="Create KaelthasFlameStrikeVerdantSpheresVO" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeVerdantSpheresGroundImpact" parent="StormModelNoAnims">
    <On Terms="AnimDone; AnimName Birth" Send="$Death 0 -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="AnimDone; AnimName Death" Send="Destroy Immediate" />
    <On Terms="ActorCreation" Send="$Birth 0 -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Effect.KaelthasFlamestrikeVerdantSpheresSearchArea.Start; At Effect" Send="Create" />
    <AcceptedHostedPropTransfers index="Visibility" value="1" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorMissile id="KaelthasFlamestrikeVerdantSpheresAttackMissile" parent="GenericAttackMissile" unitName="KaelthasFlamestrikeVerdantSpheresMissile">
    <Model value="KaelthasVerdantSpheresMissile" />
  </CActorMissile>
  <CActorAction id="KaelthasFlamestrikeVerdantSphereMissile1" parent="GenericAttackPointStorm" effectImpact="KaelthasFlamestrikeVerdantSpheresImpactDummy" effectLaunch="KaelthasFlamestrikeVerdantSpheresLaunchMissile1">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods01" />
    <Missile value="KaelthasFlamestrikeVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasFlamestrikeVerdantSpheresLaunchMissile1" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary SOpKaelthasFlamestrikeVerdantSphereImpact01" />
  </CActorAction>
  <CActorAction id="KaelthasFlamestrikeVerdantSphereMissile2" parent="GenericAttackPointStorm" effectImpact="KaelthasFlamestrikeVerdantSpheresImpactDummy" effectLaunch="KaelthasFlamestrikeVerdantSpheresLaunchMissile2">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods02" />
    <Missile value="KaelthasFlamestrikeVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasFlamestrikeVerdantSpheresLaunchMissile2" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary SOpKaelthasFlamestrikeVerdantSphereImpact02" />
  </CActorAction>
  <CActorAction id="KaelthasFlamestrikeVerdantSphereMissile3" parent="GenericAttackPointStorm" effectImpact="KaelthasFlamestrikeVerdantSpheresImpactDummy" effectLaunch="KaelthasFlamestrikeVerdantSpheresLaunchMissile3">
    <LaunchAttachQuery Methods="$GenericHardpointLaunchMethods03" />
    <Missile value="KaelthasFlamestrikeVerdantSpheresAttackMissile" />
    <ForceCommencementFrom value="KaelthasFlamestrikeVerdantSpheresLaunchMissile3" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary SOpKaelthasFlamestrikeVerdantSphereImpact03" />
  </CActorAction>
  <CActorModel id="KaelthasManaTapManaGain" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasManaTapManaGain.Start" Send="Create" />
    <HostSiteOps HoldRotation="1" />
  </CActorModel>
  <CActorModel id="KaelthasFlamestrikeConvectionImpact" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="ActorCreation" Send="SetTintColor {255,102,28 3.000000}" />
    <HostSiteOps Ops="SOpAttachCenter" HoldPosition="1" HoldRotation="1" />
    <AutoScaleFactor value="0.750000" />
  </CActorModel>
  <CActorForceSphere id="KaelthasLivingBombExplosionSphere">
    <On Terms="Effect.KaelthasLivingBombExplosionSearchArea.Start" Send="Create" />
    <HostSiteOps Ops="SOpTargetPoint" />
    <Duration value="0.150000" />
    <Magnitude value="30.000000" />
    <Radius value="3.000000" />
  </CActorForceSphere>
  <CActorForceSphere id="KaelthasLivingBombChainBombSphere">
    <On Terms="Effect.KaelthasLivingBombChainBombSearchArea.Start" Send="Create" />
    <HostSiteOps Ops="SOpTargetPoint" />
    <Duration value="0.150000" />
    <Magnitude value="30.000000" />
    <Radius value="3.000000" />
  </CActorForceSphere>
  <CActorRange id="KaelthasLivingBombRange" parent="StormRangeAbilPlusSplat" abil="KaelthasLivingBomb" />
  <CActorSplat id="KaelthasLivingBombRangeSplat" parent="StormRangeSplat">
    <Scale value="6.750000" />
  </CActorSplat>
  <CActorSound id="KaelthasLivingBombImpactSound" parent="SoundOneShot">
    <Sound value="Kaelthas_LivingBomb_Impact" />
    <SoundFlags index="UpdateVisibility" value="0" />
  </CActorSound>
  <CActorModel id="KaelthasLivingBombTarget" parent="StormModelAddition">
    <On Terms="Behavior.KaelthasLivingBombTarget.On" Send="Create" />
    <On Terms="Behavior.KaelthasLivingBombTarget.Off" Send="Destroy" />
    <On Terms="Behavior.KaelthasLivingBombTarget.On; ValidateUnit IsStructureTarget" Target="_Unit" Send="ModelMaterialApply KaelthasLivingBombGlaze" />
    <On Terms="Behavior.KaelthasLivingBombTarget.Off" Send="TimerSet 1.000000 LivingBombGlaze" />
    <On Terms="Behavior.KaelthasLivingBombTarget.Off" Target="KaelthasLivingBombGlaze" Send="AnimBracketStop BSD" />
    <On Terms="TimerExpired; TimerName LivingBombGlaze" Target="_Unit" Send="ModelMaterialRemove KaelthasLivingBombGlaze" />
    <On Terms="ActorCreation" Send="Create KaelthasLivingBombLoopSound" />
    <On Terms="Behavior.KaelthasLivingBombTarget.Off" Target="KaelthasLivingBombLoopSound" Send="Destroy" />
    <HostSiteOps Ops="SOpAttachCenterSoft" />
    <AutoScaleFactor value="0.750000" />
    <Inherits index="Visibility" value="1" />
    <Macros value="RemovePolymorphMacroEffects" />
  </CActorModel>
  <CActorSound id="PhoenixImpactSound" parent="SoundOneShot">
    <On Terms="Effect.KaelthasPhoenixMissileDamage.Start" Send="Create" />
    <Sound value="KaelthasPhoenix_AttackImpact" />
  </CActorSound>
  <CActorSiteOpLocalOffset id="SOpGravityThrowForce">
    <LocalOffset Z="1.000000" />
  </CActorSiteOpLocalOffset>
  <CActorForceCylinder id="KaelthasGravityThrowForce">
    <HostSiteOps Ops="SOpTargetUnit" />
    <HostEndSiteOps Ops="SOpTargetUnit SOpGravityThrowForce" />
    <Magnitude value="20.000000" />
    <Radius value="1.000000" />
    <Duration value="0.375000" />
    <On Terms="Effect.KaelthasGravityThrowDelayKillPersistent.Start" Send="Create" />
  </CActorForceCylinder>
  <CActorSound id="KaelthasLivingBombLoopSound" parent="SoundOneShot">
    <Sound value="Kaelthas_LivingBomb_Loop" />
    <Host Subject="::Creator" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <InheritType value="Continuous" />
  </CActorSound>
  <CActorModel id="KaelthasLivingBombExplosionModel" parent="StormModelAnimationStyleOneShot">
    <On Terms="ActorCreation" Send="Create KaelthasLivingBombExplosionSound" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsNotMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombFatalResponseExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsNotMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaTarget.Start; At Target; ValidateUnit SourceIsNotMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsNotMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <On Terms="Effect.KaelthasLivingBombFatalResponseExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsNotMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaTarget.Start; At Target; ValidateUnit SourceIsNotMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <Remove Terms="ActorOrphan" Send="AnimBracketStop BSD" />
    <Model value="KaelthasLivingBombExplosion" />
    <HostSiteOps Ops="SOpAttachCenter SOp2DRotation" HoldPosition="1" />
    <Host Subject="_Unit" />
    <Scale value="1.200000" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasLivingBombExplosionRing" parent="StormModelAnimationStyleOneShot">
    <Remove Terms="ActorOrphan" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpAttachOrigin" HoldPosition="1" HoldRotation="1" />
    <Host Subject="_Unit" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasLivingBombExplosionModelMinion" parent="StormModelAnimationStyleOneShot">
    <On Terms="ActorCreation" Send="Create KaelthasLivingBombExplosionSound" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombFatalResponseExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaTarget.Start; At Target; ValidateUnit SourceIsMinion" Send="Create" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <On Terms="Effect.KaelthasLivingBombFatalResponseExplosionSearchAreaSource.Start; At Source; ValidateUnit SourceIsMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <On Terms="Effect.KaelthasLivingBombExplosionSearchAreaTarget.Start; At Target; ValidateUnit SourceIsMinion" Send="Create KaelthasLivingBombExplosionRing" />
    <Remove Terms="ActorOrphan" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpAttachCenter SOp2DRotation" HoldPosition="1" />
    <Host Subject="_Unit" />
    <Scale value="1.200000" />
  </CActorModel>
  <CActorSound id="KaelthasLivingBombExplosionSound" parent="SoundOneShot">
    <Sound value="Kaelthas_LivingBomb_Explode" />
    <Host Subject="::Creator" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Layers Sound="Kaelthas_LivingBomb_Impact_Skin" />
  </CActorSound>
  <CActorMissile id="KaelthasLivingBombVerdantSpheresAttackMissile" parent="GenericAttackMissile" unitName="KaelthasLivingBombVerdantSpheresMissile">
    <Model value="KaelthasVerdantSpheresMissile" />
  </CActorMissile>
  <CActorMissile id="KaelthasGravityLapseVerdantSpheresAttackMissile" parent="GenericAttackMissile" unitName="KaelthasGravityLapseVerdantSpheresMissile">
    <Model value="KaelthasVerdantSpheresMissile" />
  </CActorMissile>
  <CActorForceCylinder id="KaelthasGravityLapseCylinder">
    <HostSiteOps Ops="SOpTargetPoint" />
    <HostEndSiteOps Ops="SOpTargetPoint SOpHigherBy3" />
    <Magnitude value="40.000000" />
    <Radius value="1.750000" />
    <On Terms="Effect.KaelthasGravityLapseMissileScan.Start" Send="Create" />
    <Duration value="0.150000" />
  </CActorForceCylinder>
  <CActorQuad id="KaelthasGravityLapseGuideVisual" parent="StormGuideVisualQuadDownClosestFantasy" abil="KaelthasGravityLapse">
    <Height value="10.000000" />
    <Width value="1.750000" />
  </CActorQuad>
  <CActorAction id="KaelthasGravityLapseActionActor" parent="GenericAttackPointStorm" effectLaunch="KaelthasGravityLapseLaunchMissile">
    <LaunchAttachQuery Methods="Hardpoint 0" />
    <Missile value="KaelthasGravityLapseMissile" />
  </CActorAction>
  <CActorAction id="KaelthasGravityLapseNetherWindAttack" parent="GenericAttackPointStorm" effectImpact="KaelthasGravityLapseTerminateDummy" effectLaunch="KaelthasGravityLapseNetherWindLaunchMissile">
    <Missile value="KaelthasGravityLapseMissile" />
    <LaunchAttachQuery Methods="Hardpoint 0" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary KaelthasGravityLapseMissileImpactOffset" />
    <ForceCommencementFrom value="KaelthasGravityLapseNetherWindLaunchMissile" />
  </CActorAction>
  <CActorMissile id="KaelthasGravityLapseMissile" parent="StormMissileWithDeath" unitName="KaelthasGravityLapseMissile">
    <On Terms="ActorCreation" Send="Create KaelthasGravityLapseLaunchSound" />
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorMissile>
  <CActorMissile id="KaelthasGravityLapseEnhancedMissile" parent="StormMissileWithDeath" unitName="KaelthasGravityLapseEnhancedMissile">
    <On Terms="ActorCreation" Send="Create KaelthasGravityLapseLaunchEmpoweredSound" />
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <Model value="KaelthasGravityLapseMissileV" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorMissile>
  <CActorSound id="KaelthasGravityLapseLaunchSound" parent="SoundOneShot">
    <Sound value="Kaelthas_GravityLapse_Launch" />
    <Layers Sound="Kaelthas_GravityLapse_Projectile" />
    <Layers Sound="Kaelthas_GravityLapse_Launch_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasGravityLapseLaunchEmpoweredSound" parent="SoundOneShot">
    <Sound value="Kaelthas_GravityLapse_Launch" />
    <Layers Sound="Kaelthas_GravityLapse_Projectile" />
    <Layers Sound="Kaelthas_GravityLapse_Empowered_Launch" />
    <Layers Sound="Kaelthas_GravityLapse_Launch_Skin" />
  </CActorSound>
  <CActorModel id="KaelthasGravityLapseImpact" parent="StormModelAnimationStyleOneShotUnit">
    <HostSiteOps Ops="SOpShadow KaelthasGravityLapseMissileImpactOffset" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.On" Send="Create" />
  </CActorModel>
  <CActorSound id="KaelthasGravityLapseImpactSound" parent="SoundOneShot">
    <Sound value="Kaelthas_GravityLapse_Impact" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Host Subject="::Creator" />
    <InheritType value="Continuous" />
  </CActorSound>
  <CActorSound id="KaelthasBase_GravityLapse_VO" parent="SoundOneShot">
    <Sound value="KaelthasBase_Reaction_CastingC" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.On" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.On" Send="Create" />
  </CActorSound>
  <CActorSound id="KaelthasGravityLapseCastVOX" parent="SoundOneShot">
    <On Terms="Abil.KaelthasGravityLapse.SourceCastStart" Send="Create" />
    <Sound value="KaelthasBase_VOX_CastingC" />
  </CActorSound>
  <CActorSound id="KaelthasLivingBombCastVOX" parent="SoundOneShot">
    <On Terms="Abil.KaelthasLivingBomb.SourceCastStart" Send="Create" />
    <Sound value="KaelthasBase_VOX_CastingB" />
  </CActorSound>
  <CActorModel id="KaelthasGravityLapse" parent="StormModelAddition">
    <On Terms="ActorCreation" Send="Create KaelthasGravityLapseImpactSound" />
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.On; ValidateUnit SourceIsNotMinion" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.Off" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpShadow" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorModel id="KaelthasGravityLapseMinion" parent="StormModelAddition">
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.On; ValidateUnit SourceIsMinion" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTarget.Off; ValidateUnit SourceNotDead" Send="AnimBracketStop BSD" />
    <On Terms="ActorOrphan" Send="TimerSet 0.187500 DelayedDeath" />
    <On Terms="TimerExpired; TimerName DelayedDeath" Send="AnimBracketStop BSD" />
    <Remove Terms="ActorOrphan" Send="Destroy" />
    <HostSiteOps Ops="SOpShadow" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
    <Model value="KaelthasGravityLapse" />
  </CActorModel>
  <CActorModel id="KaelthasGravityLapseV" parent="StormModelAddition">
    <On Terms="ActorCreation" Send="Create KaelthasGravityLapseImpactSound" />
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.On; ValidateUnit SourceIsNotMinion" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.Off" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpShadow" />
    <Inherits index="Visibility" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
  </CActorModel>
  <CActorModel id="KaelthasGravityLapseVMinion" parent="StormModelAddition">
    <On Terms="ActorCreation" Send="AnimPlay GLStand GLstand PlayForever -1.000000 -1.000000 1.000000 AsTimeScale" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.On; ValidateUnit SourceIsMinion" Send="Create" />
    <On Terms="Behavior.KaelthasGravityLapseTargetV.Off; ValidateUnit SourceNotDead" Send="AnimBracketStop BSD" />
    <On Terms="ActorOrphan" Send="TimerSet 0.187500 DelayedDeath" />
    <On Terms="TimerExpired; TimerName DelayedDeath" Send="AnimBracketStop BSD" />
    <Remove Terms="ActorOrphan" Send="Destroy" />
    <HostSiteOps Ops="SOpShadow" />
    <Inherits index="Visibility" value="1" />
    <ModelFlags index="AutomateGlobalLoops" value="0" />
    <Model value="KaelthasGravityLapseV" />
  </CActorModel>
  <CActorForceConeRoundedEnd id="KaelthasPhoenixMissileCone">
    <Host Subject="KaelthasPhoenix" />
    <HostSiteOps Ops="SOpMoveBackBy2" HoldPosition="1" HoldRotation="1" />
    <HostEnd Subject="KaelthasPhoenix" />
    <HostEndSiteOps Ops="SOpMoveBy2 SOpMoveUpByDot5" HoldPosition="1" HoldRotation="1" />
    <Magnitude value="15.000000,10.000000" />
    <Duration value="0.150000" />
    <Angle value="50.000000" />
    <On Terms="Effect.KaelthasPhoenixMissileScan.Start" Send="Create" />
    <ForceFlags index="FallOff" value="0" />
  </CActorForceConeRoundedEnd>
  <CActorForceSphere id="KaelthasPhoenixMissileImpactSphere">
    <On Terms="Effect.KaelthasPhoenixDestroyPersistentsSet.Start" Send="Create" />
    <HostSiteOps Ops="SOpTargetPoint" />
    <Duration value="0.250000" />
    <Magnitude value="40.000000" />
    <Radius value="6.000000" />
  </CActorForceSphere>
  <CActorRange id="KaelthasPhoenixRange" parent="StormRangeAbilPlusSplat" abil="KaelthasPhoenix" />
  <CActorSplat id="KaelthasPhoenixRangeSplat" parent="StormRangeSplat">
    <Scale value="10.500000" />
  </CActorSplat>
  <CActorRange id="KaelthasPhoenixRetargetRange" parent="StormRangeAbilPlusSplat" abil="KaelthasPhoenixRetarget" />
  <CActorSplat id="KaelthasPhoenixRetargetRangeSplat" parent="StormRangeSplat">
    <Scale value="10.500000" />
  </CActorSplat>
  <CActorQuad id="KaelthasPhoenixGuide" parent="StormGuideVisualQuadDownScaled" abil="KaelthasPhoenix">
    <Height value="10.000000" />
    <Width value="1.500000" />
  </CActorQuad>
  <CActorRegionQuad id="PhoenixStormGuideRegionQuadDownClosest" parent="StormGuideRegionQuadDownClosest">
    <Aliases index="0" value="_PhoenixGuideRegionQuad" />
    <RegionFlags index="UseEffectRange" value="0" />
    <QueryRange value="500.000000" />
    <Height value="4.000000" />
    <Width value="2.500000" />
  </CActorRegionQuad>
  <CActorSplat id="KaelthasPhoenixCursor" parent="StormGuideVisualCircle" abil="KaelthasPhoenix">
    <Remove Terms="ActorCreation" Send="Create StormGuideRegionCircle" />
    <On Terms="ActorCreation" Send="Create PhoenixStormGuideRegionCircle" />
    <Model value="KaelthasPhoenixCursorSplat" />
    <Aliases index="0" value="_PhoenixGuideVisual" />
    <Host Subject="_PhoenixGuideRegion" />
    <Color value="255,255,255,255" />
  </CActorSplat>
  <CActorRegionCircle id="PhoenixStormGuideRegionCircle" parent="StormGuideRegionCircle">
    <Aliases index="0" value="_PhoenixGuideRegion" />
    <Remove Terms="RegionSubject.*.AddedFirst" Target="_GuideVisual" Send="ClearTintColor 0.100000 BaseTint" />
    <Remove Terms="RegionSubject.*.AddedFirst" Target="_GuideVisual" Send="SetTintColor 0,255,0 0.100000 OneShot Active" />
    <Remove Terms="RegionSubject.*.RemovedLast" Target="_GuideVisual" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint" />
    <Remove Terms="RegionSubject.*.RemovedLast" Target="_GuideVisual" Send="ClearTintColor 0.100000 Active" />
    <On Terms="RegionSubject.*.AddedFirst" Target="_PhoenixGuideVisual" Send="ClearTintColor 0.100000 BaseTint" />
    <On Terms="RegionSubject.*.AddedFirst" Target="_PhoenixGuideVisual" Send="SetTintColor 0,255,0 0.100000 OneShot Active" />
    <On Terms="RegionSubject.*.RemovedLast" Target="_PhoenixGuideVisual" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint" />
    <On Terms="RegionSubject.*.RemovedLast" Target="_PhoenixGuideVisual" Send="ClearTintColor 0.100000 Active" />
    <Radius value="5.850000" />
  </CActorRegionCircle>
  <CActorUnit id="KaelthasPhoenix" parent="StormMinionStandard" unitName="KaelthasPhoenix">
    <On Terms="AnimDone.*.Complete; AnimName Birth" Send="AnimPlay Burrow Burrow PlayForever" />
    <On Terms="Behavior.KaelthasPhoenixInitialDistanceCheck.Destroy" Send="AnimClear Burrow 0.300000" />
    <On Terms="Behavior.KaelthasPhoenixInitialDistanceCheck.Destroy" Send="AnimClear Birth 0.300000" />
    <On Terms="Effect.KaelthasPhoenixRetargetLaunchMissile.Start" Send="$Spell" />
    <On Terms="AnimDone.*.Complete; AnimName Spell" Send="AnimPlay Burrow Burrow PlayForever" />
    <On Terms="Behavior.KaelthasPhoenixRetargetDistanceCheck.Destroy" Send="AnimClear Burrow 0.300000" />
    <On Terms="Behavior.KaelthasPhoenixRetargetDistanceCheck.Destroy" Send="AnimClear Spell 0.300000" />
    <On Terms="ActorCreation" Send="Create KaelthasPhoenixBirthSound" />
    <On Terms="ActorCreation" Send="Create KaelthasPhoenixBirthSkinSound" />
    <On Terms="ActorCreation" Send="Create KaelthasPhoenixTrailFXSound" />
    <On Terms="Signal.*.SerpentShow" Send="SetFilter Enemy Clear" />
    <On Terms="Signal.*.SerpentHide" Send="SetFilter Enemy" />
    <On Terms="Effect.KaelthasPhoenixDestroyPersistentsSet.Start" Send="Create KaelthasPhoenixAttackRangeSplat" />
    <On Terms="Effect.KaelthasPhoenixRetargetLaunchMissile.Start" Target="KaelthasPhoenixAttackRangeSplat" Send="Destroy Immediate" />
    <On Terms="Effect.KaelthasPhoenixDestroyPersistentsSet.Start" Send="Create KaelthasPhoenixAttackRangeSplat" />
    <On Terms="UnitDeath" Target="KaelthasPhoenixAttackRangeSplat" Send="AnimBracketStop BSD" />
    <On Terms="UnitDeath" Target="KaelthasPhoenixTrailFXSound" Send="Destroy" />
    <CustomUnitStatusFrame value="UnitStatus/IndestructibleTimedUnitStatusFrameTemplate" />
    <UnitIcon value="Assets\Textures\storm_temp_war3_btnmarkoffire.dds" />
  </CActorUnit>
  <CActorSplat id="KaelthasRetargetPhoenixCursor" parent="StormGuideVisualCircle" abil="KaelthasPhoenixRetarget">
    <Remove Terms="ActorCreation" Send="Create StormGuideRegionCircle" />
    <On Terms="ActorCreation" Send="Create PhoenixRetargetStormGuideRegionCircle" />
    <Model value="KaelthasPhoenixCursorSplat" />
    <Aliases index="0" value="_PhoenixRetargetGuideVisual" />
    <Host Subject="_PhoenixRetargetGuideRegion" />
    <Color value="255,255,255,255" />
  </CActorSplat>
  <CActorRegionCircle id="PhoenixRetargetStormGuideRegionCircle" parent="StormGuideRegionCircle">
    <Aliases index="0" value="_PhoenixRetargetGuideRegion" />
    <Remove Terms="RegionSubject.*.AddedFirst" Target="_GuideVisual" Send="ClearTintColor 0.100000 BaseTint" />
    <Remove Terms="RegionSubject.*.AddedFirst" Target="_GuideVisual" Send="SetTintColor 0,255,0 0.100000 OneShot Active" />
    <Remove Terms="RegionSubject.*.RemovedLast" Target="_GuideVisual" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint" />
    <Remove Terms="RegionSubject.*.RemovedLast" Target="_GuideVisual" Send="ClearTintColor 0.100000 Active" />
    <On Terms="RegionSubject.*.AddedFirst" Target="_PhoenixRetargetGuideVisual" Send="ClearTintColor 0.100000 BaseTint" />
    <On Terms="RegionSubject.*.AddedFirst" Target="_PhoenixRetargetGuideVisual" Send="SetTintColor 0,255,0 0.100000 OneShot Active" />
    <On Terms="RegionSubject.*.RemovedLast" Target="_PhoenixRetargetGuideVisual" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint" />
    <On Terms="RegionSubject.*.RemovedLast" Target="_PhoenixRetargetGuideVisual" Send="ClearTintColor 0.100000 Active" />
    <Radius value="5.850000" />
  </CActorRegionCircle>
  <CActorModel id="KaelthasPhoenixLinkRetargetCursorModel">
    <Model value="Invisible" />
    <On Terms="Abil.KaelthasPhoenixRetarget.Guide" Send="Create" />
    <On Terms="ActorCreation" Send="RefSet ::global.NewGuide ::Self" />
    <On Terms="Signal.*.LinkPhoenixRetarget" Send="RefSetFromMsg ::actor.KaelthasPhoenix ::Sender" />
    <On Terms="Signal.*.LinkPhoenixRetarget" Target="::actor.KaelthasPhoenix" Send="Signal LinkCursorPhoenix" />
    <On Terms="ActorOrphan" Send="Destroy" />
    <HostSiteOps Ops="SOpBasicScopeFollow" />
  </CActorModel>
  <CActorQuad id="KaelthasPhoenixRetargetQuadGuide">
    <Height value="4.000000" />
    <Width value="2.500000" />
    <Quad value="-0.500000,-1.000000,0.500000,0.000000" />
    <Host Subject="_PhoenixSiteModel" Actor="Find" />
    <HostSiteOps Ops="SOpForwardKaelthasPhoenixRetargetGuide SOp2DRotation" />
    <LaunchActor value="GuideVisualQuadLaunch" />
    <CenterActor value="GuideVisualQuadCenter" />
    <ImpactActor value="GuideVisualQuadImpact" />
    <Flags index="SuppressSaveLoad" value="1" />
    <On Terms="ActorDestruction" Target="_GuideQuadSegment" Send="Destroy" />
    <On Terms="ActorOrphan" Send="Destroy" />
    <On Terms="ActorCreation" Send="Create KaelthasPhoenixRetargetRangeSplat" />
    <On Terms="ActorDestruction" Target="KaelthasPhoenixRetargetRangeSplat" Send="Destroy" />
    <On Terms="Abil.KaelthasPhoenixRetarget.TargetOff" Send="Destroy" />
  </CActorQuad>
  <CActorSiteOpForward id="SOpForwardKaelthasPhoenixRetargetGuide">
    <HostForward Subject="::scope.PhoenixRetargetCursor" Actor="Find" />
  </CActorSiteOpForward>
  <CActorModel id="PhoenixSiteModel">
    <Aliases value="_PhoenixSiteModel" />
    <Model value="Invisible" />
    <Host Subject="_Unit" Scope="Target" Actor="Find" />
    <HostSiteOps Ops="SOpTargetUnit SOpAttachHead" />
  </CActorModel>
  <CActorSiteBillboard id="KaelthasPhoenixFlyerBillboard">
    <BillboardType value="UseTowardsCameraDistance" />
    <TowardsCameraDistance value="0.500000" />
    <HoldRotation value="1" />
    <UpdateDriveBearings value="1" />
  </CActorSiteBillboard>
  <CActorAction id="KaelthasPhoenixWeaponAttack" parent="GenericAttack" effectImpact="KaelthasPhoenixWeaponDamage" effectLaunch="KaelthasPhoenixWeaponLaunchMissile">
    <LaunchAssets Model="KaelthasPhoenixWeaponLaunch" Sound="KaelthasPhoenix_AttackLaunch" />
    <ImpactMap index="None" Model="" Sound="KaelthasPhoenix_AttackImpact" />
    <ActionFlags index="ImpactSuppressUnitSound" value="1" />
  </CActorAction>
  <CActorMissile id="KaelthasPhoenixWeaponAttackMissile" parent="StormMissileWithDeath" unitName="KaelthasPhoenixWeaponMissile" />
  <CActorModel id="KaelthasPhoenixOnFire" parent="StormModelAddition">
    <HostSiteOps Ops="SOpAttachCenterSoft SOpMoveDownByDot50" />
    <Inherits index="Visibility" value="1" />
  </CActorModel>
  <CActorAction id="KaelthasPhoenixAttackAction" parent="GenericAttackPointStorm" effectImpact="KaelthasPhoenixImpactSet" effectLaunch="KaelthasPhoenixLaunchMissile">
    <LaunchAttachQuery Methods="" Fallback="Origin" />
    <LaunchAssets Model="KaelthasPhoenixAttackLaunch" Sound="KaelthasPhoenix_AttackLaunch" />
    <Missile value="KaelthasPhoenixAttackMissile" />
    <ImpactMap index="None" Model="" Sound="Kaelthas_Phoenix_Birth" ModelReaction="KaelthasPhoenixAttackImpactReaction" />
    <ImpactMap index="Shield" Sound="KaelthasPhoenixAttackImpactShield" ModelReaction="KaelthasPhoenixAttackImpactReactionShield" />
    <DamageMap index="None" Model="KaelthasPhoenixAttackDamage" Sound="KaelthasPhoenixAttackDamage" ModelReaction="KaelthasPhoenixAttackDamageReaction" />
    <DamageMap index="Shield" Sound="KaelthasPhoenixAttackDamageShield" ModelReaction="KaelthasPhoenixAttackDamageReactionShield" />
    <ActionFlags index="ImpactSuppressUnitSound" value="1" />
  </CActorAction>
  <CActorModel id="KaelthasPhoenixTrailFX" parent="StormModelAnimationStyleOneShot">
    <On Terms="Effect.KaelthasPhoenixModelDummy.Start" Send="Create" />
    <HostSiteOps Ops="SOpShadow" HoldPosition="1" HoldRotation="1" />
  </CActorModel>
  <CActorSound id="KaelthasPhoenixTrailFXSound" parent="SoundContinuous">
    <Sound value="KaelthasPhoenix_Loop" />
  </CActorSound>
  <CActorSound id="KaelthasPhoenixBirthSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Phoenix_Birth" />
  </CActorSound>
  <CActorSound id="KaelthasPhoenixBirthSkinSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Phoenix_Launch_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasPhoenixLaunchSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Phoenix_Launch" />
  </CActorSound>
  <CActorModel id="KaelthasPhoenixDeathFX" parent="StormModelAnimationStyleOneShotUnit">
    <Preload index="0" value="KaelthasPhoenixDeath" />
    <On Terms="Behavior.KaelthasPhoenixTimedLife.Off" Send="Create" />
    <On Terms="ActorCreation" Send="Create KaelthasPhoenixDeathSound" />
    <On Terms="ActorCreation" Send="$Death" />
    <HostSiteOps HoldPosition="1" HoldRotation="1" />
  </CActorModel>
  <CActorSound id="KaelthasPhoenixDeathSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Phoenix_End" />
    <SoundFlags index="UpdateVisibility" value="0" />
    <Layers Sound="Kaelthas_Phoenix_End_Skin" />
  </CActorSound>
  <CActorForceSphere id="KaelthasPyroblastImpactSphereTA">
    <On Terms="Effect.KaelthasPyroblastImpactSearch.Start; ValidatePlayer KaelthasHasPyroblastPresenceOfMind" Send="Create" />
    <HostSiteOps Ops="SOpTargetPoint" />
    <Duration value="0.150000" />
    <Magnitude value="80.000000" />
    <Radius value="4.500000" />
  </CActorForceSphere>
  <CActorForceSphere id="KaelthasPyroblastImpactSphere">
    <On Terms="Effect.KaelthasPyroblastImpactSearch.Start; ValidatePlayer KaelthasDoesNotHavePyroblastPresenceOfMind" Send="Create" />
    <HostSiteOps Ops="SOpTargetPoint" />
    <Duration value="0.150000" />
    <Magnitude value="80.000000" />
    <Radius value="3.000000" />
  </CActorForceSphere>
  <CActorRange id="KaelthasPyroblastRange" parent="StormRangeAbilPlusSplat" abil="KaelthasPyroblast" />
  <CActorSplat id="KaelthasPyroblastRangeSplat" parent="StormRangeSplat">
    <Scale value="16.500000" />
  </CActorSplat>
  <CActorRange id="KaelthasPyroblastRangeSlop">
    <Filter index="Ally" value="1" />
    <Filter index="Neutral" value="1" />
    <Filter index="Enemy" value="1" />
    <Range value="17.500000" />
    <Icon value="Assets\Textures\storm_towerradius.dds" />
    <Inherits index="TeamColor" value="1" />
    <IconArcLength value="5.000000" />
  </CActorRange>
  <CActorMissile id="KaelthasPyroblastAttackMissile" parent="StormMissileWithDeath" unitName="KaelthasPyroblastMissile">
    <On Terms="ActorCreation" Send="Create KaelthasPyroblastMissileSound" />
  </CActorMissile>
  <CActorAction id="KaelthasPyroblastAttack" parent="RangedHeroAttack" effectImpact="KaelthasPyroblastImpactSet" effectLaunch="KaelthasPyroblastLaunchMissile">
    <ImpactMap index="None" Model="KaelthasPyroblastImpact" Sound="Kaelthas_Pyroblast_Impact" />
    <LaunchAssets Sound="Kaelthas_Attack_Launch" />
    <ImpactSiteOps Ops="SOpAttachCenterSoft" />
    <ShieldFlashType value="None" />
    <ImpactPointSiteOps Ops="SOpTargetPointStationary SOpShadow SOpMoveUpBy2" />
    <ActionFlags index="ImpactForceSite" value="1" />
  </CActorAction>
  <CActorSound id="KaelthasPyroblastChannelSound" parent="SoundOneShot">
    <Sound value="Kaelthas_Pyroblast_Channel" />
    <Layers Sound="Kaelthas_Pyroblast_Channel_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasPyroblastMissileSound" parent="SoundContinuous">
    <Sound value="Kaelthas_Pyroblast_Missile" />
    <Host Subject="::Creator" />
  </CActorSound>
  <CActorSound id="KaelthasPyroblastImpactSkinSound" parent="SoundOneShot">
    <On Terms="Effect.KaelthasPyroblastImpactSearch.Start; At Effect" Send="Create" />
    <On Terms="Effect.KaelthasPyroblastSplashDamage.Start; At Target" Send="Create" />
    <Sound value="Kaelthas_Pyroblast_Impact_Skin" />
  </CActorSound>
  <CActorSound id="KaelthasDancePT1" parent="SoundOneShot">
    <Sound value="Kaelthas_Dance_PT1" />
  </CActorSound>
  <CActorSound id="KaelthasDancePT2" parent="SoundOneShot">
    <Sound value="Kaelthas_Dance_PT2" />
  </CActorSound>
  <CActorSound id="KaelthasDancePT3" parent="SoundOneShot">
    <Sound value="Kaelthas_Dance_PT3" />
  </CActorSound>
  <CActorModel id="KaelthasPyroblastCaster" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="Create" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop; ValidateUnit CasterIsDeadOrMovingOrSilencedOrStasisOrStunned" Send="AnimBracketStop BSD" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastCasterWeaponR" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="Create" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop; ValidateUnit CasterIsDeadOrMovingOrSilencedOrStasisOrStunned" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpAttachWeaponRight" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastCasterWeaponL" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Abil.KaelthasPyroblast.SourceCastStart" Send="Create" />
    <On Terms="Abil.KaelthasPyroblast.SourceCastStop; ValidateUnit CasterIsDeadOrMovingOrSilencedOrStasisOrStunned" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpAttachWeaponLeft" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastCastWarning" parent="StormModelAnimationStyleContinuousUnitNoPolymorph">
    <Model value="KaelthasPyroblastWarning" />
    <On Terms="Effect.KaelthasPyroblastApplyCastingReveal.Start; At Target" Send="Create" />
    <On Terms="Effect.KaelthasPyroblastLaunchMissile.Start" Send="TimerSet 0.062500 DestroyTimer" />
    <On Terms="Behavior.KaelthasPyroblastCastingReveal.Off" Send="Destroy Immediate" />
    <On Terms="TimerExpired; TimerName DestroyTimer" Send="Destroy Immediate" />
    <On Terms="ActorCreation" Send="TimerSet 0.062500 TeamColorTimer" />
    <On Terms="TimerExpired; TimerName TeamColorTimer" Send="RefSetFromRequest ::actor.TeamColorActor KaelthasPyroblastTeamColorActor Implicit Find" />
    <On Terms="TimerExpired; TimerName TeamColorTimer" Send="SetTeamColorFrom TeamColor ::actor.TeamColorActor ::Base 300.000000" />
    <On Terms="ActorCreation" Send="SetScale 0.010000" />
    <On Terms="ActorCreation; ValidatePlayer KaelthasDoesNotHavePyroblastPresenceOfMind" Send="SetScale 1.000000 1.500000" />
    <On Terms="ActorCreation; ValidatePlayer KaelthasHasPyroblastPresenceOfMind 1" Send="SetScale 1.430000 1.500000" />
    <On Terms="ActorDestruction" Target="::actor.TeamColorActor" Send="Destroy" />
    <On Terms="ActorCreation" Send="TimerSet 0.062500 CheckForRevealBehavior" />
    <On Terms="TimerExpired; TimerName CheckForRevealBehavior; ValidateUnit KaelthasPyroblastTargetDoesNotHaveRevealBehavior" Send="Destroy Immediate" />
    <HostSiteOps Ops="SOpBasicScopeFollow SOpShadow SOpPointSouthWorld" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastTeamColorActor">
    <On Terms="Effect.KaelthasPyroblastApplyCastingReveal.Start; At Effect" Send="Create" />
    <On Terms="Effect.KaelthasPyroblastLaunchMissile.Start; At Effect" Send="Create" />
    <Model value="Invisible" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastWarning" parent="StormModelAnimationStyleContinuousUnitNoPolymorph">
    <Inherits index="Visibility" value="0" />
    <On Terms="Effect.KaelthasPyroblastLaunchMissile.Start; At Target" Send="Create" />
    <On Terms="SupporterDestruction" Send="AnimBracketStop BSD" />
    <On Terms="ActorCreation" Send="AnimBracketStart BSD {} Stand Death" />
    <On Terms="ActorCreation" Send="SetVisibility" />
    <On Terms="ActorCreation" Send="TimerSet 0.062500 TeamColorTimer" />
    <On Terms="TimerExpired; TimerName TeamColorTimer" Send="RefSetFromRequest ::actor.TeamColorActor KaelthasPyroblastTeamColorActor Implicit Find" />
    <On Terms="TimerExpired; TimerName TeamColorTimer" Send="SetTeamColorFrom TeamColor ::actor.TeamColorActor ::Base 300.000000" />
    <On Terms="TimerExpired; TimerName TeamColorTimer" Send="SetVisibility 1" />
    <On Terms="ActorDestruction" Target="::actor.TeamColorActor" Send="Destroy" />
    <HostSiteOps Ops="SOpTargetUnit SOpShadow SOpPointSouthWorld" />
    <Supporter>
      <Subject value="KaelthasPyroblastAttackMissile" />
      <Scope value="Missile" />
      <Actor value="Find" />
      <Effect value="KaelthasPyroblastLaunchMissile" />
    </Supporter>
    <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastInitialImpact" parent="StormModelAnimationStyleOneShot">
    <On Terms="Effect.KaelthasPyroblastImpactSearch.Start; At Effect" Send="Create" />
    <Model value="KaelthasPyroblastImpactSplat" />
  </CActorModel>
  <CActorModel id="KaelthasPyroblastSecondaryImpact" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Effect.KaelthasPyroblastSplashDamage.Start; At Target" Send="Create" />
    <HostSiteOps Ops="SOpAttachCenter SOpForwardCasterPoint" />
    <Model value="KaelthasPyroblastImpact" />
  </CActorModel>
  <CActorUnit id="KaelthasEvocationItem" parent="StormItemBase" unitName="KaelthasEvocationItem" />
  <CActorModel id="KaelthasEvocation" parent="StormModelAddition">
    <On Terms="Behavior.KaelthasEvocationActive.On" Send="Create" />
    <On Terms="Behavior.KaelthasEvocationActive.Off" Send="AnimBracketStop BSD" />
    <HostSiteOps Ops="SOpAttachOriginSoft" />
  </CActorModel>
  <CActorSound id="KaelthasEvocationCastSound" parent="SoundOneShot">
    <On Terms="Behavior.KaelthasEvocationActive.On" Send="Create" />
    <Sound value="Kaelthas_Evocation_Cast" />
  </CActorSound>
  <CActorSound id="KaelthasEvocationEndSound" parent="SoundOneShot">
    <On Terms="Behavior.KaelthasEvocationActive.Off" Send="Create" />
    <Sound value="Kaelthas_Evocation_End" />
  </CActorSound>
  <CActorSound id="KaelthasEvocationLoopSound" parent="SoundContinuous">
    <On Terms="Behavior.KaelthasEvocationActive.On" Send="Create" />
    <On Terms="Behavior.KaelthasEvocationActive.Off" Send="Destroy" />
    <Sound value="Kaelthas_Evocation_Loop" />
  </CActorSound>
  <CActorModel id="KaelthasArcaneBarrierCast" parent="StormModelAnimationStyleOneShotUnit">
    <On Terms="Behavior.KaelthasArcaneBarrier.On" Send="Create" />
    <On Terms="ActorCreation" Send="Create KaelthasArcaneBarrierCastSound" />
    <HostSiteOps Ops="SOpAttachCenter" />
  </CActorModel>
  <CActorSound id="KaelthasArcaneBarrierCastSound" parent="SoundOneShot">
    <Sound value="Kaelthas_ArcaneBarrier_Cast" />
  </CActorSound>
  <CActorSiteOpLocalOffset id="SOpKaelthasFlamestrikeVerdantSphereImpact01">
    <LocalOffset Y="3.000000" />
  </CActorSiteOpLocalOffset>
  <CActorSiteOpLocalOffset id="SOpKaelthasFlamestrikeVerdantSphereImpact02">
    <LocalOffset X="-2.598076" Y="-1.500000" />
  </CActorSiteOpLocalOffset>
  <CActorSiteOpLocalOffset id="SOpKaelthasFlamestrikeVerdantSphereImpact03">
    <LocalOffset X="2.598076" Y="-1.500000" />
  </CActorSiteOpLocalOffset>
  <CActorSound id="PulledSoundHeroKaelthas" parent="SoundOneShot">
    <Sound value="KaelthasBase_VOX_Pulled" />
  </CActorSound>
  <CBehaviorBuff id="KaelthasVerdantSpheresSunfireEnchantmentAbilityPowerBuff">
    <Alignment value="Positive" />
    <InfoFlags index="Hidden" value="0" />
    <InfoFlags index="AlwaysUseGameText" value="1" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <Duration value="10" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.15" />
    </Modification>
    <SortIndex value="20" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasSunfireEnchantmentAbilityPowerBuffDummyBehavior">
    <InfoFlags index="Hidden" value="0" />
    <MaxStackCount value="2" />
  </CBehaviorBuff>
  <CBehaviorUnitTracker id="KaelthasPhoenixTrackingBehavior">
    <BehaviorFlags index="Permanent" value="1" />
    <BehaviorFlags index="EnabledWhileDead" value="1" />
    <MaxTrackedUnits value="1" />
    <UnitAddedAtMaxRule value="ReplaceOldest" />
  </CBehaviorUnitTracker>
  <CBehaviorBuff id="KaelthasGravityLapseRevealer" parent="StormReveal">
    <BehaviorCategories index="Reveal" value="0" />
    <RemoveValidatorArray value="KaelthasTargetHasGravityLapseCombine" />
    <Duration value="1.5" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasLivingBombSunKingsFuryTalentDebuff" />
  <CBehaviorBuff id="KaelthasArcaneBarrierUnlocked" parent="CarryBehaviorParent">
    <RemoveValidatorArray value="KalethasManaAddictTargetHasTalent" />
  </CBehaviorBuff>
  <CBehaviorAbility id="KaelthasArcaneBarrierAbility">
    <Buttons Face="KaelthasArcaneBarrier" Type="AbilCmd" AbilCmd="KaelthasArcaneBarrier,Execute" />
  </CBehaviorAbility>
  <CBehaviorBuff id="KaelthasManaAddictManaRegen" parent="CarryBehaviorParent">
    <Modification>
      <VitalMaxArray index="Energy" value="0">
        <AccumulatorArray value="KaelthasManaAddictAccumulator" />
      </VitalMaxArray>
    </Modification>
  </CBehaviorBuff>
  <CBehaviorTokenCounter id="KaelthasManaAddictQuestToken" parent="StormQuestToken">
    <Max value="65535" />
    <ConditionalEvents Compare="GE" CompareValue="20">
      <Event EventId="QuestComplete" Effect="KaelthasArcaneBarrierApplyUnlockingCarry" />
    </ConditionalEvents>
    <AtMaxEvents index="0" removed="1" />
    <Face value="KaelthasManaAddictQuest" />
    <SortIndex value="10" />
  </CBehaviorTokenCounter>
  <CBehaviorBuff id="KaelthasVerdantSpheresTwinSpheresApply">
    <Duration value="0.0625" />
    <FinalEffect value="KaelthasVerdantSpheresRefreshAllStack" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasMasterOfFlames12" parent="CarryBehaviorParent">
    <Alignment value="Positive" />
    <DisableValidatorArray value="TargetHasGTE40Energy" />
    <DisableValidatorArray value="TargetHasLT60Energy" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.12" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasMasterOfFlames8" parent="CarryBehaviorParent">
    <Alignment value="Positive" />
    <DisableValidatorArray value="TargetHasGTE20Energy" />
    <DisableValidatorArray value="TargetHasLT40Energy" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.08" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasMasterOfFlames20" parent="CarryBehaviorParent">
    <Alignment value="Positive" />
    <DisableValidatorArray value="TargetHasGTE80Energy" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.2" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasMasterOfFlames16" parent="CarryBehaviorParent">
    <Alignment value="Positive" />
    <DisableValidatorArray value="TargetHasGTE60Energy" />
    <DisableValidatorArray value="TargetHasLT80Energy" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.16" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasMasterOfFlames4" parent="CarryBehaviorParent">
    <Alignment value="Positive" />
    <DisableValidatorArray value="TargetHasLT20Energy" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.04" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasVerdantSpheresMasterOfFlame" />
  <CBehaviorBuff id="KaelthasFelInfusion">
    <Alignment value="Positive" />
    <BehaviorFlags index="Permanent" value="1" />
    <BehaviorFlags index="EnabledWhileDead" value="1" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.04" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasArcaneBarrier" parent="StormShield">
    <Duration value="4" />
    <DamageResponse>
      <ModifyLimitVitalMaxFractionArray index="Energy" value="1" />
    </DamageResponse>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasEvocationActive">
    <Alignment value="Positive" />
    <BehaviorCategories index="Restorable" value="1" />
    <RemoveValidatorArray value="CasterNotDeadOrSilencedOrStasisOrStunned" />
    <Duration value="5" />
    <Period value="0.5" />
    <InitialEffect value="KaelthasEvocationCreateHealer" />
    <PeriodicEffect value="KaelthasEvocationCreateHealer" />
    <PeriodicDisplayEffect value="KaelthasEvocationCreateHealer" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasFlamestrikeCombustionTarget" parent="StormStun">
    <Duration value="0.5" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseVerdantSphereTargetLift">
    <Duration value="1.375" />
    <Modification>
      <Height value="2" />
      <HeightTime index="Start" value="0.15" />
      <HeightTime index="Stop" value="0.15" />
    </Modification>
    <RemoveValidatorArray value="KaelthasTargetHasGravityLapseV" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseTarget" parent="StormStun">
    <Duration value="1" />
    <Modification>
      <BehaviorLinkDisableArray value="ShrubStatusController" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseTargetLift">
    <Duration value="0.875" />
    <Modification>
      <Height value="2" />
      <HeightTime index="Start" value="0.15" />
      <HeightTime index="Stop" value="0.15" />
    </Modification>
    <RemoveValidatorArray value="KaelthasTargetHasGravityLapse" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseTargetV" parent="StormStun">
    <Duration value="1.5" />
    <Modification>
      <BehaviorLinkDisableArray value="ShrubStatusController" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseTargetsHit">
    <MaxStackCount value="3" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasGravityLapseVerdantSphereDummyBehavior" />
  <CBehaviorBuff id="KaelthasLivingBombBackdraft" parent="StormSlowParent">
    <Duration value="2" />
    <Modification>
      <UnifiedMoveSpeedFactor value="-0.3" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasLivingBombChainBombTarget" parent="StormDot">
    <DisplayDuration index="Self" value="1" />
    <DisplayDuration index="Ally" value="1" />
    <DisplayDuration index="Neutral" value="1" />
    <DisplayDuration index="Enemy" value="1" />
    <RemoveValidatorArray value="TargetIsHero" />
    <Duration value="3" />
    <Period value="1" />
    <PeriodCount value="2" />
    <InitialEffect value="KaelthasLivingBombImpactSet" />
    <PeriodicEffect value="KaelthasLivingBombTicSet" />
    <PeriodicDisplayEffect value="KaelthasLivingBombDoTDamage" />
    <FinalEffect value="KaelthasLivingBombChainBombFinalSetSourceExtendedDeath" />
    <ExpireEffect value="KaelthasLivingBombChainBombFinalSetSource" />
    <DamageResponse Chance="1" Handled="KaelthasLivingBombChainBombFinalSetSourceCP" Fatal="1">
      <ExcludeEffectArray value="TimedLifeFate" />
      <ValidatorArray value="SourceDoesNotHaveLivingBombSourceExploded" />
      <ProvideCategories index="Proc" value="1" />
    </DamageResponse>
    <FinalDisplayEffect value="KaelthasLivingBombExplosionDamage" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasLivingBombFinalSetSourceExploded">
    <BehaviorFlags index="Permanent" value="1" />
    <BehaviorFlags index="EnabledWhileDead" value="1" />
    <Duration value="0.125" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasLivingBombFissionBombProc" parent="CarryBehaviorParent">
    <Duration value="0.125" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasLivingBombTarget" parent="StormDot">
    <Duration value="3" />
    <DisplayDuration index="Self" value="1" />
    <DisplayDuration index="Ally" value="1" />
    <DisplayDuration index="Neutral" value="1" />
    <DisplayDuration index="Enemy" value="1" />
    <Period value="1" />
    <PeriodCount value="2" />
    <InitialEffect value="KaelthasLivingBombImpactSet" />
    <PeriodicEffect value="KaelthasLivingBombTicSet" />
    <PeriodicDisplayEffect value="KaelthasLivingBombDoTDamage" />
    <FinalEffect value="KaelthasLivingBombFinalSetSourceExtendedDeath" />
    <ExpireEffect value="KaelthasLivingBombFinalSetSource" />
    <DamageResponse Chance="1" Handled="KaelthasLivingBombFatalSetSource" Fatal="1">
      <ExcludeEffectArray value="TimedLifeFate" />
      <ValidatorArray value="SourceDoesNotHaveLivingBombSourceExploded" />
    </DamageResponse>
    <FinalDisplayEffect value="KaelthasLivingBombExplosionDamage" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasFlamestrikeBurnedFleshHeroHitCounter">
    <BehaviorFlags index="Permanent" value="1" />
    <BehaviorFlags index="EnabledWhileDead" value="1" />
    <MaxStackCount value="2" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixActive">
    <BehaviorFlags index="Permanent" value="1" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <RemoveValidatorArray value="SourceNotDead" />
    <InitialEffect value="KaelthasPhoenixOffsetPersistent" />
    <FinalEffect value="KaelthasPhoenixApplyInactiveBehavior" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixArcanePowerBuff">
    <Alignment value="Positive" />
    <InfoIcon value="Assets\Textures\storm_btn_d3_wizard_archon.dds" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.15" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixDelay">
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <Duration value="15" />
    <FinalEffect value="KaelthasPhoenixApplyActiveBehavior" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixInactive">
    <BehaviorFlags index="Permanent" value="1" />
    <BehaviorFlags index="EnabledWhileDead" value="1" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <RemoveValidatorArray value="KaelthasNoPhoenixActive" />
    <RemoveValidatorArray value="CasterIsDead" />
    <FinalEffect value="KaelthasPhoenixApplyActiveBehavior" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixInitialDistanceCheck">
    <RemoveValidatorArray value="KaelthasPhoenixInitialDistanceCheck" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixManaWyrmStack">
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <MaxStackCount value="20" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.05" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixMovementSuppression">
    <Alignment value="Negative" />
    <Modification>
      <StateFlags index="OrdersPaused" value="1" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixRetargetDistanceCheck">
    <RemoveValidatorArray value="KaelthasPhoenixRetargetDistanceCheck" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixRetargetReady">
    <Duration value="14" />
    <DisableValidatorArray value="CasterNotDeadOrPolymorphedOrSilencedOrStasisOrStunned" />
    <FinalEffect value="KaelthasPhoenixRetargetRemoveReadyBehavior" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPhoenixTimedLife" parent="StormTimedLife">
    <Duration value="7" />
    <Period value="0.5" />
    <InitialEffect value="KaelthasPhoenixAttackTargetSearch" />
    <PeriodicEffect value="KaelthasPhoenixAttackTargetSearch" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPyroblastCastingReveal" parent="StormReveal">
    <RemoveValidatorArray value="KaelthasIsCastingPyroblast" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasPyroblastMissileReveal" parent="StormReveal">
    <RemoveValidatorArray value="TargetNotDead" />
    <RemoveValidatorArray value="TargetNotSpecialDeathState" />
    <RemoveValidatorArray value="KaelthasPyroblastMissileExists" />
    <RemoveValidatorArray value="KaelthasPyroblastMissileHasNotDodged" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasVerdantSphereGenerator">
    <BehaviorFlags index="Permanent" value="1" />
    <DisableValidatorArray value="KaelthasVerdantSpheresCombine" />
    <Period value="2" />
    <PeriodicEffect value="KaelthasVerdantSpheresGainSet" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasVerdantSpheres">
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <BuffFlags index="RefreshStack" value="1" />
    <MaxStackCount value="6" />
    <InitialEffect value="KaelthasVerdantSphereInitialDummy" />
    <RefreshEffect value="KaelthasVerdantSpheresRefreshDummy" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasVerdantSpheresActive">
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <FinalEffect value="KaelthasVerdantSpheresDeactivateSet" />
  </CBehaviorBuff>
  <CBehaviorBuff id="KaelthasVerdantSpheresSunfireEnchantmentBuff">
    <Alignment value="Positive" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <RemoveValidatorArray value="SourceNotDead" />
    <MaxStackCount value="2" />
  </CBehaviorBuff>
  <CBehaviorBuff id="ManaWyrmKaelthasStackBuff">
    <Alignment value="Positive" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <MaxStackCount value="20" />
  </CBehaviorBuff>
  <CBehaviorBuff id="ManaWyrmPhoenixStackBuff">
    <Alignment value="Positive" />
    <InfoIcon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
    <MaxStackCount value="20" />
    <Modification>
      <DamageDealtFraction index="Ability" value="0.05" />
    </Modification>
  </CBehaviorBuff>
  <CBehaviorTokenCounter id="KaelthasFlamestrikeConvectionQuestToken" parent="StormQuestToken">
    <AtMaxEvents index="0" EventId="QuestComplete" Effect="KaelthasFlamestrikeConvectionTalentCompletionModifyPlayer" />
    <Max value="20" />
    <SortIndex value="10" />
  </CBehaviorTokenCounter>
  <CButton id="KaelthasLivingBombIgnite" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasFlamestrikeConvectionQuestToken" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasLivingBombSunKingsFury" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasBurnedFleshTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasMasterOfFlamesLivingBomb">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
    <SimpleDisplayText value="Button/SimpleDisplayText/KaelthasVerdantSpheresMasterOfFlameTalent" />
  </CButton>
  <CButton id="KaelthasVerdantSpheresTwinSpheresTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <HotkeyAlias value="KaelthasVerdantSpheresFelInfusionTalent" />
  </CButton>
  <CButton id="KaelthasMakethemPayLivingBomb" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasArcaneBarrier" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasManaAddictDoesNotHaveArcaneBarrierUnlocked" Text="Button/TooltipAppender/GenericLockedUntilQuestComplete" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_arcanebarrier.dds" />
  </CButton>
  <CButton id="KaelthasFlamestrike" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasHasFlamestrikeConvection" Face="KaelthasFlamestrikeConvectionTalent" />
    <TooltipAppender Validator="KaelthasHasBurnedFleshTalent" Face="KaelthasBurnedFleshTalent" />
    <TooltipAppender Validator="KaelthasHasFlamestrikeFuryOfTheSunwell" Face="KaelthasFlamestrikeFuryOfTheSunwellTalent" />
    <TooltipAppender Validator="KaelthasHasFlamethrower" Face="KaelthasFlamethrowerTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasFlamestrikeConvectionTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasFlamestrikeFuryOfTheSunwellTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasManaTapTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
  </CButton>
  <CButton id="KaelthasFlamethrowerTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_flamestrike.dds" />
  </CButton>
  <CButton id="KaelthasGravityLapse" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasHasGravityLapseNetherWind" Face="KaelthasGravityLapseNetherWindTalent" />
    <TooltipAppender Validator="KaelthasHasGravityLapseEnergyRoil" Face="KaelthasGravityLapseEnergyRoilTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_gravitylapse.dds" />
  </CButton>
  <CButton id="KaelthasGravityLapseEnergyRoilTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_gravitylapse_a.dds" />
  </CButton>
  <CButton id="KaelthasGravityLapseGravityThrowTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_gravitylapse.dds" />
  </CButton>
  <CButton id="KaelthasGravityLapseNetherWindTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_gravitylapse.dds" />
  </CButton>
  <CButton id="KaelthasGravityLapseTriOptimalTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_gravitylapse.dds" />
  </CButton>
  <CButton id="KaelthasLivingBomb" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasHasLivingBombSunKingsFury" Face="KaelthasLivingBombSunKingsFury" />
    <TooltipAppender Validator="KaelthasHasLivingBombPyromaniac" Face="KaelthasLivingBombPyromaniacTalent" />
    <TooltipAppender Validator="KaelthasHasLivingBombBackdraft" Face="KaelthasLivingBombBackdraftTalent" />
    <TooltipAppender Validator="KaelthasHasLivingBombFissionBomb" Face="KaelthasLivingBombFissionBombTalent" />
    <TooltipAppender Validator="KaelthasHasLivingBombIgniteTalent" Face="KaelthasLivingBombIgnite" />
    <TooltipAppender Validator="KaelthasHasMasterOfFlamesTalent" Face="KaelthasMasterOfFlamesLivingBomb" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasLivingBombBackdraftTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb_var1.dds" />
  </CButton>
  <CButton id="KaelthasLivingBombChainBombTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasLivingBombFissionBombTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb_b.dds" />
  </CButton>
  <CButton id="KaelthasLivingBombPyromaniacTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_livingbomb.dds" />
  </CButton>
  <CButton id="KaelthasManaAddictTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_manaaddict.dds" />
  </CButton>
  <CButton id="KaelthasManaAddictQuest" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_manaaddict.dds" />
  </CButton>
  <CButton id="KaelthasPhoenix" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasHasPhoenixRebirth" Face="KaelthasPhoenixRebirthTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
  </CButton>
  <CButton id="KaelthasPhoenixRebirthTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix.dds" />
  </CButton>
  <CButton id="KaelthasPhoenixRetarget" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_phoenix_retarget.dds" />
    <HotkeyAlias value="KaelthasPhoenix" />
  </CButton>
  <CButton id="KaelthasPyroblast" parent="StormButtonParent">
    <TooltipAppender Validator="KaelthasHasPyroblastPresenceOfMind" Face="KaelthasPyroblastPresenceOfMindTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_pyroblast.dds" />
  </CButton>
  <CButton id="KaelthasPyroblastPresenceOfMindTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_pyroblast.dds" />
  </CButton>
  <CButton id="KaelthasSunfireEnchantmentTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
  </CButton>
  <CButton id="KaelthasVerdantSpheres" parent="StormButtonParentTrait">
    <TooltipAppender Validator="KaelthasHasVerdantSpheresFelInfusion" Face="KaelthasVerdantSpheresFelInfusionTalent" />
    <TooltipAppender Validator="KaelthasHasFlamestrikeManaTap" Face="KaelthasManaTapTalent" />
    <TooltipAppender Validator="KaelthasHasSunfireEnchantment" Face="KaelthasSunfireEnchantmentTalent" />
    <TooltipAppender Validator="KaelthasHasTwinSpheresTalent" Face="KaelthasVerdantSpheresTwinSpheresTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
    <TooltipCooldownOverrideText value="VerdantSpheresCooldown" />
  </CButton>
  <CButton id="KaelthasVerdantSpheresActive" parent="StormButtonParentTrait">
    <TooltipAppender Validator="KaelthasHasVerdantSpheresFelInfusion" Face="KaelthasVerdantSpheresFelInfusionTalent" />
    <TooltipAppender Validator="KaelthasHasFlamestrikeManaTap" Face="KaelthasManaTapTalent" />
    <TooltipAppender Validator="KaelthasHasSunfireEnchantment" Face="KaelthasSunfireEnchantmentTalent" />
    <TooltipAppender Validator="KaelthasHasTwinSpheresTalent" Face="KaelthasVerdantSpheresTwinSpheresTalent" />
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_VerdantSpheres_2.dds" />
  </CButton>
  <CButton id="KaelthasVerdantSpheresDeactivate" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_temp_btn-command-cancel.dds" />
  </CButton>
  <CButton id="KaelthasVerdantSpheresFelInfusionTalent" parent="StormButtonParent">
    <Icon value="Assets\Textures\storm_ui_icon_kaelthas_verdantspheres.dds" />
  </CButton>
  <CCharacter id="Kaelthas">
    <Race value="Unknown" />
    <Voice value="ATT Mike" />
    <Variations Model="KaelthasPortrait" Actor="KaelthasPortrait" />
    <Unit value="HeroKaelthas" />
  </CCharacter>
  <CEffectSet id="KaelthasLivingBombImpactSet">
    <EffectArray value="KaelthasLivingBombImpactDamage" />
    <EffectArray value="KaelthasLivingBombPyromaniacModifyCooldowns" />
  </CEffectSet>
  <CEffectSet id="KaelthasPresenceofMindCooldownReductionLivingBombSet">
    <ValidatorArray value="TargetDoesNotAnyLivingBombVariation" />
    <ValidatorArray value="KaelthasHasPyroblastPresenceOfMind" />
    <EffectArray value="KaelthasPyroblastPresenceOfMindModifyCooldowns" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasFlamestrikeIgniteSearchArea">
    <ValidatorArray value="KaelthasHasLivingBombIgniteTalent" />
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="Heroic;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <TargetSorts RequestCount="1">
      <SortArray value="KaelthasLivingBombTargetDoesNotHaveBehavior" />
      <SortArray value="KaelthasLivingChainBombTargetDoesNotHaveBehavior" />
      <SortArray value="TSDistanceToTarget" />
    </TargetSorts>
    <AreaArray MaxCount="1" Effect="KaelthasFlamestrikeCastsLivingBombIgniteSet">
      <Radius value="2" />
    </AreaArray>
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasFlamestrikeVerdantSpheresIgniteSearchAreaUnnamed">
    <ValidatorArray value="KaelthasHasLivingBombIgniteTalent" />
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="Heroic;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <TargetSorts RequestCount="1">
      <SortArray value="KaelthasLivingBombTargetDoesNotHaveBehavior" />
      <SortArray value="KaelthasLivingChainBombTargetDoesNotHaveBehavior" />
      <SortArray value="TSDistanceToTarget" />
    </TargetSorts>
    <AreaArray MaxCount="1" Effect="KaelthasFlamestrikeCastsLivingBombIgniteSet">
      <Radius value="3" />
    </AreaArray>
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectSet id="KaelthasFlamestrikeCastsLivingBombIgniteSet">
    <EffectArray value="KaelthasLivingBombApplyTargetBehavior" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasVerdantSpheresSunfireEnchantmentAbilityPowerBuffApplyBehavior">
    <ValidatorArray index="0" value="KaelthasHasSunfireEnchantment" />
    <ValidatorArray value="KaelthasHas2StacksofAbilityPowerBuffBehaviorandTargetisHeroSunfireEnchantment" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresSunfireEnchantmentAbilityPowerBuff" />
  </CEffectApplyBehavior>
  <CEffectRemoveBehavior id="KaelthasRemoveAbilityPowerBuffDummyBehaviorSunfireEnchantment">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasSunfireEnchantmentAbilityPowerBuffDummyBehavior" />
    <Count value="2" />
  </CEffectRemoveBehavior>
  <CEffectApplyBehavior id="KaelthasSunfireEnchantmentApplyAbilityPowerBuffDummyBehavior">
    <ValidatorArray value="CasterNotBlindedAndTargetNotEvading" />
    <ValidatorArray value="TargetIsHero" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasSunfireEnchantmentAbilityPowerBuffDummyBehavior" />
  </CEffectApplyBehavior>
  <CEffectAddTrackedUnit id="KaelthasPhoenixAddToTrackingList">
    <BehaviorLink value="KaelthasPhoenixTrackingBehavior" />
    <TrackedUnit Value="Target" />
  </CEffectAddTrackedUnit>
  <CEffectEnumTrackedUnits id="KaelthasPhoenixRebirthRetargetPhoenixEnumerateTrackingList">
    <BehaviorLink value="KaelthasPhoenixTrackingBehavior" />
    <Effect value="KaelthasPhoenixRedirectLaunchMissileSet" />
  </CEffectEnumTrackedUnits>
  <CEffectSwitch id="KaelthasPyroblastImpactSwitch">
    <CaseArray Validator="TargetIsHero" Effect="KaelthasPyroblastImpactSet" />
    <CaseDefault value="KaelthasPyroblastPointImpactSet" />
  </CEffectSwitch>
  <CEffectSet id="KaelthasPyroblastPointImpactSet">
    <EffectArray value="KaelthasPyroblastPresenceOfMindCooldownSearch" />
    <EffectArray value="KaelthasPyroblastImpactSearch" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyRevealer">
    <Behavior value="KaelthasGravityLapseRevealer" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasLivingBombApplySunKingsFuryTalentDebuff">
    <ValidatorArray value="KaelthasHasLivingBombSunKingsFury" />
    <ValidatorArray value="TargetDoesNotAnyLivingBombVariation" />
    <Behavior value="KaelthasLivingBombSunKingsFuryTalentDebuff" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasLivingBombChainBombDelayPersistentSet">
    <EffectArray value="KaelthasLivingBombApplySunKingsFuryTalentDebuff" />
    <EffectArray value="KaelthasPresenceofMindCooldownReductionLivingBombSet" />
    <EffectArray value="KaelthasLivingBombChainBombApplyTargetBehavior" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasFlamestrikeVerdantSpheresFlamethrowerTalentSearch">
    <ValidatorArray value="KaelthasHasFlamethrower" />
    <SearchFilters value="Heroic;Self,Player,Ally,ImmuneToAOE,Structure,Missile,Stasis,Dead,Invulnerable" />
    <AreaArray MaxCount="1" Effect="KaelthasFlamestrikeFlamethrowerTalentModifyCooldown">
      <Radius value="3" />
    </AreaArray>
    <MinCount value="2" />
  </CEffectEnumArea>
  <CEffectModifyUnit id="KaelthasFlamestrikeFlamethrowerTalentModifyCooldown">
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasFlamestrike,Execute" CooldownOperation="Add" CooldownTimeUse="-4" />
  </CEffectModifyUnit>
  <CEffectEnumArea id="KaelthasFlamestrikeFlamethrowerTalentSearch">
    <SearchFilters value="Heroic;Self,Player,Ally,ImmuneToAOE,Structure,Missile,Stasis,Dead,Invulnerable" />
    <AreaArray MaxCount="1" Effect="KaelthasFlamestrikeFlamethrowerTalentModifyCooldown">
      <Radius value="2" />
    </AreaArray>
    <MinCount value="2" />
    <ValidatorArray value="KaelthasHasFlamethrower" />
  </CEffectEnumArea>
  <CEffectModifyTokenCount id="KaelthasManaAddictQuestIncrement" parent="BaseEffectModifyTokenCount">
    <WhichUnit Value="Target" />
    <TokenId value="KaelthasManaAddictQuestToken" />
    <ValidatorArray value="KalethasManaAddictTargetHasTalent" />
    <EffectCategory index="Quest" value="1" />
  </CEffectModifyTokenCount>
  <CEffectSet id="RegenGlobeImpactSet">
    <EffectArray value="KaelthasManaAddictQuestIncrement" />
  </CEffectSet>
  <CEffectModifyTokenCount id="KaelthasFlamestrikeConvectionResetQuestToken">
    <ValidatorArray value="KaelthasFlamestrikeConvectionCasterHasLessThanMaxStacks" />
    <Chance value="0" />
    <TokenId value="KaelthasFlamestrikeConvectionQuestToken" />
    <Operation value="Set" />
  </CEffectModifyTokenCount>
  <CEffectModifyTokenCount id="KaelthasFlamestrikeConvectionModifyQuestToken" parent="BaseEffectModifyTokenCount">
    <ValidatorArray value="TargetIsHero" />
    <EffectCategory index="Quest" value="1" />
    <Chance value="0" />
    <CollationId value="" />
    <ContextUnit Value="Caster" />
    <TokenId value="KaelthasFlamestrikeConvectionQuestToken" />
  </CEffectModifyTokenCount>
  <CEffectApplyBehavior id="KaelthasPhoenixApplyRebirthTalentRetargetReadyBehaviorSource">
    <Chance value="0" />
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasPhoenixRetargetReady" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasLivingBombPrepSet">
    <EffectArray value="DismountDecloakCasterSet" />
    <EffectArray value="KaelthasVerdantSpheresActivateLivingBombModifyPlayerCast" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasPhoenixFelInfusionApplyBehavior">
    <ValidatorArray index="0" value="KaelthasHasVerdantSpheresFelInfusion" />
    <Behavior value="KaelthasFelInfusion" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasVerdantSpheresRefreshAllStack">
    <Behavior value="KaelthasVerdantSpheres" />
    <Count value="3" />
  </CEffectApplyBehavior>
  <CEffectRemoveBehavior id="KaelthasFlamestrikeBurnedFleshRemoveHeroHitCounter">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasFlamestrikeBurnedFleshHeroHitCounter" />
    <Count value="2" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelThasLivingBombMasterOfFlameApplyChainBombTarget">
    <ValidatorArray value="TargetDoesNotHaveLivingBombSourceExploded" />
    <Chance value="0" />
    <EffectArray value="KaelthasLivingBombChainBombApplyTargetBehaviorDelayPersistent" />
  </CEffectSet>
  <CEffectDamage id="KaelthasFlamestrikeBurnedFleshTalentDamage" parent="StormSpellPercentDamage">
    <ValidatorArray value="KaelthasHasBurnedFleshTalent" />
    <ValidatorArray value="TargetIsHero" />
    <VitalFractionMax index="Life" value="0.08" />
  </CEffectDamage>
  <CEffectRemoveBehavior id="KaelthasFlamestrikeRemoveMasterofFlameBehavior">
    <BehaviorLink value="KaelthasVerdantSpheresMasterOfFlame" />
    <WhichUnit Value="Caster" />
  </CEffectRemoveBehavior>
  <CEffectApplyBehavior id="KaelthasVerdantSpheresApplyMasterOfFlamesBehavior">
    <Behavior value="KaelthasVerdantSpheresMasterOfFlame" />
  </CEffectApplyBehavior>
  <CEffectModifyPlayer id="KaelthasFlamestrikeConvectionTalentCompletionModifyPlayer">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Accumulator,KaelthasFlamestrikeConvectionAccumulator,Scale" Value="10" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasFlamestrikeConvectionResetQuestToken,Chance" Value="0" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasFlamestrikeConvectionModifyQuestToken,Chance" Value="0" />
  </CEffectModifyPlayer>
  <CEffectSet id="KaelthasVerdantSpheresCooldownEndSet">
    <EffectArray value="KaelthasVerdantSpheresChargeRefund" />
    <EffectArray value="KaelthasVerdantSpheresApplyCooldownBehaviorSecondCharge" />
    <EffectArray value="KaelthasVerdantSpheresTwinSpheresRemoveNeedsCharge" />
  </CEffectSet>
  <CEffectModifyUnit id="KaelthasVerdantSpheresChargeRefund">
    <ValidatorArray value="TargetIsHero" />
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasVerdantSpheres,Execute" ChargeCountUse="-1" CooldownOperation="Add" />
  </CEffectModifyUnit>
  <CEffectModifyUnit id="KaelthasVerdantSpheresConsumeCharge">
    <ImpactUnit Value="Caster" />
    <Cost>
      <Abil value="KaelthasVerdantSpheres,Execute" />
      <ChargeCountUse value="1" />
      <ChargeTimeUse value="6" />
      <CooldownOperation value="Add" />
      <CooldownTimeUse value="6" />
    </Cost>
  </CEffectModifyUnit>
  <CEffectApplyBehavior id="KaelthasFlamestrikeStackApplyBehavior" />
  <CEffectLaunchMissile id="KalethasLivingBombVerdantSphereLaunchMissile1">
    <ImpactEffect value="KaelthasLivingBombVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasLivingBombVerdantSpheresMissile" />
    <Movers Link="KaelthasLivingBombVerdantSpheresMissileUp" />
    <ImpactLocation Effect="KaelthasLivingBombCastSet" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KalethasLivingBombVerdantSphereLaunchMissile2">
    <ImpactEffect value="KaelthasLivingBombVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasLivingBombVerdantSpheresMissile" />
    <Movers Link="KaelthasLivingBombVerdantSpheresMissileLeft" />
    <ImpactLocation Effect="KaelthasLivingBombCastSet" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KalethasLivingBombVerdantSphereLaunchMissile3">
    <ImpactEffect value="KaelthasLivingBombVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasLivingBombVerdantSpheresMissile" />
    <Movers Link="KaelthasLivingBombVerdantSpheresMissileRight" />
    <ImpactLocation Effect="KaelthasLivingBombCastSet" />
  </CEffectLaunchMissile>
  <CEffectRemoveBehavior id="VerdantSpheresRemoveSunfireEnchantmentMasteryBuff">
    <Chance value="0" />
    <BehaviorLink value="KaelthasVerdantSpheresSunfireEnchantmentBuff" />
    <WhichUnit Value="Caster" />
    <Count value="1" />
  </CEffectRemoveBehavior>
  <CEffectApplyBehavior id="KaelthasApplyPhoenixInitialDistanceCheckBehavior">
    <Behavior value="KaelthasPhoenixInitialDistanceCheck" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasApplyPhoenixRetargetDistanceCheckBehavior">
    <Behavior value="KaelthasPhoenixRetargetDistanceCheck" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasArcaneBarrierApplyUnlockingCarry">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasArcaneBarrierUnlocked" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasArcaneBarrierApplyBehavior">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasArcaneBarrier" />
    <ValidatorArray value="KaelthasManaAddictHasArcaneBarrierUnlocked" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasEvocationApplyActiveBehavior">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasEvocationActive" />
  </CEffectApplyBehavior>
  <CEffectCreateHealer id="KaelthasEvocationCreateHealer" parent="StormSelfOnlyHealingSpellPercent">
    <ImpactUnit Value="Caster" />
    <RechargeVital value="Energy" />
    <RechargeVitalFraction value="0.0468" />
  </CEffectCreateHealer>
  <CEffectCreatePersistent id="KaelthasEvocationCreatePersistent">
    <ValidatorArray value="CasterEnergyNotFullAndIsManaUser" />
    <ValidatorArray value="CasterNotDeadOrSilencedOrStasisOrStunned" />
    <WhichLocation Value="CasterUnit" />
    <Flags index="Channeled" value="1" />
    <InitialEffect value="KaelthasEvocationApplyActiveBehavior" />
    <ExpireDelay value="5" />
    <FinalEffect value="KaelthasEvocationRemoveActiveBehavior" />
  </CEffectCreatePersistent>
  <CEffectRemoveBehavior id="KaelthasEvocationRemoveActiveBehavior">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasEvocationActive" />
    <Count value="1" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelthasFlamestrikeBurnNoticeImpactSet">
    <Chance value="0" />
    <EffectArray value="KaelthasLivingBombApplyTargetBehavior" />
  </CEffectSet>
  <CEffectSwitch id="KaelthasFlamestrikeCastSwitch">
    <CaseArray Validator="KaelthasCasterVerdantSpheresActive" Effect="KaelthasFlamestrikeVerdantSpheresCreatePersistent" />
    <CaseDefault value="KaelthasFlamestrikeCreatePersistent" />
    <TargetLocationType value="Point" />
  </CEffectSwitch>
  <CEffectApplyBehavior id="KaelthasFlamestrikeCombustionApplyBehavior">
    <ValidatorArray value="KaelthasTargetHasLivingBombOrChainBomb" />
    <Chance value="0" />
    <Behavior value="KaelthasFlamestrikeCombustionTarget" />
  </CEffectApplyBehavior>
  <CEffectCreatePersistent id="KaelthasFlamestrikeCreatePersistent">
    <ExpireDelay value="0.5" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasFlamestrikeSearchSet" />
    <PeriodicPeriodArray value="1" />
    <RevealRadius value="2" />
    <RevealFlags index="Unfog" value="1" />
    <AINotifySettings AreaEffect="KaelthasFlamestrikeSearchArea">
      <Flags index="HurtsEnemy" value="1" />
    </AINotifySettings>
  </CEffectCreatePersistent>
  <CEffectDamage id="KaelthasFlamestrikeDamage" parent="StormSpell">
    <FlatModifierArray index="KaelthasFlamestrikeConvection" Accumulator="KaelthasFlamestrikeConvectionAccumulator" />
    <Amount value="345" />
    <CritValidatorArray index="0" removed="1" />
  </CEffectDamage>
  <CEffectEnumArea id="KaelthasFlamestrikeDummySearchArea">
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="Visible;Player,Ally,Stasis" />
    <AreaArray>
      <Radius value="2" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectCreatePersistent id="KaelthasFlamestrikeFuryOfTheSunwellCreatePersistent">
    <Chance value="0" />
    <ExpireDelay value="0.5" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasFlamestrikeSearchAreaSet" />
    <PeriodicPeriodArray value="1" />
    <RevealRadius value="2" />
    <RevealFlags index="Unfog" value="1" />
    <AINotifySettings AreaEffect="KaelthasFlamestrikeSearchArea">
      <Flags index="HurtsEnemy" value="1" />
    </AINotifySettings>
  </CEffectCreatePersistent>
  <CEffectCreatePersistent id="KaelthasFlamestrikeFuryOfTheSunwellVerdantSpheresCreatePersistent">
    <Chance value="0" />
    <ExpireDelay value="0.5" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasFlamestrikeVerdantSpheresSearchAreaWithBurnedFleshSet" />
    <PeriodicPeriodArray value="1" />
    <RevealRadius value="3.5" />
    <RevealFlags index="Unfog" value="1" />
    <AINotifySettings AreaEffect="KaelthasFlamestrikeVerdantSpheresSearchArea">
      <Flags index="HurtsEnemy" value="1" />
    </AINotifySettings>
  </CEffectCreatePersistent>
  <CEffectCreatePersistent id="KaelthasFlamestrikeFuryoftheSunwellDelayPersistent">
    <InitialDelay value="0.5" />
    <InitialEffect value="KaelthasFlamestrikeFuryOfTheSunwellCreatePersistent" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasFlamestrikeImpactSet">
    <EffectArray value="KaelthasFlamestrikeDamage" />
    <EffectArray value="ApplyAbilityImpactReveal" />
    <EffectArray value="KaelthasFlamestrikeConvectionModifyQuestToken" />
    <EffectArray value="KaelthasFlamestrikeBurnedFleshAddHeroHitCounter" />
    <EffectArray value="KaelthasPyroblastPresenceOfMindModifyCooldowns" />
  </CEffectSet>
  <CEffectSet id="KaelthasFlamestrikeInitialSet">
    <EffectArray value="KaelthasFlamestrikeCastSwitch" />
    <EffectArray value="KaelthasModifyWeapon" />
    <EffectArray value="KaelthasArcaneDynamoApplyStack" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectCreateHealer id="KaelthasManaTapManaGain" parent="StormManaRestore">
    <ImpactUnit Value="Caster" />
    <Chance value="0" />
    <RechargeVitalFraction value="0.039" />
  </CEffectCreateHealer>
  <CEffectEnumArea id="KaelthasFlamestrikeSearchArea">
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AreaArray Effect="KaelthasFlamestrikeImpactSet">
      <Radius value="2" />
    </AreaArray>
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasFlamestrikeSearchAreaBurnedFlesh">
    <ValidatorArray value="KaelThasFlamestrikeBurnedFleshCasterhasTwostackofHeroHitCounter" />
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AreaArray Effect="KaelthasFlamestrikeBurnedFleshTalentDamage">
      <Radius value="2" />
    </AreaArray>
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectSet id="KaelthasFlamestrikeSearchAreaSet">
    <EffectArray value="KaelthasFlamestrikeFlamethrowerTalentSearch" />
    <EffectArray value="KaelthasFlamestrikeSearchArea" />
    <EffectArray value="KaelthasFlamestrikeSearchAreaBurnedFlesh" />
    <EffectArray value="KaelthasFlamestrikeBurnedFleshRemoveHeroHitCounter" />
    <EffectArray value="KaelthasFlamestrikeIgniteSearchArea" />
  </CEffectSet>
  <CEffectSet id="KaelthasFlamestrikeSearchSet">
    <EffectArray value="KaelthasFlamestrikeSearchAreaSet" />
    <EffectArray value="KaelthasFlamestrikeFuryoftheSunwellDelayPersistent" />
  </CEffectSet>
  <CEffectCreatePersistent id="KaelthasFlamestrikeVerdantSpheresCreatePersistent">
    <InitialEffect value="KaelthasFlamestrikeVerdantSpheresInitialSet" />
    <ExpireDelay value="0.5" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasFlamestrikeVerdantSpheresSearchSet" />
    <PeriodicPeriodArray value="1" />
    <RevealRadius value="3.5" />
    <RevealFlags index="Unfog" value="1" />
    <AINotifySettings AreaEffect="KaelthasFlamestrikeVerdantSpheresSearchArea">
      <Flags index="HurtsEnemy" value="1" />
    </AINotifySettings>
  </CEffectCreatePersistent>
  <CEffectCreatePersistent id="KaelthasFlamestrikeVerdantSpheresFuryoftheSunwellDelayPersistent">
    <InitialDelay value="0.5" />
    <InitialEffect value="KaelthasFlamestrikeFuryOfTheSunwellVerdantSpheresCreatePersistent" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresImpactDummy" />
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresImpactSet">
    <EffectArray value="KaelthasFlamestrikeManaTapApplyResponseBehavior" />
    <EffectArray value="KaelthasFlamestrikeDamage" />
    <EffectArray value="ApplyAbilityImpactReveal" />
    <EffectArray value="KaelthasFlamestrikeConvectionModifyQuestToken" />
    <EffectArray value="KaelthasFlamestrikeRemoveMasterofFlameBehavior" />
    <EffectArray value="KaelthasFlamestrikeBurnedFleshAddHeroHitCounter" />
    <EffectArray value="KaelthasPyroblastPresenceOfMindModifyCooldowns" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasFlamestrikeBurnedFleshAddHeroHitCounter">
    <ValidatorArray index="0" value="TargetIsHero" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasFlamestrikeBurnedFleshHeroHitCounter" />
    <Chance value="0" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresInitialSet">
    <EffectArray value="KaelthasVerdantSpheresRemoveSet" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresLaunchMissileSet" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasFlamestrikeVerdantSpheresLaunchMissile1">
    <ImpactLocation Value="TargetPoint" />
    <ImpactEffect value="KaelthasFlamestrikeVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasFlamestrikeVerdantSpheresMissile" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileClose" IfRangeLTE="3" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileLob" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KaelthasFlamestrikeVerdantSpheresLaunchMissile2">
    <ImpactLocation Value="TargetPoint" />
    <ImpactEffect value="KaelthasFlamestrikeVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasFlamestrikeVerdantSpheresMissile" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileClose" IfRangeLTE="3" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileLob" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KaelthasFlamestrikeVerdantSpheresLaunchMissile3">
    <ImpactLocation Value="TargetPoint" />
    <ImpactEffect value="KaelthasFlamestrikeVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasFlamestrikeVerdantSpheresMissile" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileClose" IfRangeLTE="3" />
    <Movers Link="KaelthasFlamestrikeVerdantSpheresMissileLob" />
  </CEffectLaunchMissile>
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresLaunchMissileSet">
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresLaunchMissile1" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresLaunchMissile2" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresLaunchMissile3" />
  </CEffectSet>
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresSearchAreaWithBurnedFleshSet">
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresFlamethrowerTalentSearch" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresSearchArea" />
    <EffectArray value="KaelthasFlameStrikeVerdantSpheresBurnedFleshSearchArea" />
    <EffectArray value="KaelthasFlamestrikeBurnedFleshRemoveHeroHitCounter" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresIgniteSearchAreaUnnamed" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasFlamestrikeVerdantSpheresSearchArea">
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <SearchFlags index="DoActorSearch" value="1" />
    <AreaArray Effect="KaelthasFlamestrikeVerdantSpheresImpactSet">
      <Radius value="3" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasFlameStrikeVerdantSpheresBurnedFleshSearchArea">
    <ValidatorArray value="KaelThasFlamestrikeBurnedFleshCasterhasTwostackofHeroHitCounter" />
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AreaArray Effect="KaelthasFlamestrikeBurnedFleshTalentDamage">
      <Radius value="3" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectSet id="KaelthasFlamestrikeVerdantSpheresSearchSet">
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresSearchAreaWithBurnedFleshSet" />
    <EffectArray value="KaelthasFlamestrikeVerdantSpheresFuryoftheSunwellDelayPersistent" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyMaxTargetsHitBehavior">
    <ValidatorArray index="0" value="KaelthasSourceIsRegularGravityLapseMissile" />
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasGravityLapseTargetsHit" />
    <Count value="3" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyTargetBehavior">
    <Behavior value="KaelthasGravityLapseTarget" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyTargetLiftBehavior">
    <Behavior value="KaelthasGravityLapseTargetLift" />
  </CEffectApplyBehavior>
  <CEffectSwitch id="KaelthasGravityLapseApplyTargetSwitch">
    <CaseArray Validator="GravityLapseHasVerdantSphereDummyBehavior" Effect="KaelthasGravityLapseApplyVTargetBehavior" />
    <CaseDefault value="KaelthasGravityLapseApplyTargetBehavior" />
  </CEffectSwitch>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyTargetsHitBehavior">
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasGravityLapseTargetsHit" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasGravityLapseApplyVTargetBehavior">
    <Behavior value="KaelthasGravityLapseTargetV" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasGravityLapseCastSet">
    <EffectArray value="KaelthasGravityLapseVerdantSpheresLaunchPersistent" />
    <EffectArray value="KaelthasGravityLapseCreatePersistent" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectCreatePersistent id="KaelthasGravityLapseCreatePersistent">
    <WhichLocation Value="CasterPoint" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasGravityLapseNetherWindMissileSwitch" />
    <PeriodicOffsetArray Y="-9.5" />
    <PeriodicPeriodArray value="0" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasGravityLapseDestroyMissileSet">
    <ValidatorArray value="KaelthasGravityLapseTargetsHitGE3" />
    <EffectArray value="KaelthasGravityLapseDestroyPersistent" />
    <EffectArray value="KaelthasGravityLapseRemoveTargetsHitBehavior" />
    <EffectArray value="StormSuicide" />
  </CEffectSet>
  <CEffectDestroyPersistent id="KaelthasGravityLapseDestroyPersistent">
    <WhichLocation Value="CasterPoint" />
    <Effect value="KaelthasGravityLapseMissileScanPersistent" />
    <Count value="1" />
    <Radius value="0.5" />
  </CEffectDestroyPersistent>
  <CEffectModifyUnit id="KaelthasGravityLapseEnergyRoilModifyCooldown">
    <Chance value="0" />
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasGravityLapse,Execute" CooldownOperation="Add" CooldownTimeUse="-9" />
    <ValidatorArray value="TargetIsHero" />
    <ValidatorArray value="KaelthasNoMarkers" />
  </CEffectModifyUnit>
  <CEffectCreateHealer id="KaelthasGravityLapseNetherWindRestoreMana" parent="StormManaRestore">
    <ImpactUnit Value="Caster" />
    <Chance value="0" />
    <RechargeVitalRate value="80" />
    <ValidatorArray value="TargetIsHero" />
    <ValidatorArray value="KaelthasNoMarkers" />
  </CEffectCreateHealer>
  <CEffectLaunchMissile id="KaelthasGravityLapseEnhancedLaunchMissile">
    <ValidatorArray index="0" value="CasterNotDead" />
    <ImpactLocation Value="TargetPoint" />
    <LaunchEffect value="KaelthasGravityLapseLaunchEffectsSet" />
    <ImpactEffect value="KaelthasGravityLapseTerminateDummy" />
    <SharedFlags index="2D" value="1" />
    <AmmoUnit value="KaelthasGravityLapseEnhancedMissile" />
    <Movers Link="KaelthasGravityLapseMissile" />
  </CEffectLaunchMissile>
  <CEffectSwitch id="KaelthasGravityLapseEnhancedMissileSwitch">
    <CaseArray Validator="KaelthasCasterVerdantSpheresActive" Effect="KaelthasGravityLapseEnhancedLaunchMissile" />
    <CaseDefault value="KaelthasGravityLapseLaunchMissile" />
    <TargetLocationType value="Point" />
  </CEffectSwitch>
  <CEffectSwitch id="KaelthasGravityLapseEnhancedNetherWindMissileSwitch">
    <CaseArray Validator="KaelthasCasterVerdantSpheresActive" Effect="KaelthasGravityLapseLaunchEnhancedNetherWindMissile" />
    <CaseDefault value="KaelthasGravityLapseNetherWindLaunchMissile" />
    <TargetLocationType value="Point" />
  </CEffectSwitch>
  <CEffectApplyBehavior id="KaelthasGravityLapseTargetLiftBehavior">
    <Behavior value="KaelthasGravityLapseVerdantSphereTargetLift" />
  </CEffectApplyBehavior>
  <CEffectSwitch id="KaelthasGravityLapseImpactLiftSwitch">
    <CaseArray Validator="GravityLapseHasVerdantSphereDummyBehavior" Effect="KaelthasGravityLapseTargetLiftBehavior" />
    <CaseDefault value="KaelthasGravityLapseApplyTargetLiftBehavior" />
  </CEffectSwitch>
  <CEffectSet id="KaelthasGravityLapseImpactSet">
    <ValidatorArray value="noMarkers" />
    <EffectArray value="DecloakTargetSet" />
    <EffectArray value="KaelthasGravityLapseApplyTargetsHitBehavior" />
    <EffectArray value="KaelthasGravityLapseApplyTargetSwitch" />
    <EffectArray value="KaelthasGravityLapseApplyRevealer" />
    <EffectArray value="KaelthasGravityLapseImpactLiftSwitch" />
    <EffectArray value="KaelthasGravityLapseDestroyMissileSet" />
    <EffectArray value="KaelthasGravityLapseImpactTalentSet" />
    <EffectArray value="AbilityImpactRevealDummyDamage" />
  </CEffectSet>
  <CEffectSet id="KaelthasGravityLapseImpactTalentSet">
    <EffectArray value="KaelthasGravityLapseEnergyRoilModifyCooldown" />
    <EffectArray value="KaelthasGravityLapseNetherWindRestoreMana" />
  </CEffectSet>
  <CEffectSet id="KaelthasGravityLapseInitialSet">
    <EffectArray value="KaelthasGravityLapseCastSet" />
    <EffectArray value="KaelthasModifyWeapon" />
    <EffectArray value="KaelthasArcaneDynamoApplyStack" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectSet id="KaelthasGravityLapseLaunchEffectsSet">
    <EffectArray value="KaelthasGravityLapseApplyMaxTargetsHitBehavior" />
    <EffectArray value="KaelthasGravityLapseMissileScanPersistent" />
    <EffectArray value="KaelthasVerdantSpheresRemoveSet" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasGravityLapseLaunchEnhancedNetherWindMissile">
    <ValidatorArray index="0" value="CasterNotDead" />
    <ImpactLocation Value="TargetPoint" />
    <LaunchEffect value="KaelthasGravityLapseLaunchEffectsSet" />
    <ImpactEffect value="KaelthasGravityLapseTerminateDummy" />
    <SharedFlags index="2D" value="1" />
    <AmmoUnit value="KaelthasGravityLapseEnhancedMissile" />
    <Movers Link="KaelthasGravityLapseNetherWindMissile" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KaelthasGravityLapseLaunchMissile">
    <ValidatorArray index="0" value="CasterNotDead" />
    <ImpactLocation Value="TargetPoint" />
    <LaunchEffect value="KaelthasGravityLapseLaunchEffectsSet" />
    <ImpactEffect value="KaelthasGravityLapseTerminateDummy" />
    <SharedFlags index="2D" value="1" />
    <AmmoUnit value="KaelthasGravityLapseMissile" />
    <Movers Link="KaelthasGravityLapseMissile" />
  </CEffectLaunchMissile>
  <CEffectEnumArea id="KaelthasGravityLapseMissileScan">
    <LaunchLocation Effect="KaelthasGravityLapseCreatePersistent" Value="OriginPoint" />
    <ImpactLocation Value="SourceUnit" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,ImmuneToSkillshots,Structure,Missile,Item,Stasis,Dead,Hidden" />
    <SearchFlags index="DoActorSearch" value="1" />
    <AreaArray MaxCount="1" Effect="KaelthasGravityLapseImpactSet">
      <RectangleWidth value="1.75" />
      <RectangleHeight value="0.8" />
    </AreaArray>
    <AreaRelativeOffset Y="-0.7" />
    <RevealerParams Duration="0.75" ShapeExpansion="1">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
  </CEffectEnumArea>
  <CEffectCreatePersistent id="KaelthasGravityLapseMissileScanPersistent">
    <Marker>
      <MatchFlags index="Id" value="1" />
    </Marker>
    <WhichLocation Value="CasterUnit" />
    <InitialDelay value="0.0625" />
    <PeriodCount value="11" />
    <PeriodicEffectArray value="KaelthasGravityLapseMissileScan" />
    <PeriodicPeriodArray value="0.0625" />
  </CEffectCreatePersistent>
  <CEffectLaunchMissile id="KaelthasGravityLapseNetherWindLaunchMissile">
    <ValidatorArray index="0" value="CasterNotDead" />
    <ImpactLocation Value="TargetPoint" />
    <LaunchEffect value="KaelthasGravityLapseLaunchEffectsSet" />
    <ImpactEffect value="KaelthasGravityLapseTerminateDummy" />
    <SharedFlags index="2D" value="1" />
    <AmmoUnit value="KaelthasGravityLapseMissile" />
    <Movers Link="KaelthasGravityLapseNetherWindMissile" />
  </CEffectLaunchMissile>
  <CEffectSwitch id="KaelthasGravityLapseNetherWindMissileSwitch">
    <CaseArray Validator="KaelthasHasGravityLapseNetherWind" Effect="KaelthasGravityLapseEnhancedNetherWindMissileSwitch" />
    <CaseDefault value="KaelthasGravityLapseEnhancedMissileSwitch" />
    <TargetLocationType value="Point" />
  </CEffectSwitch>
  <CEffectRemoveBehavior id="KaelthasGravityLapseRemoveTargetsHitBehavior">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasGravityLapseTargetsHit" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelthasGravityLapseTerminateDummy">
    <EffectArray value="KaelthasGravityLapseRemoveTargetsHitBehavior" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectModifyUnit id="KaelthasGravityLapseTriOptimalModifyCooldown">
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasVerdantSpheres,Execute" CooldownOperation="Add" CooldownTimeUse="-2" />
  </CEffectModifyUnit>
  <CEffectSet id="KaelthasGravityLapseTriOptimalSet">
    <Chance value="0" />
    <EffectArray value="KaelthasGravityLapseTriOptimalModifyCooldown" />
    <EffectArray value="KaelthasVerdantSpheresApplySphereStackBehavior" />
  </CEffectSet>
  <CEffectSet id="KaelthasGravityLapseVerdantSpheresImpactDummy" />
  <CEffectSet id="KaelthasGravityLapseVerdantSpheresInitialSet">
    <EffectArray value="KaelthasVerdantSpheresRemoveSet" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasGravityLapseVerdantSpheresLaunchMissile1">
    <ImpactLocation Effect="KaelthasGravityLapseVerdantSpheresLaunchMissileSet" Value="TargetPoint" />
    <ImpactEffect value="KaelthasGravityLapseVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasGravityLapseVerdantSpheresMissile" />
    <Movers Link="KaelthasGravityLapseVerdantSpheresMissile" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KaelthasGravityLapseVerdantSpheresLaunchMissile2">
    <ImpactLocation Effect="KaelthasGravityLapseVerdantSpheresLaunchMissileSet" Value="TargetPoint" />
    <ImpactEffect value="KaelthasGravityLapseVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasGravityLapseVerdantSpheresMissile" />
    <Movers Link="KaelthasGravityLapseVerdantSpheresMissile" />
  </CEffectLaunchMissile>
  <CEffectLaunchMissile id="KaelthasGravityLapseVerdantSpheresLaunchMissile3">
    <ImpactLocation Effect="KaelthasGravityLapseVerdantSpheresLaunchMissileSet" Value="TargetPoint" />
    <ImpactEffect value="KaelthasGravityLapseVerdantSpheresImpactDummy" />
    <AmmoUnit value="KaelthasGravityLapseVerdantSpheresMissile" />
    <Movers Link="KaelthasGravityLapseVerdantSpheresMissile" />
  </CEffectLaunchMissile>
  <CEffectSet id="KaelthasGravityLapseVerdantSpheresLaunchMissileSet">
    <EffectArray value="KaelthasGravityLapseVerdantSpheresLaunchMissile1" />
    <EffectArray value="KaelthasGravityLapseVerdantSpheresLaunchMissile2" />
    <EffectArray value="KaelthasGravityLapseVerdantSpheresLaunchMissile3" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectCreatePersistent id="KaelthasGravityLapseVerdantSpheresLaunchPersistent">
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
    <WhichLocation Value="CasterPoint" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasGravityLapseVerdantSpheresLaunchMissileSet" />
    <PeriodicOffsetArray Y="-8" />
    <PeriodicPeriodArray value="0" />
  </CEffectCreatePersistent>
  <CEffectCreatePersistent id="KaelthasGravityThrowDelayKillPersistent">
    <WhichLocation Value="TargetUnit" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasGravityThrowKill" />
    <PeriodicPeriodArray value="0.1875" />
  </CEffectCreatePersistent>
  <CEffectDamage id="KaelthasGravityThrowKill">
    <ImpactLocation Value="SourceUnit" />
    <Flags index="Kill" value="1" />
  </CEffectDamage>
  <CEffectApplyBehavior id="KaelthasLivingBombApplyTargetBehavior">
    <ValidatorArray index="0" value="TargetNotDead" />
    <ValidatorArray value="TargetDoesNotAnyLivingBombVariation" />
    <Behavior value="KaelthasLivingBombTarget" />
  </CEffectApplyBehavior>
  <CEffectCreatePersistent id="KaelthasLivingBombApplyTargetBehaviorCP">
    <WhichLocation Value="TargetUnit" />
    <PeriodCount value="2" />
    <PeriodicEffectArray value="KaelthasLivingBombApplyTargetBehavior" />
    <PeriodicPeriodArray value="0.125" />
    <PeriodicPeriodArray value="0" />
  </CEffectCreatePersistent>
  <CEffectApplyBehavior id="KaelthasLivingBombBackdraftApplyBehavior">
    <Chance value="0" />
    <Behavior value="KaelthasLivingBombBackdraft" />
  </CEffectApplyBehavior>
  <CEffectModifyUnit id="KaelthasLivingBombBeamDummy" />
  <CEffectCreatePersistent id="KaelthasLivingBombBeamDummyDelay">
    <WhichLocation Value="TargetUnit" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasLivingBombBeamDummy" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasLivingBombCastSet">
    <EffectArray value="ApplyAbilityImpactReveal" />
    <EffectArray value="KaelthasLivingBombApplyTargetBehaviorCP" />
    <EffectArray value="KaelthasLivingBombVerdantSpheresPopSet" />
    <EffectArray value="KaelthasVerdantSpheresRemoveSet" />
    <EffectArray value="KaelthasLivingBombBeamDummyDelay" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasLivingBombChainBombApplyTargetBehavior">
    <ValidatorArray index="0" value="TargetNotDead" />
    <ValidatorArray value="TargetDoesNotAnyLivingBombVariation" />
    <Behavior value="KaelthasLivingBombChainBombTarget" />
  </CEffectApplyBehavior>
  <CEffectCreatePersistent id="KaelthasLivingBombChainBombApplyTargetBehaviorDelayPersistent">
    <WhichLocation Value="TargetUnit" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasLivingBombChainBombDelayPersistentSet" />
    <PeriodicPeriodArray value="0.0625" />
    <ValidatorArray value="TargetIsHero" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasLivingBombChainBombFinalSetSource">
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombExplosionSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
  </CEffectSet>
  <CEffectCreatePersistent id="KaelthasLivingBombChainBombFinalSetSourceCP">
    <WhichLocation Value="SourceUnit" />
    <PeriodCount value="1" />
    <PeriodicEffectArray value="KaelthasLivingBombChainBombFinalSetSource" />
    <PeriodicPeriodArray value="0.0625" />
    <ValidatorArray value="SourceDoesNotHaveSuppressFatalDamageResponse" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasLivingBombChainBombFinalSetSourceExtendedDeath">
    <ValidatorArray value="TargetIsSpecialDeathState" />
    <ValidatorArray value="SourceDoesNotHaveLivingBombSourceExploded" />
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombExplosionSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
  </CEffectSet>
  <CEffectSet id="KaelthasLivingBombChainBombFinalSetTarget">
    <Marker Link="Effect/KaelthasLivingBombChainBombFinalSetSource" />
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombExplosionSearchAreaTarget" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasLivingBombChainBombSearchAreaSource">
    <ValidatorArray value="TargetNotInStasisExceptSpecialDeathState" />
    <ImpactLocation Value="SourcePoint" />
    <ExcludeArray Value="Source" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <SearchFlags index="DoActorSearch" value="1" />
    <TargetSorts>
      <SortArray value="TSHeroic" />
      <SortArray value="TSDistanceFromSource" />
    </TargetSorts>
    <AreaArray Effect="KaelthasLivingBombChainBombApplyTargetBehaviorDelayPersistent">
      <Radius value="3.3" />
    </AreaArray>
    <RevealerParams HeightMap="Ground" Duration="0.5" ShapeExpansion="0.5">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasLivingBombChainBombSearchAreaTarget">
    <ValidatorArray value="TargetNotStasis" />
    <ImpactLocation Value="TargetPoint" />
    <ExcludeArray Value="Target" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <SearchFlags index="DoActorSearch" value="1" />
    <AreaArray Effect="KaelthasLivingBombChainBombApplyTargetBehaviorDelayPersistent">
      <Radius value="3.3" />
    </AreaArray>
    <RevealerParams HeightMap="Ground" Duration="0.5" ShapeExpansion="0.5">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
    <TargetSorts>
      <SortArray value="TSHeroic" />
      <SortArray value="TSDistanceToTarget" />
    </TargetSorts>
  </CEffectEnumArea>
  <CEffectModifyUnit id="KaelthasLivingBombCriticalMassModifyCooldowns">
    <Chance value="0" />
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasFlamestrike,Execute" CooldownOperation="Add" CooldownTimeUse="-1" />
    <Cost Abil="KaelthasLivingBomb,Execute" CooldownOperation="Add" CooldownTimeUse="-1" />
    <Cost Abil="KaelthasGravityLapse,Execute" CooldownOperation="Add" CooldownTimeUse="-1" />
  </CEffectModifyUnit>
  <CEffectDamage id="KaelthasLivingBombDoTDamage" parent="StormSpellDot">
    <ImpactLocation Value="TargetUnit" />
    <Amount value="42" />
    <MultiplicativeModifierArray index="TargetHasSunKingsDebuff" Validator="KaelthasHasSunKingsFuryTalentDebuff" Modifier="0.35" Crit="1" />
  </CEffectDamage>
  <CEffectDamage id="KaelthasLivingBombExplosionDamage" parent="StormSpell">
    <ResponseFlags index="Acquire" value="0" />
    <ImpactLocation Value="TargetUnit" />
    <Visibility value="Hidden" />
    <Amount value="215" />
    <MultiplicativeModifierArray index="SourceHasSunKingsDebuff" Validator="KaelthasHasSunKingsFuryTalentDebuffSource" Modifier="0.35" Crit="1" />
  </CEffectDamage>
  <CEffectSet id="KaelthasLivingBombExplosionImpactSet">
    <EffectArray value="KaelthasLivingBombExplosionDamage" />
    <EffectArray value="KaelthasLivingBombBackdraftApplyBehavior" />
    <EffectArray value="ApplyAbilityImpactReveal" />
    <EffectArray value="KaelthasFlamestrikeRemoveMasterofFlameBehavior" />
    <EffectArray value="KaelThasLivingBombMasterOfFlameApplyChainBombTarget" />
    <OrphanFromEffectChain value="1" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasLivingBombExplosionSearchAreaSource">
    <ValidatorArray value="TargetIsSpecialDeathStateOrNotBenignOrInvulnerableOrStasis" />
    <ImpactLocation Value="SourcePoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AreaArray Effect="KaelthasLivingBombExplosionImpactSet">
      <Radius value="3.3" />
    </AreaArray>
    <RevealerParams HeightMap="Ground" Duration="0.5" ShapeExpansion="0.5">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
    <SearchFlags index="ExtendByUnitRadius" value="1" />
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasLivingBombFatalResponseExplosionSearchAreaSource" parent="KaelthasLivingBombExplosionSearchAreaSource">
    <ExcludeArray Value="Source" />
    <SearchFilters value="-;Self,Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
  </CEffectEnumArea>
  <CEffectEnumArea id="KaelthasLivingBombExplosionSearchAreaTarget">
    <ValidatorArray value="TargetNotInvulnerableOrBenign" />
    <ValidatorArray value="TargetNotStasis" />
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <SearchFlags index="DoActorSearch" value="1" />
    <AreaArray Effect="KaelthasLivingBombExplosionImpactSet">
      <Radius value="3.3" />
    </AreaArray>
    <RevealerParams HeightMap="Ground" Duration="0.5" ShapeExpansion="0.5">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
  </CEffectEnumArea>
  <CEffectSet id="KaelthasLivingBombFinalSetSource">
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombChainBombSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombExplosionSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
  </CEffectSet>
  <CEffectSet id="KaelthasLivingBombFatalSetSource">
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombChainBombSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombFatalResponseExplosionSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
    <ValidatorArray value="SourceDoesNotHaveSuppressFatalDamageResponse" />
  </CEffectSet>
  <CEffectRemoveBehavior id="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource">
    <BehaviorLink value="KaelthasLivingBombSunKingsFuryTalentDebuff" />
    <WhichUnit Value="Source" />
    <Chance value="0" />
  </CEffectRemoveBehavior>
  <CEffectApplyBehavior id="KaelthasLivingBombFinalSetSourceExplodedAB">
    <Behavior value="KaelthasLivingBombFinalSetSourceExploded" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasLivingBombFinalSetSourceExtendedDeath">
    <ValidatorArray value="TargetIsSpecialDeathState" />
    <ValidatorArray value="SourceDoesNotHaveLivingBombSourceExploded" />
    <EffectArray value="KaelthasLivingBombFinalSetSourceExplodedAB" />
    <EffectArray value="KaelthasLivingBombChainBombSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombExplosionSearchAreaSource" />
    <EffectArray value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
  </CEffectSet>
  <CEffectApplyBehavior id="KaelthasLivingBombFissionBombApplyProcBehavior">
    <Behavior value="KaelthasLivingBombFissionBombProc" />
  </CEffectApplyBehavior>
  <CEffectDamage id="KaelthasLivingBombImpactDamage" parent="StormSpell">
    <ImpactLocation Value="TargetUnit" />
    <Amount value="42" />
    <MultiplicativeModifierArray index="TargetHasSunKingsDebuff" Validator="KaelthasHasSunKingsFuryTalentDebuff" Modifier="0.35" Crit="1" />
  </CEffectDamage>
  <CEffectSet id="KaelthasLivingBombInitialSet">
    <EffectArray value="KaelthasLivingBombCastSet" />
    <EffectArray value="KaelthasModifyWeapon" />
    <EffectArray value="KaelthasArcaneDynamoApplyStack" />
    <ValidatorArray value="TargetDoesNotAnyLivingBombVariation" />
  </CEffectSet>
  <CEffectModifyUnit id="KaelthasLivingBombPyromaniacModifyCooldowns">
    <Chance value="0" />
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasFlamestrike,Execute" CooldownOperation="Add" CooldownTimeUse="-0.5" />
    <Cost Abil="KaelthasLivingBomb,Execute" CooldownOperation="Add" CooldownTimeUse="-0.5" />
    <Cost Abil="KaelthasGravityLapse,Execute" CooldownOperation="Add" CooldownTimeUse="-0.5" />
  </CEffectModifyUnit>
  <CEffectRemoveBehavior id="KaelthasLivingBombRemoveTargetBehavior">
    <BehaviorLink value="KaelthasLivingBombTarget" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelthasLivingBombTicSet">
    <EffectArray value="KaelthasLivingBombPyromaniacModifyCooldowns" />
    <EffectArray value="KaelthasLivingBombDoTDamage" />
  </CEffectSet>
  <CEffectSet id="KaelthasLivingBombVerdantSpheresImpactDummy" />
  <CEffectSet id="KaelthasLivingBombVerdantSpheresLaunchSet">
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
    <EffectArray value="KalethasLivingBombVerdantSphereLaunchMissile1" />
    <EffectArray value="KalethasLivingBombVerdantSphereLaunchMissile2" />
    <EffectArray value="KalethasLivingBombVerdantSphereLaunchMissile3" />
  </CEffectSet>
  <CEffectSet id="KaelthasLivingBombVerdantSpheresPopSet">
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
  </CEffectSet>
  <CEffectModifyUnit id="KaelthasModifyWeapon">
    <ImpactUnit Value="Caster" />
    <Weapon Weapon="KaelthasHeroWeapon" CooldownOperation="Max" CooldownAmount="0.25" />
  </CEffectModifyUnit>
  <CEffectApplyBehavior id="KaelthasPhoenixApplyArcanePowerBuff">
    <ValidatorArray index="0" value="SourceHasArcanePowerActive" />
    <Behavior value="KaelthasPhoenixArcanePowerBuff" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasPhoenixApplyRetargetReadyBehavior">
    <Chance value="0" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasPhoenixRetargetReady" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasPhoenixApplyTimedLifeBehavior">
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasPhoenixTimedLife" />
  </CEffectApplyBehavior>
  <CEffectEnumArea id="KaelthasPhoenixAttackTargetSearch">
    <ImpactLocation Value="TargetUnit" />
    <SearchFilters value="-;Player,Ally,Neutral,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <TargetSorts>
      <SortArray value="TSHeroic" />
      <SortArray value="TSLifeSmallestFirst" />
    </TargetSorts>
    <AreaArray MaxCount="1" Effect="KaelthasPhoenixIssueAttackOrder">
      <Radius value="6" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectCreateUnit id="KaelthasPhoenixCreateUnit">
    <WhichLocation Value="CasterPoint" />
    <CreateFlags index="PlacementIgnoreBlockers" value="1" />
    <CreateFlags index="SetFacing" value="1" />
    <SpawnEffect value="KaelthasPhoenixInitialLaunchMissileSet" />
    <SpawnUnit value="KaelthasPhoenix" />
  </CEffectCreateUnit>
  <CEffectCreateUnit id="KaelthasPhoenixCreateUnitRetargetDummy">
    <Chance value="0" />
    <WhichLocation Value="TargetPoint" />
    <CreateFlags index="Placement" value="0" />
    <CreateFlags index="PlacementIgnoreBlockers" value="1" />
    <SpawnUnit value="KaelthasPhoenix" />
  </CEffectCreateUnit>
  <CEffectEnumArea id="KaelthasPhoenixCursorArea">
    <ImpactLocation Value="TargetPoint" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AreaArray>
      <Radius value="6" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectDestroyPersistent id="KaelthasPhoenixDestroyMissileScanPersistent">
    <WhichLocation Value="SourcePoint" />
    <Effect value="KaelthasPhoenixMissileScanPersistent" />
    <Count value="1" />
    <Radius value="0.5" />
  </CEffectDestroyPersistent>
  <CEffectDestroyPersistent id="KaelthasPhoenixDestroyModelDummyPersistent">
    <WhichLocation Value="SourcePoint" />
    <Effect value="KaelthasPhoenixModelDummyPersistent" />
    <Count value="1" />
    <Radius value="0.5" />
  </CEffectDestroyPersistent>
  <CEffectSet id="KaelthasPhoenixDestroyPersistentsSet">
    <EffectArray value="KaelthasPhoenixDestroyMissileScanPersistent" />
    <EffectArray value="KaelthasPhoenixDestroyModelDummyPersistent" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectSet id="KaelthasPhoenixInitialImpactSet">
    <EffectArray value="KaelthasPhoenixApplyRetargetReadyBehavior" />
    <EffectArray value="KaelthasPhoenixApplyRebirthTalentRetargetReadyBehaviorSource" />
    <EffectArray value="KaelthasPhoenixDestroyPersistentsSet" />
    <EffectArray value="KaelthasPhoenixApplyTimedLifeBehavior" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasPhoenixInitialLaunchMissile">
    <LaunchLocation Value="TargetUnit" />
    <ImpactLocation Effect="KaelthasPhoenixInitialSet" Value="TargetPoint" />
    <LaunchEffect value="KaelthasPhoenixPersistentsSet" />
    <ImpactEffect value="KaelthasPhoenixInitialImpactSet" />
    <SharedFlags index="2D" value="1" />
    <ImpactRange value="0.125" />
    <Movers Link="KaelthasPhoenixMissile" />
    <DeathType value="Unknown" />
  </CEffectLaunchMissile>
  <CEffectSet id="KaelthasPhoenixInitialLaunchMissileSet">
    <EffectArray value="KaelthasPhoenixAddToTrackingList" />
    <EffectArray value="KaelthasPhoenixApplyArcanePowerBuff" />
    <EffectArray value="KaelthasApplyPhoenixInitialDistanceCheckBehavior" />
    <EffectArray value="KaelthasPhoenixInitialLaunchMissile" />
    <EffectArray value="KaelthasPhoenixFelInfusionApplyBehavior" />
  </CEffectSet>
  <CEffectSet id="KaelthasPhoenixInitialSet">
    <EffectArray value="KaelthasPhoenixCreateUnit" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectIssueOrder id="KaelthasPhoenixIssueAttackOrder">
    <WhichUnit Value="Source" />
    <Abil value="attack" />
    <Target Value="TargetUnit" />
  </CEffectIssueOrder>
  <CEffectApplyBehavior id="KaelthasPhoenixManaWyrmApplyBehavior">
    <Chance value="0" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasPhoenixManaWyrmStack" />
  </CEffectApplyBehavior>
  <CEffectDamage id="KaelthasPhoenixMissileDamage" parent="StormSpell">
    <Amount value="78" />
    <DamageModifierSource Value="Creator" />
  </CEffectDamage>
  <CEffectSet id="KaelthasPhoenixMissileImpactSet">
    <ValidatorArray value="noMarkers" />
    <EffectArray value="KaelthasPhoenixMissileDamage" />
    <EffectArray value="ApplyAbilityImpactReveal" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasPhoenixMissileScan">
    <ImpactLocation Value="SourceUnit" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden" />
    <AreaArray Effect="KaelthasPhoenixMissileImpactSet">
      <Radius value="1.25" />
    </AreaArray>
    <SearchFlags index="DoActorSearch" value="1" />
  </CEffectEnumArea>
  <CEffectCreatePersistent id="KaelthasPhoenixMissileScanPersistent">
    <Marker>
      <MatchFlags index="Id" value="1" />
    </Marker>
    <WhichLocation Value="SourceUnit" />
    <Flags index="PersistUntilDestroyed" value="1" />
    <PeriodicValidator value="SourceNotDead" />
    <PeriodicEffectArray value="KaelthasPhoenixMissileScan" />
    <PeriodicPeriodArray value="0.0625" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasPhoenixModelDummy" />
  <CEffectCreatePersistent id="KaelthasPhoenixModelDummyPersistent">
    <WhichLocation Value="SourceUnit" />
    <Flags index="PersistUntilDestroyed" value="1" />
    <PeriodicValidator value="SourceNotDead" />
    <PeriodicEffectArray value="KaelthasPhoenixModelDummy" />
    <PeriodicPeriodArray value="0.0625" />
  </CEffectCreatePersistent>
  <CEffectSet id="KaelthasPhoenixPersistentsSet">
    <EffectArray value="KaelthasPhoenixMissileScanPersistent" />
    <EffectArray value="KaelthasPhoenixModelDummyPersistent" />
  </CEffectSet>
  <CEffectSet id="KaelthasPhoenixRedirectLaunchMissileSet">
    <ValidatorArray value="IsKaelthasPhoenix" />
    <EffectArray value="KaelthasApplyPhoenixRetargetDistanceCheckBehavior" />
    <EffectArray value="KaelthasPhoenixRetargetLaunchMissile" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasPhoenixRetargetLaunchMissile">
    <LaunchLocation Value="TargetUnit" />
    <ImpactLocation Effect="KaelthasPhoenixRetargetSet" Value="TargetPoint" />
    <LaunchEffect value="KaelthasPhoenixPersistentsSet" />
    <ImpactEffect value="KaelthasPhoenixDestroyPersistentsSet" />
    <SharedFlags index="2D" value="1" />
    <ImpactRange value="0.125" />
    <Movers Link="KaelthasPhoenixMissile" />
    <DeathType value="Unknown" />
  </CEffectLaunchMissile>
  <CEffectRemoveBehavior id="KaelthasPhoenixRetargetRemoveReadyBehavior">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasPhoenixRetargetReady" />
    <Count value="1" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelthasPhoenixRetargetSet">
    <ValidatorArray value="TargetLocationIsPathable" />
    <EffectArray value="KaelthasPhoenixRebirthRetargetPhoenixEnumerateTrackingList" />
    <EffectArray value="KaelthasPhoenixRetargetRemoveReadyBehavior" />
    <EffectArray value="KaelthasPhoenixCreateUnitRetargetDummy" />
    <TargetLocationType value="Point" />
  </CEffectSet>
  <CEffectSet id="KaelthasPhoenixRebirthVehicleUseSet">
    <ValidatorArray value="KaelthasHasPhoenixRebirth" />
    <EffectArray value="HeroGenericVehicleApplySpecialSelectionTriggers" />
  </CEffectSet>
  <CEffectSet id="UseVehicleCastCompleteSet">
    <EffectArray value="KaelthasPhoenixRebirthVehicleUseSet" />
  </CEffectSet>
  <CEffectSet id="KaelthasPhoenixWeaponAoEDummy">
    <EffectArray value="ApplyAbilityImpactReveal" />
  </CEffectSet>
  <CEffectEnumArea id="KaelthasPhoenixWeaponAoESearch">
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden" />
    <AreaArray Effect="KaelthasPhoenixWeaponAoEDummy">
      <Radius value="2" />
    </AreaArray>
  </CEffectEnumArea>
  <CEffectDamage id="KaelthasPhoenixWeaponDamage" parent="StormSpell">
    <Amount value="78" />
    <AreaArray Fraction="0.5">
      <Radius value="2" />
    </AreaArray>
    <ExcludeArray Value="Target" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden,Invulnerable" />
    <DamageModifierSource Value="Creator" />
  </CEffectDamage>
  <CEffectSet id="KaelthasPhoenixWeaponImpactSet">
    <Marker>
      <MatchFlags index="Id" value="1" />
    </Marker>
    <EffectArray value="KaelthasPhoenixWeaponAoESearch" />
    <EffectArray value="KaelthasPhoenixWeaponDamage" />
    <EffectArray value="ApplyAbilityImpactReveal" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasPhoenixWeaponLaunchMissile">
    <ValidatorArray index="0" value="TargetisSummonedorNotBenign" />
    <ImpactEffect value="KaelthasPhoenixWeaponImpactSet" />
    <SharedFlags index="ValidateWeapon" value="0" />
    <AmmoUnit value="KaelthasPhoenixWeaponMissile" />
    <Movers Link="KaelthasPhoenixWeaponMissileShort" IfRangeLTE="0.1" />
    <Movers Link="KaelthasPhoenixWeaponMissile" IfRangeLTE="500" />
  </CEffectLaunchMissile>
  <CEffectApplyBehavior id="KaelthasPyroblastApplyCastingReveal">
    <Behavior value="KaelthasPyroblastCastingReveal" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasPyroblastApplyMissileReveal">
    <WhichUnit Effect="KaelthasPyroblastLaunchMissile" />
    <Behavior value="KaelthasPyroblastMissileReveal" />
  </CEffectApplyBehavior>
  <CEffectSet id="KaelthasPyroblastCastPrepareSet">
    <EffectArray value="DismountDecloakCasterSet" />
    <EffectArray value="KaelthasPyroblastApplyCastingReveal" />
  </CEffectSet>
  <CEffectSet id="KaelthasPyroblastImpactSet">
    <ValidatorArray value="TargetNotSpecialDeathState" />
    <EffectArray value="KaelthasPyroblastPresenceOfMindCooldownSearch" />
    <EffectArray value="KaelthasPyroblastDamage" />
    <EffectArray value="KaelthasPyroblastImpactSearch" />
  </CEffectSet>
  <CEffectSet id="KaelthasPyroblastCastSet">
    <EffectArray value="KaelthasPyroblastLaunchMissile" />
  </CEffectSet>
  <CEffectDamage id="KaelthasPyroblastDamage" parent="StormSpell">
    <Amount value="810" />
  </CEffectDamage>
  <CEffectEnumArea id="KaelthasPyroblastImpactSearch">
    <LaunchLocation Value="TargetUnit" />
    <ExcludeArray Value="Target" />
    <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <SearchFlags index="DoActorSearch" value="1" />
    <AreaArray Effect="KaelthasPyroblastImpactSearchSet">
      <Radius value="3" />
    </AreaArray>
    <RevealerParams HeightMap="Ground" Duration="1" ShapeExpansion="1">
      <RevealFlags index="Unfog" value="1" />
    </RevealerParams>
  </CEffectEnumArea>
  <CEffectSet id="KaelthasPyroblastImpactSearchSet">
    <EffectArray value="KaelthasPyroblastSplashDamage" />
    <EffectArray value="ApplyAbilityImpactReveal" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasPyroblastLaunchMissile">
    <LaunchEffect value="KaelthasPyroblastLaunchMissileSet" />
    <ImpactEffect value="KaelthasPyroblastImpactSwitch" />
    <SharedFlags index="TravelValidation" value="1" />
    <SharedFlags index="ValidateAbil" value="0" />
    <AmmoUnit value="KaelthasPyroblastMissile" />
    <ImpactRange value="1" />
    <ImpactLocation Value="TargetUnitOrPoint" />
    <ValidateTeleportRange value="30" />
    <SnapshotValidator value="KaelthasPyroblastSnapshotCombine" />
  </CEffectLaunchMissile>
  <CEffectSet id="KaelthasPyroblastLaunchMissileSet">
    <EffectArray value="KaelthasPyroblastApplyMissileReveal" />
  </CEffectSet>
  <CEffectModifyUnit id="KaelthasPyroblastPresenceOfMindModifyCooldowns">
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasPyroblast,Execute" CooldownOperation="Add" CooldownTimeUse="-10" />
    <ValidatorArray value="TargetIsHero" />
    <ValidatorArray value="KaelthasHasPyroblastPresenceOfMind" />
  </CEffectModifyUnit>
  <CEffectDamage id="KaelthasPyroblastSplashDamage" parent="StormSpell">
    <Amount value="405" />
  </CEffectDamage>
  <CEffectSwitch id="KaelthasSunfireEnchantmentMissSwitch" parent="AbilDmgMissCheck">
    <CaseDefault value="KaelthasSunfireEnchantmentDamage" />
  </CEffectSwitch>
  <CEffectDamage id="KaelthasSunfireEnchantmentDamage" parent="StormSpell">
    <Amount value="115" />
    <Flags index="Crit" value="1" />
    <SourceButtonFace value="KaelthasSunfireEnchantmentTalent" />
  </CEffectDamage>
  <CEffectSet id="KaelthasSunfireEnchantmentImpactSet">
    <EffectArray value="UniversalWeaponImpact" />
    <EffectArray value="KaelthasSunfireEnchantmentMissSwitch" />
    <EffectArray value="KaelthasSunfireEnchantmentApplyAbilityPowerBuffDummyBehavior" />
    <EffectArray value="KaelthasVerdantSpheresSunfireEnchantmentAbilityPowerBuffApplyBehavior" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasSunfireEnchantmentLaunchMissile">
    <ValidatorArray index="0" value="TargetNotDead" />
    <LaunchEffect value="VerdantSpheresRemoveSunfireEnchantmentMasteryBuff" />
    <ImpactEffect value="KaelthasSunfireEnchantmentImpactSet" />
    <SharedFlags index="TravelValidation" value="1" />
    <AmmoUnit value="KaelthasSunfireEnchantmentAttackMissile" />
    <ImpactRange value="0.5" />
  </CEffectLaunchMissile>
  <CEffectModifyUnit id="KaelthasVerdantSphereInitialDummy">
    <ImpactUnit Value="Source" />
  </CEffectModifyUnit>
  <CEffectModifyUnit id="KaelthasVerdantSpheresRefreshDummy">
    <ImpactUnit Value="Source" />
  </CEffectModifyUnit>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresActivateFlamestrikeModifyPlayer">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasFlamestrikeDummySearchArea,AreaArray[0].Radius" Value="3" />
  </CEffectModifyPlayer>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresActivateGravityLapseNetherWindModifyPlayer">
    <ValidatorArray value="KaelthasHasGravityLapseNetherWind" />
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasGravityLapseCreatePersistent,PeriodicOffsetArray[0].Y" Value="-10.600000" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasGravityLapseVerdantSpheresLaunchPersistent,PeriodicOffsetArray[0].Y" Value="-10.600000" />
    <EffectArray Operation="Set" Reference="Actor,KaelthasGravityLapseGuideVisual,Height" Value="13.000000" />
  </CEffectModifyPlayer>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresActivateLivingBombModifyPlayerCast">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Abil,KaelthasLivingBomb,Cost[0].Cooldown.TimeUse" Value="0.000" />
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
  </CEffectModifyPlayer>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresActivateLivingBombModifyPlayer">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Abil,KaelthasLivingBomb,Cost[0].Vital[Energy]" Value="0" />
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
  </CEffectModifyPlayer>
  <CEffectApplyBehavior id="KaelthasVerdantSpheresApplyActiveBehavior">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresActive" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="KaelthasVerdantSpheresApplySphereStackBehavior">
    <ValidatorArray index="0" value="KaelthasVerdantSpheresCombine" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CEffectApplyBehavior>
  <CEffectModifyUnit id="KaelthasVerdantSpheresCancelModifyCastCooldown">
    <ImpactUnit Value="Caster" />
    <Cost Abil="KaelthasVerdantSpheres,Execute" CooldownOperation="Add" CooldownTimeUse="0.5" />
  </CEffectModifyUnit>
  <CEffectSet id="KaelthasVerdantSpheresCastSet">
    <ValidatorArray value="KaelthasCasterVerdantSpheresNotActive" />
    <ValidatorArray value="KaelthasHasLT1ChargeUsedORTwinSpheresandLT2ChargesUsed" />
    <EffectArray value="KaelthasVerdantSpheresApplyActiveBehavior" />
    <EffectArray value="KaelthasVerdantSpheresFelInfusionCreateHealer" />
    <EffectArray value="KaelthasVerdantSpheresActivateFlamestrikeModifyPlayer" />
    <EffectArray value="KaelthasVerdantSpheresActivateLivingBombModifyPlayer" />
    <EffectArray value="VerdantSpheresApplySunfireEnchantmentMasteryBuff" />
    <EffectArray value="KaelthasManaTapManaGain" />
    <EffectArray value="KaelthasRemoveAbilityPowerBuffDummyBehaviorSunfireEnchantment" />
  </CEffectSet>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresDeactivateFlamestrikeModifyPlayer">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasFlamestrikeDummySearchArea,AreaArray[0].Radius" Value="2" />
  </CEffectModifyPlayer>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresDeactivateGravityLapseNetherWindModifyPlayer">
    <ValidatorArray value="KaelthasHasGravityLapseNetherWind" />
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Effect,KaelthasGravityLapseCreatePersistent,PeriodicOffsetArray[0].Y" Value="-8.000000" />
    <EffectArray Operation="Set" Reference="Actor,KaelthasGravityLapseGuideVisual,Height" Value="8.750000" />
  </CEffectModifyPlayer>
  <CEffectModifyPlayer id="KaelthasVerdantSpheresDeactivateLivingBombModifyPlayer">
    <WhichPlayer Value="Caster" />
    <EffectArray Operation="Set" Reference="Abil,KaelthasLivingBomb,Cost[0].Vital[Energy]" Value="50" />
    <EffectArray Operation="Set" Reference="Abil,KaelthasLivingBomb,Cost[0].Cooldown.TimeUse" Value="10" />
  </CEffectModifyPlayer>
  <CEffectSet id="KaelthasVerdantSpheresDeactivateSet">
    <EffectArray value="KaelthasVerdantSpheresDeactivateFlamestrikeModifyPlayer" />
    <EffectArray value="KaelthasVerdantSpheresDeactivateLivingBombModifyPlayer" />
  </CEffectSet>
  <CEffectCreateHealer id="KaelthasVerdantSpheresFelInfusionCreateHealer" parent="StormSelfOnlyHealingSpell">
    <Chance value="0" />
    <ImpactUnit Value="Caster" />
    <RechargeVitalRate value="94" />
  </CEffectCreateHealer>
  <CEffectSet id="KaelthasVerdantSpheresGainSet">
    <EffectArray value="KaelthasVerdantSpheresApplySphereStackBehavior" />
  </CEffectSet>
  <CEffectRemoveBehavior id="KaelthasVerdantSpheresRemoveActiveBehavior">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasVerdantSpheresActive" />
  </CEffectRemoveBehavior>
  <CEffectRemoveBehavior id="KaelthasVerdantSpheresRemove3SphereStackBehavior">
    <WhichUnit Value="Caster" />
    <BehaviorLink value="KaelthasVerdantSpheres" />
    <Count value="3" />
  </CEffectRemoveBehavior>
  <CEffectSet id="KaelthasVerdantSpheresRemoveSet">
    <ValidatorArray value="KaelthasCasterVerdantSpheresActive" />
    <EffectArray value="KaelthasVerdantSpheresRemoveActiveBehavior" />
    <EffectArray value="KaelthasVerdantSpheresRemove3SphereStackBehavior" />
    <EffectArray value="KaelthasVerdantSpheresConsumeCharge" />
  </CEffectSet>
  <CEffectDamage id="KaelthasWeaponDamage" parent="StormWeapon">
    <Amount value="65" />
  </CEffectDamage>
  <CEffectSet id="KaelthasWeaponImpactSet">
    <EffectArray value="UniversalWeaponImpact" />
    <EffectArray value="KaelthasWeaponDamage" />
    <EffectArray value="KaelthasLivingBombCriticalMassModifyCooldowns" />
  </CEffectSet>
  <CEffectLaunchMissile id="KaelthasWeaponLaunchMissile">
    <ValidatorArray index="0" value="TargetNotDead" />
    <ImpactEffect value="KaelthasWeaponImpactSet" />
    <SharedFlags index="TravelValidation" value="1" />
    <SharedFlags index="ValidateWeapon" value="0" />
    <AmmoUnit value="HeroKaelthasAttackMissile" />
    <ImpactRange value="0.5" />
  </CEffectLaunchMissile>
  <CEffectSet id="KaelthasWeaponLaunchMissileSet">
    <EffectArray value="KaelthasWeaponLaunchSwitch" />
    <EffectArray value="UniversalWeaponLaunchSet" />
  </CEffectSet>
  <CEffectSwitch id="KaelthasWeaponLaunchSwitch">
    <CaseArray Validator="KaelthasHasSunfireEnchantmentBuff" Effect="KaelthasSunfireEnchantmentLaunchMissile" />
    <CaseDefault value="KaelthasWeaponLaunchMissile" />
    <TargetLocationType value="Point" />
  </CEffectSwitch>
  <CEffectApplyBehavior id="PhoenixApplyManaWyrmKaelthasStack">
    <WhichUnit Value="Caster" />
    <Behavior value="ManaWyrmKaelthasStackBuff" />
  </CEffectApplyBehavior>
  <CEffectApplyBehavior id="PhoenixApplyManaWyrmPhoenixStack">
    <ValidatorArray index="0" value="IsKaelthasPhoenix" />
    <Behavior value="ManaWyrmPhoenixStackBuff" />
  </CEffectApplyBehavior>
  <CEffectEnumArea id="PhoenixManaWyrmMasteryPhoenixSearch">
    <ImpactLocation Value="SourceUnit" />
    <SearchFilters value="ImmuneToAOE,ImmuneToFriendlyAbilities,Invulnerable,Summoned;Ally,Neutral,Enemy" />
    <AreaArray MaxCount="1" Effect="PhoenixApplyManaWyrmPhoenixStack">
      <Radius value="15" />
    </AreaArray>
    <MaxCount value="1" />
  </CEffectEnumArea>
  <CEffectSet id="PhoenixManaWyrmMasterySet">
    <Chance value="0" />
    <EffectArray value="PhoenixApplyManaWyrmKaelthasStack" />
    <EffectArray value="PhoenixManaWyrmMasteryPhoenixSearch" />
  </CEffectSet>
  <CEffectApplyBehavior id="VerdantSpheresApplySunfireEnchantmentMasteryBuff">
    <Chance value="0" />
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresSunfireEnchantmentBuff" />
    <Count value="2" />
  </CEffectApplyBehavior>
  <CHero id="Kaelthas">
    <Difficulty value="Hard" />
    <AttributeId value="Kael" />
    <ProductId value="11509" />
    <HeroTierAchievementId value="5216701565553870968" />
    <Portrait value="Assets\Textures\ui_targetportrait_hero_kaelthas.dds" />
    <IntroCutsceneSize value="Medium" />
    <VariationArray value="KaelthasSilver" />
    <VariationArray value="KaelthasWhite" />
    <VariationArray value="KaelthasVar3" />
    <SkinArray value="KaelthasUltimate" />
    <SkinArray value="StormPunkKaelthas" />
    <SkinArray value="KaelthasRobot" />
    <SkinArray value="KaelthasSuper" />
    <SkinArray value="KaelthasLunar" />
    <TalentTreeArray Talent="KaelthasFlamestrikeConvection" Tier="1" Column="1" />
    <TalentTreeArray Talent="KaelthasVerdantSpheresFelInfusion" Tier="1" Column="2" />
    <TalentTreeArray Talent="KaelthasManaAddict" Tier="1" Column="3" />
    <TalentTreeArray Talent="KaelthasGravityLapseNetherWind" Tier="2" Column="1" />
    <TalentTreeArray Talent="KaelthasGravityLapseEnergyRoil" Tier="2" Column="2" />
    <TalentTreeArray Talent="KaelthasFlamestrikeManaTap" Tier="2" Column="3" />
    <TalentTreeArray Talent="KaelthasFlamestrikeBurnedFlesh" Tier="3" Column="1" />
    <TalentTreeArray Talent="KaelthasLivingBombSunKingsFury" Tier="3" Column="2" />
    <TalentTreeArray Talent="KaelthasMasterySunfireEnchantment" Tier="3" Column="3" />
    <TalentTreeArray Talent="KaelthasHeroicAbilityPhoenix" Tier="4" Column="1" />
    <TalentTreeArray Talent="KaelthasHeroicAbilityPyroblast" Tier="4" Column="2" />
    <TalentTreeArray Talent="KaelthasLivingBombPyromaniac" Tier="5" Column="1" />
    <TalentTreeArray Talent="KaelthasLivingBombBackdraft" Tier="5" Column="2" />
    <TalentTreeArray Talent="KaelthasLivingBombFissionBomb" Tier="5" Column="3" />
    <TalentTreeArray Talent="KaelthasFlamestrikeFuryOfTheSunwell" Tier="6" Column="1" />
    <TalentTreeArray Talent="KaelthasLivingBombIgnite" Tier="6" Column="2" />
    <TalentTreeArray Talent="KaelthasTwinSpheres" Tier="6" Column="3" />
    <TalentTreeArray Talent="KaelthasPhoenixRebirth" Tier="7" Column="1">
      <PrerequisiteTalentArray value="KaelthasHeroicAbilityPhoenix" />
    </TalentTreeArray>
    <TalentTreeArray Talent="KaelthasPyroblastPresenceOfMind" Tier="7" Column="2">
      <PrerequisiteTalentArray value="KaelthasHeroicAbilityPyroblast" />
    </TalentTreeArray>
    <TalentTreeArray Talent="KaelthasMasterOfFlames" Tier="7" Column="3" />
    <TalentTreeArray Talent="KaelthasMasteryFlamethrower" Tier="7" Column="4" />
    <TalentAIBuildsArray ChanceToPick="16">
      <TalentsArray value="KaelthasVerdantSpheresFelInfusion" />
      <TalentsArray value="KaelthasGravityLapseNetherWind" />
      <TalentsArray value="KaelthasLivingBombSunKingsFury" />
      <TalentsArray value="KaelthasHeroicAbilityPhoenix" />
      <TalentsArray value="KaelthasLivingBombFissionBomb" />
      <TalentsArray value="KaelthasLivingBombIgnite" />
      <TalentsArray value="KaelthasMasterOfFlames" />
    </TalentAIBuildsArray>
    <TalentAIBuildsArray ChanceToPick="16">
      <TalentsArray value="KaelthasFlamestrikeConvection" />
      <TalentsArray value="KaelthasFlamestrikeManaTap" />
      <TalentsArray value="KaelthasFlamestrikeBurnedFlesh" />
      <TalentsArray value="KaelthasHeroicAbilityPhoenix" />
      <TalentsArray value="KaelthasLivingBombBackdraft" />
      <TalentsArray value="KaelthasFlamestrikeFuryOfTheSunwell" />
      <TalentsArray value="KaelthasMasteryFlamethrower" />
    </TalentAIBuildsArray>
    <TalentAIBuildsArray ChanceToPick="16">
      <TalentsArray value="KaelthasVerdantSpheresFelInfusion" />
      <TalentsArray value="KaelthasFlamestrikeManaTap" />
      <TalentsArray value="KaelthasMasterySunfireEnchantment" />
      <TalentsArray value="KaelthasHeroicAbilityPhoenix" />
      <TalentsArray value="KaelthasLivingBombFissionBomb" />
      <TalentsArray value="KaelthasTwinSpheres" />
      <TalentsArray value="KaelthasMasterOfFlames" />
    </TalentAIBuildsArray>
    <TalentAIBuildsArray ChanceToPick="16">
      <TalentsArray value="KaelthasManaAddict" />
      <TalentsArray value="KaelthasGravityLapseNetherWind" />
      <TalentsArray value="KaelthasLivingBombSunKingsFury" />
      <TalentsArray value="KaelthasHeroicAbilityPyroblast" />
      <TalentsArray value="KaelthasLivingBombPyromaniac" />
      <TalentsArray value="KaelthasLivingBombIgnite" />
      <TalentsArray value="KaelthasMasterOfFlames" />
    </TalentAIBuildsArray>
    <TalentAIBuildsArray AIOnly="1" ChanceToPick="16">
      <TalentsArray value="KaelthasVerdantSpheresFelInfusion" />
      <TalentsArray value="KaelthasGravityLapseNetherWind" />
      <TalentsArray value="KaelthasMasterySunfireEnchantment" />
      <TalentsArray value="KaelthasHeroicAbilityPyroblast" />
      <TalentsArray value="KaelthasLivingBombBackdraft" />
      <TalentsArray value="KaelthasTwinSpheres" />
      <TalentsArray value="KaelthasPyroblastPresenceOfMind" />
    </TalentAIBuildsArray>
    <TalentAIBuildsArray AIOnly="1" ChanceToPick="16">
      <TalentsArray value="KaelthasManaAddict" />
      <TalentsArray value="KaelthasGravityLapseEnergyRoil" />
      <TalentsArray value="KaelthasMasterySunfireEnchantment" />
      <TalentsArray value="KaelthasHeroicAbilityPhoenix" />
      <TalentsArray value="KaelthasLivingBombFissionBomb" />
      <TalentsArray value="KaelthasLivingBombIgnite" />
      <TalentsArray value="KaelthasMasterOfFlames" />
    </TalentAIBuildsArray>
    <VariationIcon value="Assets\Textures\ui_glues_swatch_red.dds" />
    <Universe value="Warcraft" />
    <UniverseIcon value="Assets\Textures\UI_Glues_Store_GameIcon_Wow.dds" />
    <LevelScalingArray>
      <Modifications>
        <Catalog value="Unit" />
        <Entry value="HeroKaelthas" />
        <Field value="LifeStart" />
        <Value value="0.040000" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Unit" />
        <Entry value="HeroKaelthas" />
        <Field value="LifeMax" />
        <Value value="0.040000" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Unit" />
        <Entry value="HeroKaelthas" />
        <Field value="LifeRegenRate" />
        <Value value="0.040000" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasWeaponDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <LevelScalingArray Ability="KaelthasFlamestrike">
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <LevelScalingArray Ability="KaelthasLivingBomb">
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombDoTDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombExplosionDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombImpactDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <LevelScalingArray Ability="KaelthasPyroblast">
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasPyroblastDamage" />
        <Field value="Amount" />
        <Value value="0.050000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasPyroblastSplashDamage" />
        <Field value="Amount" />
        <Value value="0.050000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <LevelScalingArray Ability="KaelthasPhoenix">
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasPhoenixWeaponDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasPhoenixMissileDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <LevelScalingArray Ability="KaelthasVerdantSpheres">
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasSunfireEnchantmentDamage" />
        <Field value="Amount" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
      <Modifications>
        <Catalog value="Effect" />
        <Entry value="KaelthasVerdantSpheresFelInfusionCreateHealer" />
        <Field value="RechargeVitalRate" />
        <Value value="0.040000" />
        <AffectedByAbilityPower value="1" />
        <AffectedByOverdrive value="1" />
      </Modifications>
    </LevelScalingArray>
    <HeroAbilArray Abil="KaelthasFlamestrike" Button="KaelthasFlamestrike">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
    </HeroAbilArray>
    <HeroAbilArray Abil="KaelthasLivingBomb" Button="KaelthasLivingBomb">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
    </HeroAbilArray>
    <HeroAbilArray Abil="KaelthasGravityLapse" Button="KaelthasGravityLapse">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
    </HeroAbilArray>
    <HeroAbilArray Abil="KaelthasPhoenix" Button="KaelthasPhoenix">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
      <Flags index="Heroic" value="1" />
    </HeroAbilArray>
    <HeroAbilArray Abil="KaelthasPyroblast" Button="KaelthasPyroblast">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
      <Flags index="Heroic" value="1" />
    </HeroAbilArray>
    <HeroAbilArray Abil="KaelthasVerdantSpheres" Button="KaelthasVerdantSpheres">
      <Flags index="ShowInHeroSelect" value="1" />
      <Flags index="UsesCharges" value="1" />
      <Flags index="AffectedByCooldownReduction" value="1" />
      <Flags index="Trait" value="1" />
    </HeroAbilArray>
    <AllowedMountCategoryArray value="Ride" />
    <AllowedMountCategoryArray value="Ridebeast" />
    <AllowedMountCategoryArray value="Ridebike" />
    <AllowedMountCategoryArray value="Ridesurf" />
    <DefaultMount value="HorseCommon" />
    <SelectScreenButtonImage value="Assets\Textures\storm_ui_ingame_heroselect_btn_kaelthas.dds" />
    <Role value="Damage" />
    <RolesMultiClass value="Damage" />
    <CollectionCategory value="Damage" />
    <Flags index="GoodForModeA" value="1" />
    <Flags index="GoodForModeB" value="1" />
    <Ratings>
      <Damage value="9" />
      <Utility value="5" />
      <Survivability value="3" />
      <Complexity value="7" />
    </Ratings>
    <ReleaseDate Month="5" Day="12" Year="2015" />
    <VoiceLineArray value="KaelthasBase_VoiceLine01" />
    <VoiceLineArray value="KaelthasBase_VoiceLine02" />
    <VoiceLineArray value="KaelthasBase_VoiceLine03" />
    <VoiceLineArray value="KaelthasBase_VoiceLine04" />
    <VoiceLineArray value="KaelthasBase_VoiceLine05" />
    <Rarity value="Epic" />
  </CHero>
  <CLight id="Home_Kaelthas" parent="default">
    <ToDInfoArray index="0" Id="Home_Kaelthas" OperatorHDR="4" Colorize="1">
      <AmbientColor X="0.298039" Y="0.427451" Z="0.870588" />
      <Param index="HDRExposure" value="1.000000" />
      <Param index="HDRBloomThreshold" value="0.850000" />
      <Param index="HDRWhitePoint" value="1.850000" />
      <Param index="HDREmisMultiplier" value="1.500000" />
      <Param index="TerrainSpecularExp" value="11.210000" />
      <Param index="TerrainHDRSpecular" value="3.750000" />
      <Param index="CreepSpecularExp" value="30.000000" />
      <Param index="CreepHDRSpecMultiplier" value="3.000000" />
      <Param index="ColorizationBlend" value="0.000000" />
      <DirectionalLight index="Key" ColorMultiplier="0.400000" SpecColorMultiplier="1.000000">
        <Color X="0.674510" Y="0.674510" Z="0.674510" />
        <SpecularColor X="0.576471" Y="0.556863" Z="0.866667" />
        <Direction X="0.209112" Y="0.679729" Z="-0.703023" />
      </DirectionalLight>
      <DirectionalLight index="Fill" ColorMultiplier="0.214000">
        <Color X="0.403922" Y="1.000000" Z="0.603922" />
        <Direction X="0.974910" Y="0.139271" Z="0.173648" />
      </DirectionalLight>
      <DirectionalLight index="Back" ColorMultiplier="0.000000">
        <Color X="0.109804" Y="0.364706" Z="0.568627" />
        <Direction X="-0.871676" Y="-0.196760" Z="0.448851" />
      </DirectionalLight>
    </ToDInfoArray>
    <EditorCategories value="LightGroup:UI" />
  </CLight>
  <CLight id="Home_Kaelthas_Low" parent="default">
    <ToDInfoArray index="0" Id="Home_Kaelthas_Low" OperatorHDR="4">
      <AmbientColor X="0.149020" Y="0.141176" Z="0.368627" />
      <Param index="HDRExposure" value="1.000000" />
      <Param index="HDRBloomThreshold" value="0.850000" />
      <Param index="HDRWhitePoint" value="1.850000" />
      <Param index="HDREmisMultiplier" value="1.500000" />
      <Param index="TerrainSpecularExp" value="11.210000" />
      <Param index="TerrainHDRSpecular" value="3.750000" />
      <Param index="CreepSpecularExp" value="30.000000" />
      <Param index="CreepHDRSpecMultiplier" value="3.000000" />
      <Param index="ColorizationBlend" value="0.000000" />
      <DirectionalLight index="Key" ColorMultiplier="1.000000" SpecColorMultiplier="1.216000">
        <Color X="0.788235" Y="0.694118" Z="0.560784" />
        <SpecularColor X="0.576471" Y="0.556863" Z="0.866667" />
        <Direction X="-0.526112" Y="0.605435" Z="-0.597206" />
      </DirectionalLight>
      <DirectionalLight index="Fill" ColorMultiplier="0.600000">
        <Color X="0.929412" Y="0.129412" Z="1.000000" />
        <Direction X="0.963903" Y="0.150943" Z="0.219335" />
      </DirectionalLight>
      <DirectionalLight index="Back" ColorMultiplier="1.380000">
        <Color X="0.066667" Y="0.568627" Z="1.000000" />
        <Direction X="-0.976975" Y="0.138696" Z="0.162121" />
      </DirectionalLight>
    </ToDInfoArray>
    <EditorCategories value="LightGroup:UI" />
  </CLight>
  <CMoverMissile id="KaelthasFlamestrikeVerdantSpheresMissileClose">
    <MotionPhases>
      <Driver value="Ballistic" />
      <Acceleration value="3200" />
      <Gravity value="45" />
      <ActorTracking value="Actual" />
      <Outro value="-0.5,-0.2" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
      <FlightTime value="0.25" />
      <OutroAltitude value="-0.3,-0.1" />
    </MotionPhases>
    <MotionPhases Driver="Guidance" MaxSpeed="40" YawPitchRoll="MAX" />
  </CMoverMissile>
  <CMoverMissile id="KaelthasFlamestrikeVerdantSpheresMissileLob">
    <MotionPhases>
      <Driver value="Ballistic" />
      <Acceleration value="-1" />
      <Gravity value="30" />
      <Outro value="-0.25,-0.1" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
      <FlightTime value="0.75,-1" />
    </MotionPhases>
    <MotionPhases Driver="Guidance" MaxSpeed="40" YawPitchRoll="MAX" />
  </CMoverMissile>
  <CMoverMissile id="KaelthasFlamestrikeVerdantSpheresMissilelong">
    <MotionPhases>
      <Driver value="AdaptableParabola" />
      <Speed value="15" />
      <Gravity value="1" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <AdaptableParabolaClearance value="3,1" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasGravityLapseMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="9001" />
      <Speed value="13" />
      <MaxSpeed value="13" />
      <IgnoresClearanceChecks value="1" />
      <YawPitchRoll value="MAX" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasGravityLapseNetherWindMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="9001" />
      <Speed value="13" />
      <MaxSpeed value="13" />
      <IgnoresClearanceChecks value="1" />
      <YawPitchRoll value="MAX" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasGravityLapseVerdantSpheresMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="-5" />
      <Speed value="15" />
      <MinSpeed value="5" />
      <MaxSpeed value="15" />
      <IgnoresClearanceChecks value="1" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
      <Overlays Scale="1,1" />
    </MotionPhases>
    <MotionOverlays>
      <Type value="Revolver" />
      <Wavelength value="3,5" />
      <RevolverSpeed value="179.2968" />
      <RevolverSpeedRange value="179.2968" />
      <RevolverMaxSpeed value="719.2968" />
      <RevolverMaxSpeedRange value="0" />
      <RevolverAccel value="337.5" />
      <RevolverAccelRange value="337.5" />
    </MotionOverlays>
  </CMoverMissile>
  <CMoverMissile id="KaelthasLivingBombVerdantSpheresMissileLeft">
    <MotionPhases>
      <Driver value="Throw" />
      <Acceleration value="50" />
      <MaxSpeed value="32" />
      <Outro value="0,3" />
      <ThrowVector X="1" />
    </MotionPhases>
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="128" />
      <MaxSpeed value="128" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5499.8437" />
      <YawPitchRollAccel value="5499.8437" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasLivingBombVerdantSpheresMissileRight">
    <MotionPhases>
      <Driver value="Throw" />
      <Acceleration value="50" />
      <MaxSpeed value="32" />
      <Outro value="0,3" />
      <ThrowVector X="-1" />
    </MotionPhases>
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="128" />
      <MaxSpeed value="128" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5499.8437" />
      <YawPitchRollAccel value="5499.8437" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasLivingBombVerdantSpheresMissileUp">
    <MotionPhases>
      <Driver value="Throw" />
      <Acceleration value="50" />
      <MaxSpeed value="32" />
      <Outro value="0,3" />
      <ThrowVector Z="1" />
    </MotionPhases>
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="128" />
      <MaxSpeed value="128" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5499.8437" />
      <YawPitchRollAccel value="5499.8437" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasPhoenixMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="9001" />
      <Speed value="12" />
      <MaxSpeed value="12" />
      <IgnoresClearanceChecks value="1" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasPhoenixWeaponMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="3200" />
      <Speed value="25" />
      <MaxSpeed value="25" />
      <ActorTracking value="Actual" />
      <RotationLaunchActorType value="LaunchToTarget" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasPhoenixWeaponMissileShort">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="3200" />
      <Speed value="10" />
      <MaxSpeed value="10" />
      <ActorTracking value="Actual" />
      <RotationLaunchActorType value="LaunchToTarget" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
    </MotionPhases>
  </CMoverMissile>
  <CMoverMissile id="KaelthasPyroblastMissile">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="1" />
      <MinSpeed value="5" />
      <MaxSpeed value="9" />
      <IgnoresClearanceChecks value="1" />
      <ThrowBandYaw value="-360,-360,-360,-360" />
      <ThrowBandPitch value="-360,-360,-360,-360" />
      <YawPitchRoll value="5759.6484" />
    </MotionPhases>
    <RotationIgnoredByUnit value="1" />
  </CMoverMissile>
  <CMoverMissile id="KaelthasPyroblastMissileFast">
    <MotionPhases>
      <Driver value="Guidance" />
      <Acceleration value="9001" />
      <Speed value="15" />
      <MaxSpeed value="15" />
      <IgnoresClearanceChecks value="1" />
      <YawPitchRoll value="MAX" />
    </MotionPhases>
  </CMoverMissile>
  <CRequirement id="KaelthasHasUnlockedArcaneBarrier">
    <NodeArray index="Use" Link="CountBehaviorKaelthasArcaneBarrierUnlockedCompleteOnlyAtUnit" />
  </CRequirement>
  <CRequirement id="KaelthasHas3VerdantSphereStacks">
    <NodeArray index="Use" Link="EqCountBehaviorKaelthasVerdantSpheresCompleteOnlyAtUnit3" />
  </CRequirement>
  <CRequirement id="KaelthasHas3VerdantSphereStacksOrSpheresActive">
    <NodeArray index="Use" Link="EqCountBehaviorKaelthasVerdantSpheresCompleteOnlyAtUnit3" />
  </CRequirement>
  <CRequirement id="KaelthasHasPhoenixRetargetReady">
    <NodeArray index="Use" Link="EqCountBehaviorKaelthasPhoenixTimedLifeCompleteOnlyAtUnit1" />
    <NodeArray index="Show" Link="AndEqCountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit1EqCountUnitKaelthasPhoenixQueuedOrBetter1" />
  </CRequirement>
  <CRequirement id="KaelthasHasVerdantSpheresActive">
    <NodeArray index="Show" Link="EqCountBehaviorKaelthasVerdantSpheresActiveCompleteOnlyAtUnit1" />
  </CRequirement>
  <CRequirement id="KaelthasPyroblastMissileExists">
    <NodeArray index="Show" Link="GTECountUnitKaelthasPyroblastMissileQueuedOrBetter1" />
  </CRequirement>
  <CRequirementCountBehavior id="CountBehaviorKaelthasArcaneBarrierUnlockedCompleteOnlyAtUnit">
    <Flags index="TechTreeCheat" value="0" />
    <Count Link="KaelthasArcaneBarrierUnlocked" State="CompleteOnlyAtUnit" />
  </CRequirementCountBehavior>
  <CRequirementAnd id="AndEqCountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit1EqCountUnitKaelthasPhoenixQueuedOrBetter1">
    <OperandArray value="EqCountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit1" />
    <OperandArray value="EqCountUnitKaelthasPhoenixQueuedOrBetter1" />
  </CRequirementAnd>
  <CRequirementCountBehavior id="CountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit">
    <Flags index="TechTreeCheat" value="0" />
    <Count Link="KaelthasPhoenixRetargetReady" State="CompleteOnlyAtUnit" />
  </CRequirementCountBehavior>
  <CRequirementCountBehavior id="CountBehaviorKaelthasPhoenixTimedLifeCompleteOnlyAtUnit">
    <Flags index="TechTreeCheat" value="0" />
    <Count Link="KaelthasPhoenixTimedLife" State="CompleteOnlyAtUnit" />
  </CRequirementCountBehavior>
  <CRequirementCountUnit id="CountUnitKaelthasPhoenixQueuedOrBetter">
    <Flags index="TechTreeCheat" value="0" />
    <Count Link="KaelthasPhoenix" State="QueuedOrBetter" />
  </CRequirementCountUnit>
  <CRequirementEq id="EqCountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit1">
    <OperandArray index="0" value="CountBehaviorKaelthasPhoenixRetargetReadyCompleteOnlyAtUnit" />
    <OperandArray index="1" value="1" />
  </CRequirementEq>
  <CRequirementEq id="EqCountBehaviorKaelthasPhoenixTimedLifeCompleteOnlyAtUnit1">
    <OperandArray index="0" value="CountBehaviorKaelthasPhoenixTimedLifeCompleteOnlyAtUnit" />
    <OperandArray index="1" value="1" />
  </CRequirementEq>
  <CRequirementEq id="EqCountUnitKaelthasPhoenixQueuedOrBetter1">
    <OperandArray index="0" value="CountUnitKaelthasPhoenixQueuedOrBetter" />
    <OperandArray index="1" value="1" />
  </CRequirementEq>
  <CRequirementConst id="25">
    <Value value="25" />
  </CRequirementConst>
  <CRequirementCountBehavior id="CountBehaviorKaelthasVerdantSpheresActiveCompleteOnlyAtUnit">
    <Flags index="TechTreeCheat" value="0" />
    <Tooltip value="" />
    <Count Link="KaelthasVerdantSpheresActive" State="CompleteOnlyAtUnit" />
  </CRequirementCountBehavior>
  <CRequirementCountBehavior id="CountBehaviorKaelthasVerdantSpheresCompleteOnlyAtUnit">
    <Flags index="TechTreeCheat" value="0" />
    <Tooltip value="" />
    <Count Link="KaelthasVerdantSpheres" State="CompleteOnlyAtUnit" />
  </CRequirementCountBehavior>
  <CRequirementCountUnit id="CountUnitKaelthasPyroblastMissileQueuedOrBetter">
    <Flags index="TechTreeCheat" value="0" />
    <Count Link="KaelthasPyroblastMissile" State="QueuedOrBetter" />
  </CRequirementCountUnit>
  <CRequirementEq id="EqCountBehaviorKaelthasVerdantSpheresActiveCompleteOnlyAtUnit1">
    <Tooltip value="" />
    <OperandArray index="0" value="CountBehaviorKaelthasVerdantSpheresActiveCompleteOnlyAtUnit" />
    <OperandArray index="1" value="1" />
  </CRequirementEq>
  <CRequirementEq id="EqCountBehaviorKaelthasVerdantSpheresCompleteOnlyAtUnit3">
    <Tooltip value="" />
    <OperandArray index="0" value="CountBehaviorKaelthasVerdantSpheresCompleteOnlyAtUnit" />
    <OperandArray index="1" value="3" />
  </CRequirementEq>
  <CRequirementGTE id="GTECountUnitKaelthasPyroblastMissileQueuedOrBetter1">
    <OperandArray index="0" value="CountUnitKaelthasPyroblastMissileQueuedOrBetter" />
    <OperandArray index="1" value="1" />
  </CRequirementGTE>
  <CRewardHero id="Kaelthas">
    <License value="11336" />
  </CRewardHero>
  <CRewardPortrait id="KaelthasBasic" parent="HeroPortraitParent">
    <IconFile value="$HeroPortraits3" />
    <IconSlot value="10" />
    <Hero value="Kaelthas" />
  </CRewardPortrait>
  <CRewardPortrait id="KaelthasEpic" parent="HeroPortraitParentEpic">
    <IconFile value="$HeroPortraits4" />
    <IconSlot value="10" />
    <Hero value="Kaelthas" />
  </CRewardPortrait>
  <CTalent id="KaelthasLivingBombIgnite">
    <Face value="KaelthasLivingBombIgnite" />
    <Abil value="KaelthasLivingBomb" />
  </CTalent>
  <CTalent id="KaelthasLivingBombSunKingsFury">
    <Face value="KaelthasLivingBombSunKingsFury" />
    <Abil value="KaelthasLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombRemoveSunKingsFuryTalentDebuffSource" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasFlamestrikeBurnedFlesh">
    <Face value="KaelthasBurnedFleshTalent" />
    <Abil value="KaelthasFlamestrike" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeBurnedFleshAddHeroHitCounter" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasMasterOfFlames">
    <Abil value="KaelthasLivingBomb" />
    <Face value="KaelthasMasterOfFlamesLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelThasLivingBombMasterOfFlameApplyChainBombTarget" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasTwinSpheres">
    <Face value="KaelthasVerdantSpheresTwinSpheresTalent" />
    <Abil value="KaelthasVerdantSpheres" />
    <RankArray>
      <BehaviorArray value="KaelthasVerdantSpheresTwinSpheresApply" />
    </RankArray>
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Entry value="KaelthasVerdantSpheres" />
        <Field value="Cost[0].Charge.CountMax" />
        <FieldIsInteger value="1" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Entry value="KaelthasVerdantSpheres" />
        <Field value="Cost[0].Charge.HideCount" />
        <FieldIsInteger value="1" />
        <Value value="-1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasVerdantSpheresRefreshAllStack" />
        <Field value="Count" />
        <FieldIsInteger value="1" />
        <Value value="3.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasVerdantSpheresConsumeCharge" />
        <Field value="Cost[0].CooldownTimeUse" />
        <FieldIsInteger value="1" />
        <Value value="-6.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasEvocation">
    <Face value="KaelthasEvocationTalent" />
    <RankArray Face="KaelthasEvocationTalentSimple" />
  </CTalent>
  <CTalent id="KaelthasFlamestrikeBurnNotice">
    <Face value="KaelthasFlamestrikeBurnNoticeTalent" />
    <RankArray Face="KaelthasFlamestrikeBurnNoticeTalentSimple" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeBurnNoticeImpactSet" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasFlamestrikeCombustion">
    <Face value="KaelthasFlamestrikeCombustionTalent" />
    <RankArray Face="KaelthasFlamestrikeCombustionTalentSimple" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeCombustionApplyBehavior" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasFlamestrikeConvection">
    <Face value="KaelthasFlamestrikeConvectionTalent" />
    <Abil value="KaelthasFlamestrike" />
    <RankArray>
      <BehaviorArray value="KaelthasFlamestrikeConvectionQuestToken" />
    </RankArray>
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeConvectionModifyQuestToken" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeConvectionResetQuestToken" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeDamage" />
        <Field value="AmountArray[Quest]" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Accumulator" />
        <Entry value="KaelthasFlamestrikeConvectionAccumulator" />
        <Field value="Scale" />
      </Modifications>
    </AbilityModificationArray>
    <QuestData StackBehavior="KaelthasFlamestrikeConvectionQuestToken" TargetCount="20" />
  </CTalent>
  <CTalent id="KaelthasFlamestrikeFuryOfTheSunwell">
    <Face value="KaelthasFlamestrikeFuryOfTheSunwellTalent" />
    <Abil value="KaelthasFlamestrike" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeFuryOfTheSunwellCreatePersistent" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasFlamestrikeFuryOfTheSunwellVerdantSpheresCreatePersistent" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasFlamestrikeManaTap">
    <Face value="KaelthasManaTapTalent" />
    <Abil value="KaelthasVerdantSpheres" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasManaTapManaGain" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasGravityLapseEnergyRoil">
    <Face value="KaelthasGravityLapseEnergyRoilTalent" />
    <Abil value="KaelthasGravityLapse" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseEnergyRoilModifyCooldown" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Entry value="KaelthasGravityLapse" />
        <Field value="Cost[0].Vital[Energy]" />
        <Value value="-70.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasGravityLapseGravityThrow">
    <Face value="KaelthasGravityLapseGravityThrowTalent" />
    <Abil value="KaelthasGravityLapse" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Behavior" />
        <Entry value="KaelthasGravityLapseTarget" />
        <Field value="Duration" />
        <Value value="1.330000" />
      </Modifications>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Behavior" />
        <Entry value="KaelthasGravityLapseTargetV" />
        <Field value="Duration" />
        <Value value="1.330000" />
      </Modifications>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Behavior" />
        <Entry value="KaelthasGravityLapseTargetLift" />
        <Field value="Duration" />
        <Value value="1.330000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasGravityLapseNetherWind">
    <Face value="KaelthasGravityLapseNetherWindTalent" />
    <Abil value="KaelthasGravityLapse" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasGravityLapseGuideVisual" />
        <Field value="Height" />
        <Value value="3.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseCreatePersistent" />
        <Field value="PeriodicOffsetArray[0].Y" />
        <Value value="-2.500000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseVerdantSpheresLaunchPersistent" />
        <Field value="PeriodicOffsetArray[0].Y" />
        <Value value="-2.500000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseNetherWindRestoreMana" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseMissileScanPersistent" />
        <Field value="PeriodCount" />
        <FieldIsInteger value="1" />
        <Value value="4.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasGravityLapseTriOptimal">
    <Face value="KaelthasGravityLapseTriOptimalTalent" />
    <Abil value="KaelthasGravityLapse" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasGravityLapseTriOptimalSet" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasHeroicAbilityPhoenix">
    <Face value="KaelthasPhoenix" />
    <Abil value="KaelthasPhoenix" />
    <RankArray>
      <BehaviorArray value="Ultimate1Unlocked" />
      <BehaviorArray value="KaelthasPhoenixTrackingBehavior" />
    </RankArray>
    <Active value="1" />
  </CTalent>
  <CTalent id="KaelthasHeroicAbilityPyroblast">
    <Face value="KaelthasPyroblast" />
    <Abil value="KaelthasPyroblast" />
    <RankArray>
      <BehaviorArray value="Ultimate2Unlocked" />
    </RankArray>
    <Active value="1" />
  </CTalent>
  <CTalent id="KaelthasLivingBombBackdraft">
    <Face value="KaelthasLivingBombBackdraftTalent" />
    <Abil value="KaelthasLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombBackdraftApplyBehavior" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasLivingBombChainBomb">
    <Face value="KaelthasLivingBombChainBombTalent" />
    <Abil value="KaelthasLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombChainBombSearchAreaSource" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombChainBombSearchAreaTarget" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasLivingBombCriticalMass">
    <Face value="KaelthasLivingBombCriticalMassTalent" />
    <RankArray Face="KaelthasLivingBombCriticalMassTalentSimple" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombCriticalMassModifyCooldowns" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasLivingBombFissionBomb">
    <Face value="KaelthasLivingBombFissionBombTalent" />
    <Abil value="KaelthasLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombExplosionSearchAreaSource" />
        <Field value="AreaArray[0].Radius" />
        <Value value="1.200000" />
      </Modifications>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombExplosionSearchAreaTarget" />
        <Field value="AreaArray[0].Radius" />
        <Value value="1.200000" />
      </Modifications>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombChainBombSearchAreaSource" />
        <Field value="AreaArray[0].Radius" />
        <Value value="1.200000" />
      </Modifications>
      <Modifications>
        <Type value="MultiplyLevelModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombChainBombSearchAreaTarget" />
        <Field value="AreaArray[0].Radius" />
        <Value value="1.200000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasLivingBombExplosionRing" />
        <Field value="Scale" />
        <Value value="0.200000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasLivingBombPyromaniac">
    <Face value="KaelthasLivingBombPyromaniacTalent" />
    <Abil value="KaelthasLivingBomb" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasLivingBombPyromaniacModifyCooldowns" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasManaAddict">
    <Face value="KaelthasManaAddictTalent" />
    <RankArray>
      <BehaviorArray value="KaelthasManaAddictQuestToken" />
      <BehaviorArray value="KaelthasManaAddictManaRegen" />
      <BehaviorArray value="KaelthasArcaneBarrierAbility" />
    </RankArray>
    <QuestData StackBehavior="KaelthasManaAddictQuestToken" TargetCount="20" />
  </CTalent>
  <CTalent id="KaelthasMasteryFlamethrower">
    <Face value="KaelthasFlamethrowerTalent" />
    <Abil value="KaelthasFlamestrike" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Entry value="KaelthasFlamestrike" />
        <Field value="Range[0]" />
        <Value value="4.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasFlamestrikeRangeSplat" />
        <Field value="Scale" />
        <Value value="4.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasMasteryHeatingUp">
    <Face value="KeelthasHeatingUpTalent" />
    <RankArray Face="KaelthasHeatingUpTalentSimple" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Entry value="KaelthasPyroblast" />
        <Field value="Range[0]" />
        <Value value="3.250000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasPyroblastRangeSplat" />
        <Field value="Scale" />
        <Value value="3.250000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasPyroblastRangeSlop" />
        <Field value="Range" />
        <Value value="3.250000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasMasteryManaWyrm">
    <Face value="KaelthasManaWyrmTalent" />
    <RankArray Face="KaelthasManaWyrmTalentSimple" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="PhoenixManaWyrmMasterySet" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasMasterySunfireEnchantment">
    <Face value="KaelthasSunfireEnchantmentTalent" />
    <Abil value="KaelthasVerdantSpheres" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="VerdantSpheresApplySunfireEnchantmentMasteryBuff" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="VerdantSpheresRemoveSunfireEnchantmentMasteryBuff" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasPhoenixRebirth">
    <Face value="KaelthasPhoenixRebirthTalent" />
    <Abil value="KaelthasPhoenix" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Behavior" />
        <Entry value="KaelthasPhoenixTimedLife" />
        <Field value="Duration" />
        <Value value="7.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasPhoenixApplyRetargetReadyBehavior" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasPhoenixApplyRebirthTalentRetargetReadyBehaviorSource" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasPyroblastPresenceOfMind">
    <Face value="KaelthasPyroblastPresenceOfMindTalent" />
    <Abil value="KaelthasPyroblast" />
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasPyroblastImpactSearch" />
        <Field value="AreaArray[0].Radius" />
        <Value value="1.500000" />
      </Modifications>
      <Modifications>
        <Type value="CatalogReplacement" />
        <Catalog value="Model" />
        <Entry value="KaelthasPyroblastImpactSplat" />
        <StringReplacement value="KaelthasPyroblastPOMImpactSplat" />
      </Modifications>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Actor" />
        <Entry value="KaelthasPyroblastWarning" />
        <Field value="Scale" />
        <Value value="0.420000" />
      </Modifications>
      <Modifications>
        <Type value="CatalogReplacement" />
        <Catalog value="Model" />
        <Entry value="KaelthasPyroblastImpactSplat" />
        <StringReplacement value="KaelthasPyroblastImpactSplatTA" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTalent id="KaelthasVerdantSpheresFelInfusion">
    <Face value="KaelthasVerdantSpheresFelInfusionTalent" />
    <Abil value="KaelthasVerdantSpheres" />
    <RankArray>
      <BehaviorArray value="KaelthasFelInfusion" />
    </RankArray>
    <AbilityModificationArray>
      <Modifications>
        <Type value="FlatModification" />
        <Catalog value="Effect" />
        <Entry value="KaelthasVerdantSpheresFelInfusionCreateHealer" />
        <Field value="Chance" />
        <Value value="1.000000" />
      </Modifications>
    </AbilityModificationArray>
  </CTalent>
  <CTargetSortBehaviorCount id="KaelthasLivingChainBombTargetDoesNotHaveBehavior">
    <WhichUnit Value="Target" />
    <Behavior value="KaelthasLivingBombChainBombTarget" />
  </CTargetSortBehaviorCount>
  <CTargetSortBehaviorCount id="KaelthasLivingBombTargetDoesNotHaveBehavior">
    <WhichUnit Value="Target" />
    <Behavior value="KaelthasLivingBombTarget" />
  </CTargetSortBehaviorCount>
  <CUnit id="HeroKaelthas" parent="StormHeroMounted">
    <LifeStart value="1520" />
    <LifeMax value="1520" />
    <LifeRegenRate value="3.168" />
    <AbilArray Link="KaelthasVerdantSpheres" />
    <AbilArray Link="KaelthasFlamestrike" />
    <AbilArray Link="KaelthasLivingBomb" />
    <AbilArray Link="KaelthasGravityLapse" />
    <AbilArray Link="KaelthasPhoenix" />
    <AbilArray Link="KaelthasPhoenixRetarget" />
    <AbilArray Link="KaelthasPyroblast" />
    <BehaviorArray Link="ExcellentMana" />
    <BehaviorArray Link="KaelthasVerdantSphereGenerator" />
    <WeaponArray Link="KaelthasHeroWeapon" />
    <CardLayouts index="0">
      <LayoutButtons Face="KaelthasPhoenixRetarget" Type="AbilCmd" AbilCmd="KaelthasPhoenixRetarget,Execute" Slot="Heroic" />
      <LayoutButtons Face="KaelthasPyroblast" Type="AbilCmd" AbilCmd="KaelthasPyroblast,Execute" Slot="Heroic" />
      <LayoutButtons Face="KaelthasPhoenix" Type="AbilCmd" AbilCmd="KaelthasPhoenix,Execute" Slot="Heroic" />
      <LayoutButtons Face="KaelthasVerdantSpheresActive" Type="Passive" Requirements="KaelthasHasVerdantSpheresActive" Slot="Trait" />
      <LayoutButtons Face="KaelthasVerdantSpheres" Type="AbilCmd" AbilCmd="KaelthasVerdantSpheres,Execute" Slot="Trait" />
      <LayoutButtons Face="KaelthasFlamestrike" Type="AbilCmd" AbilCmd="KaelthasFlamestrike,Execute" Slot="Ability1" />
      <LayoutButtons Face="KaelthasLivingBomb" Type="AbilCmd" AbilCmd="KaelthasLivingBomb,Execute" Slot="Ability2" />
      <LayoutButtons Face="KaelthasGravityLapse" Type="AbilCmd" AbilCmd="KaelthasGravityLapse,Execute" Slot="Ability3" />
    </CardLayouts>
    <Radius value="0.8125" />
    <InnerRadius value="0.8125" />
    <AIThinkTree value="AI/Kaelthas.aitree" />
    <AIEvalFactor value="1.2" />
    <InitializerFunction value="libGDHL_gf_HeroKaelthasIncrementHeroCountFunction" />
    <DestructionFunction value="libGDHL_gf_HeroKaelthasDecrementHeroCountFunction" />
    <EffectArray index="Birth" value="KaelthasVerdantSpheresRefreshAllStack" />
    <EffectArray index="Death" value="KaelthasFlamestrikeConvectionResetQuestToken" />
    <EffectArray index="Revive" value="KaelthasVerdantSpheresRefreshAllStack" />
    <HeroPlaystyleFlags index="EnergyImportant" value="1" />
    <HeroPlaystyleFlags index="Ganker" value="1" />
    <HeroPlaystyleFlags index="RoleCaster" value="1" />
    <HeroPlaystyleFlags index="TowerPusher" value="1" />
    <HeroPlaystyleFlags index="WaveClearer" value="1" />
  </CUnit>
  <CUnit id="HeroKaelthasAttackMissile" parent="MISSILE_INVULNERABLE">
    <Mover value="HeroMissileSpeed22Ribbon" />
  </CUnit>
  <CUnit id="KaelthasFlamestrikeVerdantSpheresMissile" parent="MISSILE_INVULNERABLE">
    <Mover value="KaelthasFlamestrikeVerdantSpheresMissilelong" />
  </CUnit>
  <CUnit id="KaelthasGravityLapseEnhancedMissile" parent="MISSILE_INVULNERABLE">
    <BehaviorArray Link="KaelthasGravityLapseVerdantSphereDummyBehavior" />
  </CUnit>
  <CUnit id="KaelthasGravityLapseMissile" parent="MISSILE_INVULNERABLE" />
  <CUnit id="KaelthasGravityLapseVerdantSpheresMissile" parent="MISSILE_INVULNERABLE" />
  <CUnit id="KaelthasLivingBombVerdantSpheresMissile" parent="MISSILE_INVULNERABLE" />
  <CUnit id="KaelthasPhoenix" parent="StormSummonFigment">
    <FlagArray index="Untargetable" value="1" />
    <Acceleration value="12" />
    <Deceleration value="12" />
    <StationaryTurningRate value="1440" />
    <TurningRate value="1440" />
    <Sight value="6" />
    <AttackTargetPriority value="10" />
    <AbilArray Link="stop" />
    <AbilArray Link="KaelthasPhoenixAttack" />
    <AbilArray Link="KaelthasPhoenixRetarget" />
    <WeaponArray Link="KaelthasPhoenixWeapon" />
    <WeaponArray Link="KaelthasPhoenixWeaponNonHeroes" />
    <CardLayouts>
      <LayoutButtons Face="Stop" Type="AbilCmd" AbilCmd="stop,Stop" Slot="Stop" />
      <LayoutButtons Face="Attack" Type="AbilCmd" AbilCmd="KaelthasPhoenixAttack,Execute" Slot="Cancel" />
      <LayoutButtons Face="KaelthasPhoenixRetarget" Type="AbilCmd" AbilCmd="KaelthasPhoenixRetarget,Execute" Slot="Heroic" />
    </CardLayouts>
    <SeparationRadius value="0.1875" />
    <InnerRadius value="1" />
    <MinimapRadius value="0.75" />
    <BehaviorArray Link="KaelthasPhoenixTrackingBehavior" />
    <EffectArray index="Create" value="KaelthasPhoenixAddToTrackingList" />
    <PlaneArray index="Air" value="1" />
  </CUnit>
  <CUnit id="KaelthasPhoenixWeaponMissile" parent="MISSILE_INVULNERABLE" />
  <CUnit id="KaelthasPyroblastMissile" parent="MISSILE_INVULNERABLE" />
  <CUnit id="KaelthasSunfireEnchantmentAttackMissile" parent="MISSILE_INVULNERABLE">
    <Mover value="HeroMissileSpeed22Ribbon" />
  </CUnit>
  <CUnit id="KaelthasVerdantSpheresMissile" parent="MISSILE_INVULNERABLE" />
  <CValidatorUnitOrderQueue id="CasterCastingGravityLapse">
    <AbilLink value="KaelthasGravityLapse" />
  </CValidatorUnitOrderQueue>
  <CValidatorCombine id="RemoveSuppressTurningBehavior">
    <CombineArray value="CasterCastingGravityLapse" />
  </CValidatorCombine>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombIgniteTalent">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombIgnite" />
  </CValidatorPlayerTalent>
  <CValidatorUnitCompareBehaviorCount id="KaelthasHas2StacksofAbilityPowerBuffBehaviorSunfireEnchantment">
    <WhichUnit Value="Caster" />
    <Value value="2" />
    <Behavior value="KaelthasSunfireEnchantmentAbilityPowerBuffDummyBehavior" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorCombine id="KaelthasHas2StacksofAbilityPowerBuffBehaviorandTargetisHeroSunfireEnchantment">
    <Type value="And" />
    <CombineArray value="KaelthasHas2StacksofAbilityPowerBuffBehaviorSunfireEnchantment" />
    <CombineArray value="TargetIsHero" />
  </CValidatorCombine>
  <CValidatorCombine id="KaelthasPyroblastSnapshotCombine">
    <CombineArray value="TargetOnAirPlaneAndNotVehicle" />
    <CombineArray value="TargetIsSpecialDeathState" />
    <CombineArray value="TargetIsDead" />
  </CValidatorCombine>
  <CValidatorCombine id="KaelthasHasDuplicateSpheresANDLessLT2ChargesUsed">
    <Type value="And" />
    <CombineArray value="KaelthasHasTwinSpheresTalent" />
    <CombineArray value="KaelthasVerdantSpheresTLT2ChargeUsed" />
  </CValidatorCombine>
  <CValidatorCombine id="KaelthasHasLT1ChargeUsedORTwinSpheresandLT2ChargesUsed">
    <CombineArray value="KaelthasVerdantSpheresTLT1ChargeUsed" />
    <CombineArray value="KaelthasHasDuplicateSpheresANDLessLT2ChargesUsed" />
  </CValidatorCombine>
  <CValidatorEffectCompareDodged id="KaelthasPyroblastMissileHasNotDodged">
    <WhichEffect value="KaelthasPyroblastLaunchMissile" />
    <Compare value="Eq" />
  </CValidatorEffectCompareDodged>
  <CValidatorUnitCompareTokenCount id="KaelthasFlamestrikeConvectionCasterHasLessThanMaxStacks">
    <WhichUnit Value="Caster" />
    <Compare value="LT" />
    <TokenId value="KaelthasFlamestrikeConvectionQuestToken" />
    <Value value="20" />
  </CValidatorUnitCompareTokenCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasManaAddictDoesNotHaveArcaneBarrierUnlocked">
    <Behavior value="KaelthasArcaneBarrierUnlocked" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasManaAddictHasArcaneBarrierUnlocked">
    <Behavior value="KaelthasArcaneBarrierUnlocked" />
    <Compare value="GT" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasHasSunKingsFuryTalentDebuff">
    <Value value="1" />
    <Behavior value="KaelthasLivingBombSunKingsFuryTalentDebuff" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasHasSunKingsFuryTalentDebuffSource">
    <WhichUnit Value="Source" />
    <Value value="1" />
    <Behavior value="KaelthasLivingBombSunKingsFuryTalentDebuff" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorPlayerTalent id="KalethasManaAddictTargetHasTalent">
    <WhichPlayer Value="Target" />
    <Find value="1" />
    <Value value="KaelthasManaAddict" />
  </CValidatorPlayerTalent>
  <CValidatorCombine id="KaelthasVerdantSpheresCombine">
    <CombineArray value="KaelthasCasterVerdantSpheresLT3" />
    <CombineArray value="KaelthasHasTwinSpheresCombine" />
  </CValidatorCombine>
  <CValidatorCombine id="KaelthasHasTwinSpheresCombine">
    <Type value="And" />
    <CombineArray value="KaelthasHasTwinSpheresTalent" />
    <CombineArray value="KaelthasCasterVerdantSpheresLT6" />
  </CValidatorCombine>
  <CValidatorUnitCompareChargeUsed id="KaelthasVerdantSpheresTLT1ChargeUsed">
    <Compare value="LT" />
    <ChargeLink value="Abil/KaelthasVerdantSpheres" />
    <Location value="Unit" />
    <Ability value="KaelthasVerdantSpheres" />
    <Value value="1" />
  </CValidatorUnitCompareChargeUsed>
  <CValidatorUnitCompareBehaviorCount id="KaelThasFlamestrikeBurnedFleshCasterhasTwostackofHeroHitCounter">
    <WhichUnit Value="Caster" />
    <Compare value="GT" />
    <Value value="1" />
    <Behavior value="KaelthasFlamestrikeBurnedFleshHeroHitCounter" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareChargeUsed id="KaelthasVerdantSpheresTLT2ChargeUsed">
    <Compare value="LT" />
    <ChargeLink value="Abil/KaelthasVerdantSpheres" />
    <Location value="Unit" />
    <Ability value="KaelthasVerdantSpheres" />
    <Value value="2" />
  </CValidatorUnitCompareChargeUsed>
  <CValidatorUnitCompareChargeUsed id="KaelthasVerdantSpheresTwinSpheresGT1ChargeUsed">
    <ChargeLink value="Abil/KaelthasVerdantSpheres" />
    <Location value="Unit" />
    <Ability value="KaelthasVerdantSpheres" />
    <Value value="1" />
    <Compare value="GT" />
  </CValidatorUnitCompareChargeUsed>
  <CValidatorPlayerTalent id="KaelthasHasTwinSpheresTalent">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasTwinSpheres" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasBurnedFleshTalent">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeBurnedFlesh" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasMasterOfFlamesTalent">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasMasterOfFlames" />
  </CValidatorPlayerTalent>
  <CValidatorUnitCompareBehaviorCount id="GravityLapseHasVerdantSphereDummyBehavior">
    <WhichUnit Value="Source" />
    <Value value="1" />
    <Behavior value="KaelthasGravityLapseVerdantSphereDummyBehavior" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareMarkerCount id="KaelthasNoMarkers">
    <ResultFailed value="AlreadyTargeted" />
    <WhichUnit Value="Caster" />
  </CValidatorUnitCompareMarkerCount>
  <CValidatorPlayerTalent id="SourceHasFlamestrikeFuryOfTheSunwell">
    <WhichPlayer Value="Source" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeFuryOfTheSunwell" />
  </CValidatorPlayerTalent>
  <CValidatorUnitCompareBehaviorCount id="SourceDoesNotHaveLivingBombSourceExploded">
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasLivingBombFinalSetSourceExploded" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="TargetDoesNotHaveLivingBombSourceExploded">
    <Behavior value="KaelthasLivingBombFinalSetSourceExploded" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitType id="IsKaelthasPhoenix">
    <Value value="KaelthasPhoenix" />
  </CValidatorUnitType>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresActive">
    <WhichUnit Value="Caster" />
    <Compare value="GE" />
    <Value value="1" />
    <Behavior value="KaelthasVerdantSpheresActive" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresGE3">
    <WhichUnit Value="Caster" />
    <Compare value="GE" />
    <Value value="3" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresLT3">
    <WhichUnit Value="Caster" />
    <Compare value="LT" />
    <Value value="3" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresLE3">
    <WhichUnit Value="Caster" />
    <Compare value="LE" />
    <Value value="3" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresLT4">
    <WhichUnit Value="Caster" />
    <Compare value="LT" />
    <Value value="4" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresLT5">
    <WhichUnit Value="Caster" />
    <Compare value="LT" />
    <Value value="5" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresLT6">
    <WhichUnit Value="Caster" />
    <Compare value="LT" />
    <Value value="6" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresE6">
    <WhichUnit Value="Caster" />
    <Value value="6" />
    <Behavior value="KaelthasVerdantSpheres" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasCasterVerdantSpheresNotActive">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresActive" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasPyroblastTargetDoesNotHaveRevealBehavior">
    <Behavior value="KaelthasPyroblastCastingReveal" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorPlayerTalent id="KaelthasDoesNotHavePyroblastPresenceOfMind">
    <WhichPlayer Value="Caster" />
    <Value value="KaelthasPyroblastPresenceOfMind" />
  </CValidatorPlayerTalent>
  <CValidatorUnitCompareBehaviorCount id="KaelthasDoesNotHaveSunfireEnchantmentBuff">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresSunfireEnchantmentBuff" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasGravityLapseTargetsHitGE3">
    <WhichUnit Value="Source" />
    <Compare value="GE" />
    <Value value="3" />
    <Behavior value="KaelthasGravityLapseTargetsHit" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorPlayerTalent id="KaelthasHasFlamestrikeCombustion">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeCombustion" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasFlamestrikeConvection">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeConvection" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasFlamestrikeFuryOfTheSunwell">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeFuryOfTheSunwell" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasFlamestrikeManaTap">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasFlamestrikeManaTap" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasFlamethrower">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasMasteryFlamethrower" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasGravityLapseEnergyRoil">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasGravityLapseEnergyRoil" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombSunKingsFury">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombSunKingsFury" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasGravityLapseGravityThrow">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasGravityLapseGravityThrow" />
  </CValidatorPlayerTalent>
  <CValidatorCombine id="KaelthasHasGravityLapseGravityThrowAndTargetIsMinion">
    <Type value="And" />
    <CombineArray value="KaelthasHasGravityLapseGravityThrow" />
    <CombineArray value="TargetMinion" />
    <CombineArray value="TargetNotMerc" />
  </CValidatorCombine>
  <CValidatorPlayerTalent id="KaelthasHasGravityLapseNetherWind">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasGravityLapseNetherWind" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasGravityLapseTriOptimal">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasGravityLapseTriOptimal" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasHeatingUp">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasMasteryHeatingUp" />
  </CValidatorPlayerTalent>
  <CValidatorCombine id="KaelthasHasHeroic1AndVerdantSpheresActive">
    <Type value="And" />
    <CombineArray value="KaelthasCasterVerdantSpheresActive" />
    <CombineArray value="CasterHasUltimate1Unlocked" />
  </CValidatorCombine>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombBackdraft">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombBackdraft" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombChainBomb">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombChainBomb" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombCriticalMass">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombCriticalMass" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombFissionBomb">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombFissionBomb" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasLivingBombPyromaniac">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasLivingBombPyromaniac" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasManaWyrm">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasMasteryManaWyrm" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasPhoenix">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasHeroicAbilityPhoenix" />
  </CValidatorPlayerTalent>
  <CValidatorCombine id="KaelthasHasPhoenixAndVerdantSpheresActive">
    <Type value="And" />
    <CombineArray value="KaelthasCasterVerdantSpheresActive" />
    <CombineArray value="KaelthasHasPhoenix" />
  </CValidatorCombine>
  <CValidatorPlayerTalent id="KaelthasHasPhoenixRebirth">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasPhoenixRebirth" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasPyroblastPresenceOfMind">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasPyroblastPresenceOfMind" />
  </CValidatorPlayerTalent>
  <CValidatorPlayerTalent id="KaelthasHasSunfireEnchantment">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasMasterySunfireEnchantment" />
  </CValidatorPlayerTalent>
  <CValidatorUnitCompareBehaviorCount id="KaelthasHasSunfireEnchantmentBuff">
    <WhichUnit Value="Caster" />
    <Behavior value="KaelthasVerdantSpheresSunfireEnchantmentBuff" />
    <Compare value="GT" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorPlayerTalent id="KaelthasHasVerdantSpheresFelInfusion">
    <WhichPlayer Value="Caster" />
    <Find value="1" />
    <Value value="KaelthasVerdantSpheresFelInfusion" />
  </CValidatorPlayerTalent>
  <CValidatorUnitOrderQueue id="KaelthasIsCastingPyroblast">
    <AbilLink value="KaelthasPyroblast" />
  </CValidatorUnitOrderQueue>
  <CValidatorUnitCompareBehaviorCount id="KaelthasNoPhoenixActive">
    <WhichUnit Value="Source" />
    <Behavior value="KaelthasPhoenixActive" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorLocationCompareRange id="KaelthasPhoenixInitialDistanceCheck">
    <WhichLocation Effect="KaelthasPhoenixInitialSet" />
    <Compare value="GE" />
    <Range value="4" />
    <Value Value="TargetUnit" />
  </CValidatorLocationCompareRange>
  <CValidatorLocationCompareRange id="KaelthasPhoenixRetargetDistanceCheck">
    <WhichLocation Effect="KaelthasPhoenixRetargetSet" />
    <Compare value="GE" />
    <Range value="4" />
    <Value Value="TargetUnit" />
  </CValidatorLocationCompareRange>
  <CValidatorLocationCompareRange id="KaelthasPyoblastDistanceCheck">
    <ResultFailed value="TargetIsOutOfRange" />
    <WhichLocation Value="TargetUnit" />
    <Compare value="LT" />
    <Range value="20" />
    <Value Value="SourceUnit" />
  </CValidatorLocationCompareRange>
  <CValidatorPlayerRequirement id="KaelthasPyroblastMissileExists">
    <Find value="1" />
    <Value value="KaelthasPyroblastMissileExists" />
  </CValidatorPlayerRequirement>
  <CValidatorUnitCompareBehaviorCount id="KaelthasSourceHasLivingBombFissionBombProc">
    <WhichUnit Value="Source" />
    <Value value="1" />
    <Behavior value="KaelthasLivingBombFissionBombProc" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitType id="KaelthasSourceIsRegularGravityLapseMissile">
    <WhichUnit Value="Source" />
    <Value value="KaelthasGravityLapseMissile" />
  </CValidatorUnitType>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetHasGravityLapse">
    <Value value="1" />
    <Behavior value="KaelthasGravityLapseTarget" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorCombine id="KaelthasTargetHasGravityLapseCombine">
    <CombineArray value="KaelthasTargetHasGravityLapseV" />
    <CombineArray value="KaelthasTargetHasGravityLapse" />
  </CValidatorCombine>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetHasGravityLapseV">
    <Value value="1" />
    <Behavior value="KaelthasGravityLapseTargetV" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetHasLivingBomb">
    <Value value="1" />
    <Behavior value="KaelthasLivingBombTarget" />
    <RequireOriginPlayer Value="Caster" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetDoesNotHaveLivingBomb">
    <Behavior value="KaelthasLivingBombTarget" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetDoesNotHaveLivingBombChainBomb">
    <Behavior value="KaelthasLivingBombChainBombTarget" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorUnitCompareBehaviorCount id="KaelthasTargetHasLivingBombChainBomb">
    <Value value="1" />
    <Behavior value="KaelthasLivingBombChainBombTarget" />
    <RequireOriginPlayer Value="Caster" />
  </CValidatorUnitCompareBehaviorCount>
  <CValidatorCombine id="KaelthasTargetHasLivingBombOrChainBomb">
    <CombineArray value="KaelthasTargetHasLivingBomb" />
    <CombineArray value="KaelthasTargetHasLivingBombChainBomb" />
  </CValidatorCombine>
  <CValidatorLocationEnumArea id="PhoenixCasterIsClose">
    <WhichLocation Value="CasterUnit" />
    <AreaArray Compare="GT" Count="0">
      <Radius value="2" />
    </AreaArray>
    <SearchFilters value="Heroic;Self,Ally,Neutral,Enemy,Structure,ImmuneToFriendlyAbilities,Worker,Missile,Item,Stasis,Dead,Hidden" />
  </CValidatorLocationEnumArea>
  <CValidatorCombine id="TargetDoesNotHaveLivingBombAndChainBomb">
    <Type value="And" />
    <CombineArray value="KaelthasTargetDoesNotHaveLivingBomb" />
    <CombineArray value="KaelthasTargetDoesNotHaveLivingBombChainBomb" />
  </CValidatorCombine>
  <CValidatorCombine id="TargetDoesNotAnyLivingBombVariation">
    <Type value="And" />
    <CombineArray value="KaelthasTargetDoesNotHaveLivingBomb" />
    <CombineArray value="KaelthasTargetDoesNotHaveLivingBombChainBomb" />
  </CValidatorCombine>
  <CWeaponLegacy id="KaelthasHeroWeapon" parent="StormHeroFastWeapon">
    <Icon value="Assets\Textures\storm_temp_btn-upgrade-terran-infantryweaponslevel3.dds" />
    <DisplayEffect value="KaelthasWeaponDamage" />
    <MinScanRange value="5.5" />
    <Range value="5.5" />
    <Period value="0.9" />
    <PreswingBeforeAttack value="0.75" />
    <PreswingBetweenAttacks value="0.25" />
    <Backswing value="0.15" />
    <Effect value="KaelthasWeaponLaunchMissileSet" />
  </CWeaponLegacy>
  <CWeaponLegacy id="KaelthasPhoenixWeapon">
    <Options index="ContinuousScan" value="1" />
    <DisplayEffect value="KaelthasPhoenixDamage" />
    <TargetFilters value="Heroic,Visible;Player,Ally,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AcquireFilters value="Heroic;NoMinionAggro" />
    <AcquireScanFilters value="Heroic;NoMinionAggro" />
    <Range value="5.75" />
    <RangeSlop value="0" />
    <Period value="0.5" />
    <DamagePoint value="0" />
    <Backswing value="0" />
    <Effect value="KaelthasPhoenixWeaponLaunchMissile" />
  </CWeaponLegacy>
  <CWeaponLegacy id="KaelthasPhoenixWeaponNonHeroes">
    <Options index="ContinuousScan" value="1" />
    <DisplayEffect value="KaelthasPhoenixDamage" />
    <TargetFilters value="Visible;Player,Ally,Heroic,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <AcquireFilters value="-;Heroic" />
    <AcquireScanFilters value="-;Heroic" />
    <RangeSlop value="0" />
    <Cost>
      <Cooldown Link="Weapon/KaelthasPhoenixWeapon" />
    </Cost>
    <Period value="0.5" />
    <DamagePoint value="0" />
    <Backswing value="0" />
    <Effect value="KaelthasPhoenixWeaponLaunchMissile" />
    <ScanValidationArray value="TargetNotNoMinionAggroAndSummoned" />
  </CWeaponLegacy>
  <CWeaponLegacy id="KaelthasSunfireEnchantmentWeapon">
    <Options index="Disabled" value="1" />
    <Options index="ContinuousScan" value="1" />
    <Options index="HoldFileInShrubs" value="1" />
    <Icon value="Assets\Textures\storm_temp_btn-upgrade-terran-infantryweaponslevel3.dds" />
    <DisplayEffect value="KaelthasSunfireEnchantmentDamage" />
    <TargetFilters value="Visible;Self,Player,Ally,Neutral,Missile,Stasis,Dead,Hidden,Invulnerable" />
    <MinScanRange value="5.5" />
    <Range value="5.5" />
    <RangeSlop value="2.125" />
    <Period value="0.9" />
    <DamagePoint value="0.125" />
    <PreswingBeforeAttack value="0.75" />
    <PreswingBetweenAttacks value="0.25" />
    <Backswing value="0.15" />
    <Effect value="KaelthasSunfireEnchantmentLaunchMissileSet" />
    <RandomDelayMin value="0" />
    <RandomDelayMax value="0" />
  </CWeaponLegacy>
</Catalog>